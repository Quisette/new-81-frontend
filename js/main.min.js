var _0xf90a=['This\x20board\x20cannot\x20be\x20shared.','この盤面はシェアできません','<textarea></textarea>','clip-board-area','body','#clip-board-area','execCommand','copy','remove','.kif','This\x20game\x20cannot\x20be\x20exported.','この対局は出力できません','./kifu_note.html','kifu_note','New\x20window\x20could\x20not\x20be\x20opened','This\x20board\x20does\x20not\x20have\x20a\x20kifu\x20URL.','createElement','input','type','file','target','files','onload','result','resetStudyPosition','join','readAsText','#modalOption',':checked','#G101','#G100','isPlayer','msg.last_kifu_url','toKifuURL','getOpponent','#FF3388','msg.before_downgrade','move','input[name=kifuModeRadio]:eq(0)','#kifuGridWrapper','.dataTables_scrollBody','local-kifu','isSubHost','#G000','#G001','isPostGame',':last','branch','replayMoves','moves','redrawAllArrows','setBoardConditions','input[name=kifuModeRadio]:eq(','from','count','add','hostMark','gridObject','#player-info-rate','prepend','#flipButton','#greetButton','style','#replayButtons','input[name=kifuModeRadio]','#clearArrowsButton,\x20#positionMenuButton,\x20#kifuMenuButton,\x20#rematchButton,\x20#closeGameButton','#receiveWatcherChatCheckBox','#resignButton','isWatcher','#clearArrowsButton,\x20#flipButton,\x20#positionMenuButton,\x20#kifuMenuButton','#logoutButton','input[name=kifuModeRadio]:eq(1)','.buttons-for-host','#giveHostButton','submenu-button-disabled','#uploadKifuButton','#kifuNoteButton,\x20#shareKifuTwitterButton,\x20#shareKifuFacebookButton','input[name=\x22newGameType\x22]:checked','#privateRoomPass','#newGamePasswordInput','wait','#newGameRuleSelect\x20option:selected','#newGameTotalSelect\x20option:selected','#newGameByoyomiSelect\x20option:selected','stopWaiting','#newGameStudyBlack','#newGameStudyWhite','study','accept','decline','さんからの挑戦をパスしました。','[##REJECT]','Declined\x20the\x20invitation\x20from\x20','さんからの招待をパスしました。','#player-info-window-','<div></div>','player-info-window-','titleName','<div\x20id=\x22player-info-layer-1\x22\x20class=\x22hbox\x22\x20style=\x22pointer-events:none\x22>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22avatar-wrapper\x22><img\x20class=\x22avatar\x22/></div>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex:1;margin-left:10px\x22><p\x20id=\x22p1\x22></p><p\x20id=\x22p2\x22></p><p\x20id=\x22p3\x22></p><p\x20id=\x22p4\x22></p><p\x20id=\x22p5\x22></p></div>\x20\x20\x20\x20\x20\x20\x20\x20</div>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22player-info-layer-2\x22\x20style=\x22margin-top:-128px;opacity:0\x22>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22privateMessageArea\x22></div>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22hbox\x22\x20style=\x22margin-top:5px\x22><span\x20style=\x22margin-right:5px;white-space:nowrap\x22>PM:</span><input\x20id=\x22privateChatInput\x22\x20style=\x22flex:1\x22></div>\x20\x20\x20\x20\x20\x20\x20\x20</div>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22check-game\x22\x20id=\x22check-game-','\x22></div>','auto','left+','\x20top+','#privateMessageArea','destroy','board.give_host','fa\x20fa-user-plus\x20font-fa\x20buttons-for-host\x20connected-button-right','board.give_subhost','player_info.challenge','fa\x20fa-info-circle\x20font-fa','player_info.detail','fa\x20fa-comment\x20font-fa','siblings','.ui-dialog-buttonpane','#privateChatInput','pm_while_playing','color','#33f','getPlayerDetail','waitingChallengeableTournament','checkTournamentOpponent','waitingTournamentId','getEvaluation','img.avatar','avatarURL','flagImgTag27','toString','p#p2','R:\x20','mobileIconTag','<img\x20class=\x22icon-evaluation\x22\x20src=\x22img/icon_like.png\x22><span\x20class=\x22get-evaluation\x22\x20id=\x22get-evaluation-','\x22>?</span>','msg.still_in_game','msg.challenge_only_one','listAsWaiter','この大会には参加していません。','withinPeriod','It\x20is\x20outside\x20the\x20tournament\x20period\x20right\x20now.','現在、大会開催期間外です。','provisional','waitingGameName','seek','This\x20game\x20rule\x20is\x20not\x20supported\x20yet.','HTML版は特殊ルールには未対応です。','msg.no_guest_rating','Challenging\x20','.....\x20(Must\x20wait\x20for\x2020\x20seconds\x20max)','challenge','CHALLENGE','isMobile','The\x20opponent\x20is\x20not\x20waiting\x20with\x20own\x20game\x20rule.','相手は対局待をしていません。','相手は対局待をしていません。自分が対局待にすることで招待メッセージを送ることが可能です。','idle','\x20is\x20not\x20accepting\x20challenge\x20or\x20invitations\x20right\x20now.','さんは現在\x20挑戦・招待を受け付けていません。','inGameRoom','\x20is\x20in\x20another\x20game\x20right\x20now.','privateChat','[##INVITE]','The\x20opponent\x20is\x20not\x20waiting\x20with\x20own\x20game\x20rule.\x20Instead,\x20an\x20invitation\x20to\x20your\x20game\x20has\x20been\x20sent\x20to\x20him.','相手は対局待をしていません。代わりに自分の対局への招待メッセージを','さんに送信しました。(拒否された場合は連続送信しないで下さい)','/players/show/','div#player-info-layer-1','div#player-info-layer-2','[##GRAB]','Event\x20received:\x20','stopOpening','login.successfull','div#layerLoginContents','#serverLogo','img/','serverName','.png','#header-serverName','\x20:\x20','username','setFromLogin','indexOf','splice','getTournaments','HOUR_MILE','#classSurveyButton','block','msg.html5_initial','You\x20have\x20','\x20status.\x20Thank\x20you\x20for\x20choosing\x2081Dojo.','クラス','#FFBB00','#header-playerName','#header-mile','\x20D-Miles\x20:\x20','\x20Dマイル\x20:\x20','#header-premium','\x20class','\x20クラス','#loginButton,\x20#passwordInput,\x20#usernameInput','shift','source','setFromStudy','setFromList','A\x20new\x20player','新鋭棋士','\x20\x20-\x20\x20','\x20logged\x20in','\x20via\x20mobile','\x20from\x20','name_en','\u3000Now\x20on\x20','-win\x20streak!','モバイルから','ログインしました。\x20(','\u3000現在','連勝中!','setFromLobbyIn','code.G031','setFromGame','disableChallenge','play','CHALLENGER','#modalChallenger','C005','setKifuId','msg.game_start','#444444','You\x20are\x20Black\x20','isHandicap','(Sente).','あなた','は下手(したて)','が先手','です。','You\x20are\x20White\x20','(Gote).\x0a','が上手(うわて)','msg.mute_chat','#G020','#G021','[##FITNESS]','postgame_study_level','english_level','substr','useTime','setTime','addMoveToKifuGrid','setFromCSA','handleReceivedMove','updateTurnHighlight','runningTimer','run','pauseAllTimers','gameEndType','p#disconnectTimer','getFinalMove','setGameEnd','endTime','TIME_UP','sayTimeUp','#DD0088','setResult','###\x20You\x20Lose\x20###','###\x20あなたの負けです\x20###','gameEnd','WIN','###\x20You\x20Win\x20###\x0a','###\x20あなたの勝ちです\x20###\x0a','DRAW','###\x20Draw\x20###\x0a','###\x20引き分け\x20###\x0a','SENTE_WIN','###\x20Sente\x20(or\x20Shitate)\x20Wins\x20###\x0a','GOTE_WIN','###\x20後手(または上手)の勝ち\x20###\x0a','msg.host','msg.subhost','mileagePass','getTournament','Tournament\x20status:\x20','イベント対局結果の確認:\x20','playerNameClassChange','name-mouse-out','startGame','msg.rated','msg.nonrated','This\x20game\x20belongs\x20to:\x20\x22','handleMonitorMove','seconds','getPlayerRoleFromName','reconnectTimer','code.G030','#000000','#666666','name-left','door','num','[auto-PM]\x20#G102','\x20disconnected.','さんの接続が切れました。','disconnectTimer','msg.opponent_disconnect','<p></p>','since_disconnect','<span\x20id=\x22disconnectCount\x22>0</span>&nbsp','span#disconnectCount','declare','#disconnectDeclareButton','STUDY','さんが[','検討室',']を作成しました。','chatLobby','isMyRoom','GAME\x20STARTED','新規対局','\x20vs\x20','\x20/\x20','setFromStart','\x20has\x20won\x20','\x20games!','勝を達成しました!','10-sec\x20Shogi','10秒将棋','\x20is\x20promoted\x20to\x20','\x20class\x20in\x20','さん、','\x20に昇格!!','#DD7700','#550066','#888888','#0033DD','accept_arrow','addArrow','Study\x20Host\x20status\x20given\x20to\x20','感想戦ホストは、','msg.subhost_given','さんに、感想戦サブ・ホスト権限が付与されました。','<定型>\x20','rematch','msg.rematch_agreed','closeGame','#rematchButton','#660000','chatBoard','Opponent\x27s\x20','option.study_level','isFromJapan','#0000AA','\x20did\x20not\x20accept\x20your\x20invitation.','さんに招待メッセージが送信出来ませんでした。','div#player-info-window-','#f35','isOpen','PM:\x20[','chatPrivate','[##REJECT]C011','#modalInvitation','[##REJECT]C012','INVITATION','\x20D-Mile','\x20Dマイル獲得しました!','\x20Dマイルを消費しました。(通算マイル・期間マイルは減少しません)','chat','[##WINS]','[##EXP]','You\x27re\x20promoted\x20to\x20a\x20new\x20rank!!','You\x27ve\x20gained\x20','\x20EXP!!\x20(Total:\x20','\x20EXP)\x20You\x27re\x20in\x20\x22','EXPを獲得!!\x20(トータル\x20','EXP)\x20現在「','」レベルです','#userEvaluationDialog','input[name=loginType],\x20input#usernameInput,\x20input#passwordInput,\x20input#loginSave,\x20input#loginButton','input#reloginButton','Studying\x20a\x20branch\x20from\x20move\x20#','手目からの分岐手順を検討','popupName','toY','toCSA','SEND_STUDY','[##STUDY]','[auto-chat]\x20','typingIndicator-','typingIndicator','TYPE_','#typingIndicator-','fadeOut','amJoined','#newGameTournamentSelect','<option/>','to_play','challenger.tournament_not_yet','[id=get-evaluation-','max','good','bad','wins','losses','p#p3','style_id','p#p4','player_info.win','player_info.loss','toFixed','p#p5','streak_best','player_info.current','streak','div#layerLobby','div#layerBoard','setByoyomiType','timer_sound_type','gameStartEndEnabled','gamechat_sound_play','chatLobbyEnabled','lobbychat_sound_play','chatBoardEnabled','buttonEnabled','button_sound_play','setPieceDesignType','piece_type','setScale','div','msg.no_answer','AUTO_REFRESH','EARTH','[##TYPE]','TYPE_0','TYPE_1','WORLD_CLOCK','<sPAn\x20onclick=\x22_openPlayerInfo(users[\x27','\x27])\x22\x20class=\x22name-link\x22>','</SpaN>','<sPAn\x20onclick=\x22_enterGameById(\x27','\x27)\x22\x20class=\x22name-link\x22>','list','userEvaluationDialog','Evaluate\x20','対局相手','\x27s\x20game\x20manner\x20->\x20','さんの対局マナーを評価して下さい\x20→\x20','<a></a>','[Good]','[良い]','[Bad]','[悪い]','#KIF\x20version=2.0\x20encoding=UTF-8','開始日時：','場所：81Dojo','持ち時間：','floor','total','手合割：','先手：','後手：','手数----指手---------消費時間','toKIF','変化：','引き分け','RESIGN','CONST','special_notations_ja','owner','GOTE','endTypeKey','toKifuNote','Asia/Tokyo','format','81道場\x20','分\x20(切れたら1手','byoyomi','&nbsp;','opening','tip','&emsp;☖\x20','accumulatedTimes','period','getDay','MOON','guest_expire','SEEDS','key','timezone','#worldClocks','option.not_defined','option.level','some','isUserIn','http://81dojo.com/dojo/images/','loadNewPosition','MERCURY','test','テスト','shogihub.com','search','forEach','p#versionText','text','ver.\x20','#boardBox','addEventListener','load','split','open','get','dat/countries.txt','send','match','titleNames','titleNameTips','banned','push','trim','http://81dojo.com/dojo/infoData.html?','getJSON','dat/config.json?','getTime','allowConsole','language','locale','use','init','locales/{{lng}}.json?','languageChanged','dataTableExt','oSort','rate-str-asc','rateStrToRate','35%','<img\x20class=\x22inline\x22\x20src=\x22img/','.png\x22>\x20','description_en','description_ja','population','name','single','Loading...','読込中','clear','#playerGrid','DataTable','statStr','10%','title','14%','nameStr','40%','dt-body-left','country','12%','dt-body-right','rate-str','desc','#playerGrid\x20tbody','dblclick','user-select','node','parent','hasClass','preventDefault','index','#waiterGrid','waiter','rate','ruleStr','27%','timeStr','13%','#waiterGrid\x20tbody','row','selected','#gameGrid','senteStr','29%','ruleShort','watchersStr','maxRate','gameId','data','#watcherGrid','watcher','25%','20%','#watcherGrid\x20tbody','#kifuGrid','numStr','60%','api','.subMenu','hide','.menuBar\x20>\x20ul\x20>\x20li','hover','find','ul:not(:animated)','min-width','width','slideUp','click','closest','fast','login','#usernameInput','val','#passwordInput','dat','#hiddenPass','dat2','save','#loginSave','prop','checked','true','#languageSelector','#openingMusicCheckBox','muteOpening','openingMusic','#findUser','autocomplete','value','select','lobby.player_not_found','#FF0000','onblur','isRated','gameChat','[##M_OUT]0,0','onfocus','isPlaying','[##M_IN]0,0','beforeunload','You\x20are\x20player.\x20Exit\x20the\x20room\x20before\x20closing\x20the\x20browser.','unload','ondragstart','#lobbyChatInput','keyup','keyCode','length','#boardChatInput','SEND_TYPE','tooltip','event','clientX','clientY','focus','system.81dojo.com','setCallbackFunctions','SERVERS','OPTIONS','PLAYER','CHECK_OPPONENT','onresize','#layerLobby','a.button','css','innerWidth','#layerBoard','div.menuBar','#lobbyChatBox','insertAfter','flex','initial','#gameGridWrapper','11\x2011\x201px','actualWidth','innerHeight','actualHeight','#boardChatBox','insertBefore','#boardRightBottomHBox','#watcherBox','prependTo','#boardLeftBottomHBox','each','height','thead','#layerLoginContents','opacity','startOpening','disabled','draw','p#loginAlert','getServers','changeLanguage','invalidate','settings','oLanguage','sEmptyTable','loading','board.no_watchers','html','#languageSelector\x20option:selected','code','flagImgTag16','[data-i18n]','attr','data-i18n','[data-i18n-value]','data-i18n-value','#newGameRuleSelect,\x20#newGameStudyRuleSelect','empty','keys','append','#modalNewGame,\x20#modalChallenger,\x20#modalInvitation,\x20#modalImpasse,\x20#modalOption,\x20#modalChatTemplate','option','data-i18n-title','button','label','#usernameInput,\x20#passwordInput','input[name=loginType]:checked','#loginAlert','login.connecting','host','port','guest','dojo_guest','LOGGED_IN','LOGIN_FAILED','LOBBY_IN','LOBBY_OUT','CHAT','GAMECHAT','PRIVATECHAT','MOVE','GAME_END','ERROR','LIST','WATCHERS','GAME','ACCEPT','DECLINE','GAME_SUMMARY','START','RESULT','RECONNECT','MILE','EXP','WINS','ENTER','LEAVE','DISCONNECT','connect','display','none','src','img/entrance_ja.jpg','img#entrance-img','img/81Dojo_bye.jpg','close','#refreshButton','addClass','button-disabled','REFRESH','isGuest','#modalNewGame','dialog','http://system.81dojo.com/','rows','deselect','lockedOut','lobby.require_pass','enterPass','game','isVariant','This\x20game\x20rule\x20is\x20not\x20supported\x20by\x20HTML\x20client\x20yet.','この対局ルールはHTML版アプリでは未対応です。','#ff0000','setGame','status','msg.reconnect_while_game','#008800','reconnect','watchers','monitor','#lobbyMessageArea','detach','replace','<span','</span>','<a\x20href=\x22$1\x22\x20target=\x22_blank\x22>$1</a>','<br>&emsp;','<span></span>','bold','appendTo','<br>','scrollTop','scrollHeight','animate','code.','#boardContents','pointer-events','#checkLobbyButton','100%','border-bottom','removeClass','<i\x20class=\x22fa\x20fa-eye\x20fa-2x\x22></i>','5px\x20ridge\x20orange','<i\x20class=\x22fa\x20fa-eye-slash\x20fa-2x\x22></i>','myRoleType','position','turn','<(_\x20_)>\x20負けました。(Makemashita.)','resign','rematchAgreed','[##REMATCH]','#boardMessageArea','msg.rematch_ended','<(_\x20_)>\x20お願いします。(Onegai-shimasu.)','<(_\x20_)>\x20有難うございました。(Arigatou-gozaimashita.)','#modalChatTemplate','[##TEMPLATE]','flipBoard','#modalImpasse','calcImpasse','onListen','clearArrows','[##ARROW]CLEAR','isHost','isStudy','white','isPlayerPresent','black','[##GIVEHOST]','studyHostType','[##SUBHOST_ON]','canCalculateMaterialBalance','Material\x20balance\x20(move\x20#','):\u3000','This\x20function\x20is\x20only\x20for\x20even\x20games.','平手以外では使えません','http://kyokumen.jp/positions/','toSFEN','_blank','gameType'];(function(_0x6f5efd,_0x533117){var _0x1a11ec=function(_0x30b912){while(--_0x30b912){_0x6f5efd['push'](_0x6f5efd['shift']());}};_0x1a11ec(++_0x533117);}(_0xf90a,0x1e9));var _0x340c=function(_0x21d618,_0x4da6db){_0x21d618=_0x21d618-0x0;var _0x5356c0=_0xf90a[_0x21d618];return _0x5356c0;};'use strict';var testMode=![];const IMAGE_DIRECTORY=_0x340c('0x0');var args=new Object();var client=null;var apiClient=null;var sp;var currentLayer=0x0;var mileage;var serverGrid;var playerGrid;var waiterGrid;var gameGrid;var watcherGrid;var kifuGrid;var users=new Object();var tournaments=new Object();var playerInfoWindows=new Object();var timeouts=new Object();var _disconnectTimer;var me;var _challengeUser=null;var _gameAccepted=![];var _allowWatcherChat=![];var _greetState=0x0;var premium=0x0;var countries=new Object();var board;var hidden_prm=0x0;var _hourMileCount;var mouseX;var mouseY;var config=null;var infoFetcher=new Object();var options=new Object();var _studyBase=null;var _studyBranchMoves=null;var _studySender=null;var _sendStudyBuffer=null;var _opponentDisconnectCount=0x0;var _dialogOnBoardClose=![];var _worldClocks=[];var _loginHistory=[];var hostPlayerName=null;function _testFunction(_0x169435){if(_0x169435==0x0){if(!![]){board[_0x340c('0x1')]();_switchLayer(0x2);return;}_handleServers([{'id':0x1,'name':_0x340c('0x2'),'description_en':_0x340c('0x3'),'description_ja':_0x340c('0x4'),'enabled':!![],'population':0x0,'host':_0x340c('0x5'),'port':0xff4}]);}else if(_0x169435==0x1){_loginButtonClick();}else if(_0x169435==0x2){}}$(function(){if(location['search']!=''){location[_0x340c('0x6')]['substring'](0x1)['split']('&')[_0x340c('0x7')](function(_0x2eace0){let _0xb2a1da=_0x2eace0['split']('=');args[_0xb2a1da[0x0]]=_0xb2a1da[0x1];});}$(_0x340c('0x8'))[_0x340c('0x9')](_0x340c('0xa')+version);board=new Board($(_0x340c('0xb')));let _0x561dfe=new XMLHttpRequest();_0x561dfe[_0x340c('0xc')](_0x340c('0xd'),function(){_0x561dfe['responseText'][_0x340c('0xe')]('\x0a')[_0x340c('0x7')](function(_0x18ab23){let _0x4d6340=_0x18ab23[_0x340c('0xe')]('\x09');countries[_0x4d6340[0x0]]=new Country(parseInt(_0x4d6340[0x0]),_0x4d6340[0x1],_0x4d6340[0x4],_0x4d6340[0x2]);});});_0x561dfe[_0x340c('0xf')](_0x340c('0x10'),_0x340c('0x11'));_0x561dfe[_0x340c('0x12')]();infoFetcher={'titleNames':new Object(),'titleNameTips':new Object(),'titleAvatars':new Object(),'banned':[]};let _0xcbc6cb=new XMLHttpRequest();_0xcbc6cb[_0x340c('0xc')](_0x340c('0xd'),function(){let _0x51235b='';_0xcbc6cb['responseText'][_0x340c('0xe')]('\x0a')[_0x340c('0x7')](function(_0x243b37){if(_0x243b37[_0x340c('0x13')](/^###(.+)$/)){_0x51235b=RegExp['$1'];}else{switch(_0x51235b){case'TITLE_HOLDERS':let _0x3e1c8a=_0x243b37[_0x340c('0xe')]('\x09');infoFetcher[_0x340c('0x14')][_0x3e1c8a[0x0]]=_0x3e1c8a[0x1];infoFetcher[_0x340c('0x15')][_0x3e1c8a[0x0]]=_0x3e1c8a[0x2];infoFetcher['titleAvatars'][_0x3e1c8a[0x0]]=_0x3e1c8a[0x3];break;case'BANNED':infoFetcher[_0x340c('0x16')][_0x340c('0x17')](_0x243b37[_0x340c('0x18')]());}}});});_0xcbc6cb[_0x340c('0xf')](_0x340c('0x10'),_0x340c('0x19')+version);_0xcbc6cb[_0x340c('0x12')]();sp=new SoundPlayer();$[_0x340c('0x1a')](_0x340c('0x1b')+new Date()[_0x340c('0x1c')](),function(_0x33c38f){config=_0x33c38f;if(config[_0x340c('0x1d')]==![])debugLoop();});i18next[_0x340c('0x1e')]=localStorage['locale']||args[_0x340c('0x1f')]||'ja';i18next[_0x340c('0x20')](i18nextXHRBackend)[_0x340c('0x21')]({'lng':localStorage['locale']||args['locale']||'ja','fallbackLng':args[_0x340c('0x1f')]||'ja','debug':!![],'backend':{'loadPath':_0x340c('0x22')+version}},function(_0x355523,_0x327e78){_updateLanguage();});i18next['on'](_0x340c('0x23'),()=>{_updateLanguage();});$['fn'][_0x340c('0x24')][_0x340c('0x25')][_0x340c('0x26')]=function(_0x566277,_0x4af59c){_0x566277=User[_0x340c('0x27')](_0x566277);_0x4af59c=User[_0x340c('0x27')](_0x4af59c);return _0x566277<_0x4af59c?-0x1:_0x566277>_0x4af59c?0x1:0x0;};$['fn']['dataTableExt'][_0x340c('0x25')]['rate-str-desc']=function(_0x35acd5,_0x572380){_0x35acd5=User['rateStrToRate'](_0x35acd5);_0x572380=User[_0x340c('0x27')](_0x572380);return _0x35acd5<_0x572380?0x1:_0x35acd5>_0x572380?-0x1:0x0;};serverGrid=$('#serverGrid')['DataTable']({'data':[],'columns':[{'data':'name','width':_0x340c('0x28'),'className':'dt-body-left','bSortable':![],'render':function(_0x334770){return _0x340c('0x29')+_0x334770+_0x340c('0x2a')+_0x334770;}},{'width':'35%','bSortable':![],'render':function(_0x49eb05,_0x4f17e7,_0x347f8f){return EJ(_0x347f8f[_0x340c('0x2b')],_0x347f8f[_0x340c('0x2c')]);}},{'data':_0x340c('0x2d'),'width':_0x340c('0x28'),'bSortable':![]}],'rowId':_0x340c('0x2e'),'searching':![],'paging':![],'info':![],'order':![],'select':_0x340c('0x2f'),'oLanguage':{'sEmptyTable':EJ(_0x340c('0x30'),_0x340c('0x31'))}});serverGrid[_0x340c('0x32')]();playerGrid=$(_0x340c('0x33'))[_0x340c('0x34')]({'data':[],'columns':[{'data':_0x340c('0x35'),'width':_0x340c('0x36')},{'data':_0x340c('0x37'),'width':_0x340c('0x38')},{'data':'rank','width':_0x340c('0x38'),'bSortable':![]},{'data':_0x340c('0x39'),'width':_0x340c('0x3a'),'className':_0x340c('0x3b')},{'data':_0x340c('0x3c'),'width':_0x340c('0x3d'),'className':_0x340c('0x3b')},{'data':'rate','width':'10%','className':_0x340c('0x3e'),'type':_0x340c('0x3f')}],'rowId':_0x340c('0x2e'),'searching':![],'paging':![],'info':![],'select':_0x340c('0x2f'),'order':[[0x5,_0x340c('0x40')]],'scrollY':!![]});playerGrid[_0x340c('0x32')]();$(_0x340c('0x41'))['on'](_0x340c('0x42'),'tr',function(){_openPlayerInfo(users[playerGrid['row'](this)['id']()]);});playerGrid['on'](_0x340c('0x43'),function(_0x2b5cd5,_0x569dad,_0x2bb537,_0x31d047,_0x2b669b){if($(_0x31d047[_0x340c('0x44')]())[_0x340c('0x45')]()[_0x340c('0x46')]('selected')){_0x2b5cd5[_0x340c('0x47')]();}else{_playerSelected(playerGrid,_0x31d047[_0x340c('0x48')]()['row']);}});waiterGrid=$(_0x340c('0x49'))[_0x340c('0x34')]({'data':[],'columns':[{'data':_0x340c('0x4a'),'width':'50%','className':_0x340c('0x3b')},{'data':_0x340c('0x4b'),'width':_0x340c('0x36'),'className':_0x340c('0x3e'),'type':_0x340c('0x3f')},{'data':_0x340c('0x4c'),'width':_0x340c('0x4d')},{'data':_0x340c('0x4e'),'width':_0x340c('0x4f')}],'rowId':_0x340c('0x2e'),'searching':![],'paging':![],'info':![],'select':_0x340c('0x2f'),'order':[[0x1,_0x340c('0x40')]],'scrollY':!![]});waiterGrid[_0x340c('0x32')]();$(_0x340c('0x50'))['on']('dblclick','tr',function(){_openPlayerInfo(users[waiterGrid[_0x340c('0x51')](this)['id']()]);});waiterGrid['on'](_0x340c('0x43'),function(_0x268654,_0x46b39f,_0x247c33,_0x5dec5b,_0x2048bc){if($(_0x5dec5b[_0x340c('0x44')]())[_0x340c('0x45')]()[_0x340c('0x46')](_0x340c('0x52'))){_0x268654[_0x340c('0x47')]();}else{_playerSelected(waiterGrid,_0x5dec5b['index']()[_0x340c('0x51')]);}});gameGrid=$(_0x340c('0x53'))[_0x340c('0x34')]({'data':[],'columns':[{'data':_0x340c('0x54'),'width':_0x340c('0x55'),'className':'dt-body-left','bSortable':![]},{'data':'goteStr','width':_0x340c('0x55'),'className':_0x340c('0x3e'),'bSortable':![]},{'data':_0x340c('0x56'),'width':'16%','bSortable':![]},{'data':'movesStr','width':'7%','bSortable':![]},{'data':_0x340c('0x57'),'width':'7%','bSortable':![]},{'data':'openingStr','width':_0x340c('0x3d'),'bSortable':![]},{'data':_0x340c('0x58'),'width':'0%','visible':![]}],'rowId':_0x340c('0x59'),'searching':![],'paging':![],'info':![],'select':_0x340c('0x2f'),'order':[[0x6,_0x340c('0x40')]],'scrollY':!![]});gameGrid[_0x340c('0x32')]();$('#gameGrid\x20tbody')['on']('dblclick','tr',function(){_enterGame(gameGrid[_0x340c('0x51')](this)[_0x340c('0x5a')]());});watcherGrid=$(_0x340c('0x5b'))[_0x340c('0x34')]({'data':[],'columns':[{'name':'name_column','data':_0x340c('0x5c'),'width':'55%','className':_0x340c('0x3b')},{'data':_0x340c('0x3c'),'width':_0x340c('0x5d'),'className':'dt-body-left'},{'data':_0x340c('0x4b'),'width':_0x340c('0x5e'),'className':_0x340c('0x3e'),'type':_0x340c('0x3f')}],'rowId':_0x340c('0x2e'),'searching':![],'paging':![],'info':![],'select':_0x340c('0x2f'),'order':[[0x2,_0x340c('0x40')]],'scrollY':!![]});watcherGrid[_0x340c('0x32')]();$(_0x340c('0x5f'))['on']('dblclick','tr',function(){_openPlayerInfo(users[watcherGrid['row'](this)['id']()]);});kifuGrid=$(_0x340c('0x60'))[_0x340c('0x34')]({'data':[],'columns':[{'data':_0x340c('0x61'),'width':'15%','bSortable':![]},{'data':'moveStr','width':_0x340c('0x62'),'className':_0x340c('0x3b'),'bSortable':![]},{'data':_0x340c('0x4e'),'width':_0x340c('0x5d'),'className':'dt-body-right','bSortable':![]}],'searching':![],'paging':![],'info':![],'select':_0x340c('0x63'),'scrollY':!![],'order':![]});kifuGrid[_0x340c('0x32')]();kifuGrid['on'](_0x340c('0x43'),function(_0x38921f,_0x4ddcc4,_0x35ddee,_0x1c9bd8,_0x4b907a){if($(_0x1c9bd8['node']())[_0x340c('0x45')]()[_0x340c('0x46')]('selected')){_0x38921f[_0x340c('0x47')]();}else{_kifuSelected(_0x1c9bd8[_0x340c('0x48')]()['row']);}});$(_0x340c('0x64'))[_0x340c('0x65')]();$(_0x340c('0x66'))[_0x340c('0x67')](function(){if($(this)[_0x340c('0x68')]('a')[_0x340c('0x46')]('button-disabled'))return;$(_0x340c('0x69'),this)['css'](_0x340c('0x6a'),$(this)[_0x340c('0x6b')]())['slideDown']();},function(){$('ul',this)[_0x340c('0x6c')]();});$(_0x340c('0x64'))[_0x340c('0x68')]('a')[_0x340c('0x6d')](function(){$(this)[_0x340c('0x6e')]('ul')[_0x340c('0x6c')](_0x340c('0x6f'));});_generateWorldClocks();_switchLayer(0x0);_fadeInLoginView();if(localStorage[_0x340c('0x70')])$(_0x340c('0x71'))[_0x340c('0x72')](localStorage[_0x340c('0x70')]);if(localStorage['dat']){$(_0x340c('0x73'))[_0x340c('0x72')](decaesar(decaesar(localStorage[_0x340c('0x74')],0x51),0x3));$(_0x340c('0x75'))['val'](decaesar(decaesar(localStorage['dat'],0x51),0x3));maskPass();}if(localStorage[_0x340c('0x76')])_loginHistory=decaesar(decaesar(localStorage[_0x340c('0x76')],0x51),0x3)[_0x340c('0xe')](',');if(localStorage[_0x340c('0x77')])$(_0x340c('0x78'))[_0x340c('0x79')](_0x340c('0x7a'),localStorage['save']==_0x340c('0x7b'));$(_0x340c('0x7c'))['val'](localStorage[_0x340c('0x1f')]||args['locale']||'ja');if(localStorage['openingMusic']){$(_0x340c('0x7d'))[_0x340c('0x79')]('checked',localStorage['openingMusic']==_0x340c('0x7b'));sp[_0x340c('0x7e')](!(localStorage[_0x340c('0x7f')]==_0x340c('0x7b')));}$(_0x340c('0x80'))[_0x340c('0x81')]({'autoFocus':!![],'minLength':0x2,'delay':0x0,'select':function(_0x49f9e4,_0x1119e8){let _0x31f0c6=_0x1119e8['item'][_0x340c('0x82')];if(users[_0x31f0c6]){playerGrid[_0x340c('0x51')]('#'+_0x31f0c6)[_0x340c('0x83')]();scrollGridToSelected(playerGrid);_playerSelected(playerGrid,playerGrid[_0x340c('0x51')]({'selected':!![]})['index']());}else{writeUserMessage(i18next['t'](_0x340c('0x84')),0x1,_0x340c('0x85'));}}});window[_0x340c('0x86')]=function(){if(board['isPlaying']()&&!testMode&&board['game'][_0x340c('0x87')]())client[_0x340c('0x88')](_0x340c('0x89'));};window[_0x340c('0x8a')]=function(){if(board[_0x340c('0x8b')]()&&!testMode&&board['game'][_0x340c('0x87')]())client[_0x340c('0x88')](_0x340c('0x8c'));};$(window)['on'](_0x340c('0x8d'),function(_0xdfd9d){if(board['isPlaying']()){writeUserMessage('You\x20are\x20player.',0x2,_0x340c('0x85'));return _0x340c('0x8e');}});$(window)[_0x340c('0x8f')](function(){if(board['isHost']())_giveHostButtonClick();});document['getElementById']('layerBoard')[_0x340c('0x90')]=function(){return![];};$(_0x340c('0x91'))['on'](_0x340c('0x92'),function(_0x235bdc){if(_0x235bdc[_0x340c('0x93')]==0xd){if($(this)[_0x340c('0x72')]()[_0x340c('0x94')]>0x0){client['chat']($(this)[_0x340c('0x72')]());$(this)[_0x340c('0x72')]('');}}});$(_0x340c('0x95'))['on'](_0x340c('0x92'),function(_0x376dc8){if(_0x376dc8['keyCode']==0xd){if($(this)['val']()['length']>0x0){clearGeneralTimeout(_0x340c('0x96'));client[_0x340c('0x88')]($(this)[_0x340c('0x72')]());$(this)[_0x340c('0x72')]('');}}else if(board['isPlayer']()){if(_0x376dc8[_0x340c('0x93')]==0x8){if($(this)[_0x340c('0x72')]()=='')clearGeneralTimeout(_0x340c('0x96'));}else{if($(this)[_0x340c('0x72')]()[_0x340c('0x94')]>0x0)setGeneralTimeout(_0x340c('0x96'),0x9c4);}}});$(_0x340c('0x73'))[_0x340c('0x97')]();window['onmousemove']=function(_0x146086){_0x146086=_0x146086||window[_0x340c('0x98')];mouseX=_0x146086[_0x340c('0x99')];mouseY=_0x146086[_0x340c('0x9a')];};$('#findUser')['on'](_0x340c('0x9b'),function(){$(this)[_0x340c('0x72')]('');});_resize();_loadDefaultOptions();apiClient=new WebSystemApiClient(_0x340c('0x9c'),0x50);apiClient[_0x340c('0x9d')](_0x340c('0x9e'),_handleServers);apiClient[_0x340c('0x9d')](_0x340c('0x9f'),_handleOptions);apiClient[_0x340c('0x9d')](_0x340c('0xa0'),_handlePlayerDetail);apiClient['setCallbackFunctions']('TOURNAMENTS',_handleTournaments);apiClient['setCallbackFunctions'](_0x340c('0xa1'),_handleCheckOpponent);apiClient[_0x340c('0x9d')]('EVALUATION',_handleEvaluation);if(testMode){_testFunction(0x0);}else{_prepareForLogin();}});window[_0x340c('0xa2')]=function(){_resize();};function _resize(){$(_0x340c('0xa3'))['find']('div.menuBar')[_0x340c('0x68')](_0x340c('0xa4'))[_0x340c('0xa5')](_0x340c('0x6a'),window[_0x340c('0xa6')]/9.5);$(_0x340c('0xa7'))[_0x340c('0x68')](_0x340c('0xa8'))[_0x340c('0x68')](_0x340c('0xa4'))[_0x340c('0xa5')](_0x340c('0x6a'),window['innerWidth']/12.5);if(window[_0x340c('0xa6')]>0x60e){$(_0x340c('0xa9'))[_0x340c('0xaa')]($('#playerListBox'))[_0x340c('0xa5')](_0x340c('0xab'),_0x340c('0xac'));}else{$(_0x340c('0xa9'))['insertAfter']($(_0x340c('0xad')))[_0x340c('0xa5')](_0x340c('0xab'),_0x340c('0xae'));}if(window[_0x340c('0xa6')]>=board[_0x340c('0xaf')]()+0x190&&window[_0x340c('0xb0')]<board[_0x340c('0xb1')]()+0xe6){$(_0x340c('0xb2'))[_0x340c('0xb3')]($(_0x340c('0xb4')));$(_0x340c('0xb5'))[_0x340c('0xaa')]($('#kifuBox'));}else{$(_0x340c('0xb5'))[_0x340c('0xb6')]($(_0x340c('0xb7')));$(_0x340c('0xb2'))[_0x340c('0xaa')]($(_0x340c('0xb5')));}$('#playerGridWrapper,\x20#waiterGridWrapper,\x20#gameGridWrapper,\x20#watcherGridWrapper,\x20#kifuGridWrapper')[_0x340c('0xb8')](function(){$(this)[_0x340c('0x68')]('.dataTables_scrollBody')[_0x340c('0xa5')](_0x340c('0xb9'),$(this)[_0x340c('0xb9')]()-$(this)[_0x340c('0x68')]($(_0x340c('0xba')))[_0x340c('0xb9')]());});}function _fadeInLoginView(){$(_0x340c('0xbb'))[_0x340c('0xa5')](_0x340c('0xbc'),0x0)['animate']({'opacity':0x1},testMode?0x0:0xbb8);}function _prepareForLogin(){sp[_0x340c('0xbd')]();$('input[name=loginType],\x20input#usernameInput,\x20input#passwordInput,\x20input#loginSave,\x20input#loginButton')['prop'](_0x340c('0xbe'),!![]);serverGrid[_0x340c('0x32')]()[_0x340c('0xbf')]();$(_0x340c('0xc0'))['text']('');apiClient[_0x340c('0xc1')]();}function _languageSelected(){i18next[_0x340c('0xc2')]($(_0x340c('0x7c'))[_0x340c('0x72')]());localStorage[_0x340c('0x1f')]=$(_0x340c('0x7c'))['val']();}function _updateLanguage(){serverGrid['rows']()[_0x340c('0xc3')]();playerGrid[_0x340c('0xc4')]()[0x0][_0x340c('0xc5')][_0x340c('0xc6')]=i18next['t']('loading');playerGrid[_0x340c('0xbf')]();waiterGrid['settings']()[0x0][_0x340c('0xc5')]['sEmptyTable']=i18next['t'](_0x340c('0xc7'));waiterGrid[_0x340c('0xbf')]();gameGrid[_0x340c('0xc4')]()[0x0]['oLanguage'][_0x340c('0xc6')]=i18next['t'](_0x340c('0xc7'));gameGrid['draw']();watcherGrid[_0x340c('0xc4')]()[0x0]['oLanguage'][_0x340c('0xc6')]=i18next['t'](_0x340c('0xc8'));watcherGrid[_0x340c('0xbf')]();$('span#languageFlag')[_0x340c('0xc9')](countries[$(_0x340c('0xca'))[_0x340c('0x5a')](_0x340c('0xcb'))][_0x340c('0xcc')]());$(_0x340c('0xc0'))[_0x340c('0x9')]('');$(_0x340c('0xcd'))[_0x340c('0xb8')](function(){$(this)['text'](i18next['t']($(this)[_0x340c('0xce')](_0x340c('0xcf'))));});$(_0x340c('0xd0'))[_0x340c('0xb8')](function(){$(this)[_0x340c('0x72')](i18next['t']($(this)[_0x340c('0xce')](_0x340c('0xd1'))));});$('[data-i18n-title]')[_0x340c('0xb8')](function(){$(this)['attr'](_0x340c('0x37'),i18next['t']($(this)[_0x340c('0xce')]('data-i18n-title')));});$(_0x340c('0xd2'))[_0x340c('0xd3')]();let _0x3bea0c=i18next[_0x340c('0x1e')]=='ja'?HANDICAPS_JA:HANDICAPS_EN;Object[_0x340c('0xd4')](_0x3bea0c)[_0x340c('0x7')](function(_0x36d181){if(_0x36d181=='r'||_0x36d181[_0x340c('0x13')](/^va/))return!![];$(_0x340c('0xd2'))[_0x340c('0xd5')]($('<option\x20/>')['val'](_0x36d181)[_0x340c('0x9')](_0x3bea0c[_0x36d181]));});$(_0x340c('0xd6'))['each'](function(){$(this)['dialog'](_0x340c('0xd7'),_0x340c('0x37'),i18next['t']($(this)['attr'](_0x340c('0xd8'))));$(this)[_0x340c('0x79')](_0x340c('0x37'),'');});$('[id^=i18n-]')[_0x340c('0xb8')](function(){$(this)[_0x340c('0xd9')](_0x340c('0xd7'),_0x340c('0xda'),i18next['t']($(this)[_0x340c('0xce')]('id')[_0x340c('0xe')]('-')[0x1]));});$(_0x340c('0x73'))['tooltip']();}function _openingMusicCheckBoxClick(){localStorage[_0x340c('0x7f')]=$(_0x340c('0x7d'))['prop']('checked');sp[_0x340c('0x7e')](!$('#openingMusicCheckBox')[_0x340c('0x79')]('checked'));}function _loginTypeChange(){$(_0x340c('0xdb'))[_0x340c('0xce')](_0x340c('0xbe'),$(_0x340c('0xdc'))[_0x340c('0x72')]()==0x1);}function _loginButtonClick(){$(_0x340c('0x73'))[_0x340c('0x97')]('close');let _0x1ee651=serverGrid[_0x340c('0x51')]({'selected':!![]})[_0x340c('0x5a')]();if(_0x1ee651==null){alert('Please\x20select\x20a\x20server.');return;}if(_bannedLoginInHistory())return;$('#loginButton,\x20#passwordInput,\x20#usernameInput')[_0x340c('0xce')]('disabled',!![]);if(client!=null)client['close']();$(_0x340c('0xdd'))[_0x340c('0x9')](i18next['t'](_0x340c('0xde')));let _0x58c13b=$(_0x340c('0xdc'))[_0x340c('0x72')]()==0x1;client=new WebSocketClient(_0x1ee651[_0x340c('0x2e')],_0x1ee651[_0x340c('0xdf')],_0x1ee651[_0x340c('0xe0')],_0x58c13b?_0x340c('0xe1'):$('#usernameInput')['val'](),_0x58c13b?_0x340c('0xe2'):$(_0x340c('0x75'))[_0x340c('0x72')]());client[_0x340c('0x9d')](_0x340c('0xe3'),_handleLoggedIn);client[_0x340c('0x9d')](_0x340c('0xe4'),_handleLoginFailed);client[_0x340c('0x9d')](_0x340c('0xe5'),_handleLobbyIn);client[_0x340c('0x9d')](_0x340c('0xe6'),_handleLobbyOut);client['setCallbackFunctions'](_0x340c('0xe7'),_handleChat);client[_0x340c('0x9d')](_0x340c('0xe8'),_handleGameChat);client[_0x340c('0x9d')](_0x340c('0xe9'),_handlePrivateChat);client['setCallbackFunctions'](_0x340c('0xea'),_handleMove);client[_0x340c('0x9d')](_0x340c('0xeb'),_handleGameEnd);client[_0x340c('0x9d')](_0x340c('0xec'),_handleGeneralResponse);client[_0x340c('0x9d')]('CLOSED',_handleClosed);client['setCallbackFunctions']('WHO',_handleWho);client[_0x340c('0x9d')](_0x340c('0xed'),_handleList);client[_0x340c('0x9d')](_0x340c('0xee'),_handleWatchers);client['setCallbackFunctions'](_0x340c('0xef'),_handleGame);client['setCallbackFunctions']('CHALLENGE',_handleChallenger);client[_0x340c('0x9d')](_0x340c('0xf0'),_handleAccept);client[_0x340c('0x9d')](_0x340c('0xf1'),_handleDecline);client['setCallbackFunctions'](_0x340c('0xf2'),_handleGameSummary);client[_0x340c('0x9d')](_0x340c('0xf3'),_handleStart);client['setCallbackFunctions'](_0x340c('0xf4'),_handleResult);client[_0x340c('0x9d')]('MONITOR',_handleMonitor);client[_0x340c('0x9d')](_0x340c('0xf5'),_handleReconnect);client[_0x340c('0x9d')](_0x340c('0xf6'),_handleMile);client[_0x340c('0x9d')](_0x340c('0xf7'),_handleExp);client[_0x340c('0x9d')](_0x340c('0xf8'),_handleWins);client[_0x340c('0x9d')](_0x340c('0xf9'),_handleEnter);client[_0x340c('0x9d')](_0x340c('0xfa'),_handleLeave);client[_0x340c('0x9d')](_0x340c('0xfb'),_handleDisconnect);client[_0x340c('0xfc')]();}function _reloginButtonClick(){$('input#reloginButton')[_0x340c('0xa5')](_0x340c('0xfd'),_0x340c('0xfe'));$('img#entrance-img')[_0x340c('0x79')](_0x340c('0xff'),_0x340c('0x100'));_prepareForLogin();_fadeInLoginView();}function _bannedLoginInHistory(){for(let _0x13ed27=0x0;_0x13ed27<_loginHistory['length'];_0x13ed27++){if(infoFetcher['banned']['includes'](_loginHistory[_0x13ed27]))return!![];}return![];}function _logoutButtonClick(){$(_0x340c('0x101'))['prop'](_0x340c('0xff'),_0x340c('0x102'));_backToEntrance();client[_0x340c('0x103')]();}function _refreshButtonClick(){_refreshLobby();$(_0x340c('0x104'))[_0x340c('0x105')](_0x340c('0x106'));setGeneralTimeout(_0x340c('0x107'),0x2710);}function _waitButtonClick(){_disableNewGameOptions(me[_0x340c('0x108')]);$(_0x340c('0x109'))[_0x340c('0x10a')](_0x340c('0xf'));}function _navigateToWebSystem(_0x59da55){window[_0x340c('0xf')](_0x340c('0x10b')+EJ('en','ja')+'/'+_0x59da55,'_blank');}function _playerSelected(_0x5e9ce4,_0xe191cf){let _0x113600=_0x5e9ce4==playerGrid?waiterGrid:playerGrid;let _0x2aaa8b=_0x5e9ce4[_0x340c('0x51')](_0xe191cf)['data']()[_0x340c('0x2e')];_0x113600[_0x340c('0x10c')]()[_0x340c('0x10d')]();_0x113600[_0x340c('0x51')]('#'+_0x2aaa8b)[_0x340c('0x83')]();scrollGridToSelected(_0x113600);gameGrid[_0x340c('0x10c')]()[_0x340c('0x10d')]();let _0x21986e=_findGameByUser(users[_0x2aaa8b]);if(_0x21986e){gameGrid[_0x340c('0x51')]('#'+_0x21986e[_0x340c('0x59')])[_0x340c('0x83')]();scrollGridToSelected(gameGrid);}$(_0x340c('0x80'))[_0x340c('0x72')]('');}function _enterGame(_0x5877f9){if(_0x5877f9[_0x340c('0x10e')]()){let _0x380b66=prompt(i18next['t'](_0x340c('0x10f')));if(_0x380b66!=null&&_0x380b66!=''){_0x5877f9[_0x340c('0x110')](_0x380b66);_enterGame(_0x5877f9);}return;}if(board[_0x340c('0x111')])return;if(_0x5877f9[_0x340c('0x112')]()){writeUserMessage(EJ(_0x340c('0x113'),_0x340c('0x114')),0x1,_0x340c('0x115'));return;}board[_0x340c('0x116')](_0x5877f9);if(!_0x5877f9[_0x340c('0x59')][_0x340c('0x13')](/^STUDY/)&&board['getPlayerRoleFromName'](me[_0x340c('0x2e')])!=null){if(me[_0x340c('0x117')]==0x1){writeUserMessage(i18next['t'](_0x340c('0x118')),0x1,_0x340c('0x119'),!![]);board[_0x340c('0x103')]();}else{client['watchers'](_0x5877f9['gameId']);client[_0x340c('0x11a')](_0x5877f9[_0x340c('0x59')]);}}else{client[_0x340c('0x11b')](_0x5877f9[_0x340c('0x59')]);client[_0x340c('0x11c')](_0x5877f9[_0x340c('0x59')],!![]);}}function _enterGameById(_0x5cebc4){let _0x167a9c=gameGrid[_0x340c('0x51')]('#'+_0x5cebc4);if(_0x167a9c!=null)_enterGame(_0x167a9c[_0x340c('0x5a')]());}function writeUserMessage(_0x542245,_0x236f1c,_0x5511aa=null,_0x57ddfa=![],_0x2114f8=!![]){let _0x5002ad;let _0x37076f;if(_0x236f1c==0x1){_0x5002ad=$(_0x340c('0x11d'));}else if(_0x236f1c==0x2){_0x5002ad=$('#boardMessageArea');_0x37076f=$('p#disconnectTimer,\x20p#typingIndicator-0,\x20p#typingIndicator-1');if(_0x37076f['length'])_0x37076f[_0x340c('0x11e')]();}_0x542245=_0x542245['replace'](/</g,'&lt;');_0x542245=_0x542245[_0x340c('0x11f')](/&lt;sPAn/g,_0x340c('0x120'));_0x542245=_0x542245[_0x340c('0x11f')](/&lt;\/SpaN>/g,_0x340c('0x121'));_0x542245=_0x542245['replace'](/(https?\:\/\/[^\"^\s^\\^\)^\(]+)/g,_0x340c('0x122'));_0x542245=_0x542245[_0x340c('0x11f')](/\n/g,_0x340c('0x123'));$(_0x340c('0x124'),{})[_0x340c('0xa5')]({'color':_0x5511aa?_0x5511aa:'','font-weight':_0x57ddfa?_0x340c('0x125'):''})[_0x340c('0xc9')](_0x542245)[_0x340c('0x126')](_0x5002ad);if(_0x2114f8)_0x5002ad[_0x340c('0xd5')](_0x340c('0x127'));if(_0x37076f&&_0x37076f[_0x340c('0x94')])_0x37076f[_0x340c('0x126')](_0x5002ad);if(_0x5002ad[_0x340c('0x128')]()+_0x5002ad[_0x340c('0xb9')]()>_0x5002ad[0x0][_0x340c('0x129')]-0x50)_0x5002ad[_0x340c('0x12a')]({'scrollTop':_0x5002ad[0x0][_0x340c('0x129')]},'fast');}function _interpretCommunicationCode(_0x180910,_0x36d817,_0x537304,_0xd55517,_0x351b58){writeUserMessage(_0x180910+i18next['t'](_0x340c('0x12b')+_0x36d817),_0x537304,_0x340c('0x119'),_0xd55517);if(_0x351b58)sp['chatBoard']();}function _checkLobbyButtonClick(_0xecf20d=![]){if($(_0x340c('0x12c'))[_0x340c('0xa5')](_0x340c('0x12d'))=='none'){$(_0x340c('0x12e'))[_0x340c('0x105')](_0x340c('0x106'));$(_0x340c('0x12c'))[_0x340c('0xa5')](_0x340c('0x12d'),_0x340c('0xac'))[_0x340c('0x12a')]({'opacity':0x1},_0xecf20d?0x0:0x4b0);$(_0x340c('0xa7'))[_0x340c('0x12a')]({'height':_0x340c('0x12f')},_0xecf20d?0x0:0x4b0,function(){$(_0x340c('0xa7'))[_0x340c('0xa5')](_0x340c('0x130'),_0x340c('0xfe'));$('#checkLobbyButton')[_0x340c('0x131')](_0x340c('0x106'));$(_0x340c('0x12e'))[_0x340c('0xc9')](_0x340c('0x132'));});}else if(!_0xecf20d){$(_0x340c('0x12e'))[_0x340c('0x105')](_0x340c('0x106'));$(_0x340c('0x12c'))[_0x340c('0xa5')](_0x340c('0x12d'),_0x340c('0xfe'))[_0x340c('0x12a')]({'opacity':0x0},0x4b0);$('#layerBoard')[_0x340c('0xa5')](_0x340c('0x130'),_0x340c('0x133'))[_0x340c('0x12a')]({'height':'40px'},0x4b0,function(){_refreshLobby();$('#checkLobbyButton')[_0x340c('0x131')](_0x340c('0x106'));$(_0x340c('0x12e'))[_0x340c('0xc9')](_0x340c('0x134'));});}}function _resignButtonClick(){if(board[_0x340c('0x135')]==0x0&&board[_0x340c('0x136')][_0x340c('0x137')]==!![]||board[_0x340c('0x135')]==0x1&&board[_0x340c('0x136')][_0x340c('0x137')]==![]){client[_0x340c('0x88')](_0x340c('0x138'));client[_0x340c('0x139')]();_greetState=0x3;_greetButtonClick();}}function _rematchButtonClick(){if(board['isPlayer']()){if(!board[_0x340c('0x13a')]()){client['gameChat'](_0x340c('0x13b'));if(_checkGuestGamesExpired())return;}}else{let _0x2e2b4f='';if(board[_0x340c('0x111')][_0x340c('0x59')][_0x340c('0xe')]('+')[0x1][_0x340c('0x13')](/^([0-9a-z]+?)_(.*)$/)){_0x2e2b4f=RegExp['$1']+'_@'+RegExp['$2'];}else return;let _0x4d0a2b=gameGrid[_0x340c('0x10c')](function(_0x525d00,_0x6ab982,_0x3a6b21){return _0x6ab982[_0x340c('0x59')][_0x340c('0xe')]('+')[0x1]==_0x2e2b4f;});if(_0x4d0a2b){client[_0x340c('0x11c')](board[_0x340c('0x111')][_0x340c('0x59')],![]);board[_0x340c('0x103')]();$(_0x340c('0x13c'))['empty']();watcherGrid['clear']()[_0x340c('0xbf')]();board[_0x340c('0x116')](_0x4d0a2b['data']()[0x0]);client[_0x340c('0x11b')](board[_0x340c('0x111')]['gameId']);client[_0x340c('0x11c')](board[_0x340c('0x111')][_0x340c('0x59')],!![]);}else{writeUserMessage(i18next['t'](_0x340c('0x13d')),0x2,_0x340c('0x119'));}}}function _greetButtonClick(){switch(_greetState){case 0x1:client[_0x340c('0x88')](_0x340c('0x13e'));_greetState=0x2;break;case 0x3:client[_0x340c('0x88')](_0x340c('0x13f'));_greetState=0x4;break;case 0x4:$(_0x340c('0x140'))[_0x340c('0x10a')](_0x340c('0xf'));break;}}function _sendChatTemplate(_0x5b8daa){client[_0x340c('0x88')](_0x340c('0x141')+_0x5b8daa);}function _flipButtonClick(){board[_0x340c('0x142')]();}function _impasseButtonClick(){if(board[_0x340c('0x111')][_0x340c('0x112')]())return;$(_0x340c('0x143'))[_0x340c('0x10a')](_0x340c('0xf'));board[_0x340c('0x144')]();}function _clearArrowsButtonClick(){if(board[_0x340c('0x145')]){if(board[_0x340c('0x146')](!![],me[_0x340c('0x2e')])){client['gameChat'](_0x340c('0x147'));}}else{board[_0x340c('0x146')](![]);}}function _giveHostButtonClick(_0x4124c3=null){if(!board[_0x340c('0x148')]())return;if(_0x4124c3==null){if(!board[_0x340c('0x111')][_0x340c('0x149')]()){if(board[_0x340c('0x111')][_0x340c('0x14a')][_0x340c('0x2e')]!=me['name']&&board[_0x340c('0x14b')](0x1)){_0x4124c3=board[_0x340c('0x111')][_0x340c('0x14a')];}else if(board[_0x340c('0x111')][_0x340c('0x14c')][_0x340c('0x2e')]!=me[_0x340c('0x2e')]&&board[_0x340c('0x14b')](0x0)){_0x4124c3=board[_0x340c('0x111')][_0x340c('0x14c')];}}}if(_0x4124c3){client[_0x340c('0x88')](_0x340c('0x14d')+_0x4124c3['name']);board[_0x340c('0x14e')]=0x1;setBoardConditions();}}function _giveSubhostButtonClick(_0xb118c3){if(_0xb118c3[_0x340c('0x2e')]==me['name'])return;client[_0x340c('0x88')](_0x340c('0x14f')+_0xb118c3[_0x340c('0x2e')]);}function _materialBalanceButtonClick(){let _0x4e165a=kifuGrid[_0x340c('0x51')]({'selected':!![]})[_0x340c('0x48')]();if(board[_0x340c('0x111')][_0x340c('0x150')]())writeUserMessage(EJ(_0x340c('0x151'),'駒割計算結果(')+_0x4e165a+EJ(_0x340c('0x152'),'手まで):\u3000')+board['getMaterialBalance'](_0x4e165a<=0x28),0x2,_0x340c('0x119'));else writeUserMessage(EJ(_0x340c('0x153'),_0x340c('0x154')),0x2,'#008800');}function _KyokumenpediaClick(){window['open'](_0x340c('0x155')+board[_0x340c('0x136')][_0x340c('0x156')](),_0x340c('0x157'));}function _sharePositionButtonClick(_0x4245ca){if(!board[_0x340c('0x111')][_0x340c('0x158')]['match'](/^va/))sharePosition(_0x4245ca);else writeUserMessage(EJ(_0x340c('0x159'),_0x340c('0x15a')),0x2,_0x340c('0x85'));}function _kifuCopyButtonClick(){let _0x385d99=$(_0x340c('0x15b'),{'id':_0x340c('0x15c')})[_0x340c('0x9')](_generateKIF())[_0x340c('0x126')]($(_0x340c('0x15d')));$(_0x340c('0x15e'))[_0x340c('0x83')]();document[_0x340c('0x15f')](_0x340c('0x160'));$(_0x340c('0x15e'))[_0x340c('0x161')]();}function _kifuDownloadButtonClick(){let _0x17557b=Date['now']();downloadToFile(_generateKIF(),'81Dojo-'+formatDateToText(new Date())+'-'+board['game']['black'][_0x340c('0x2e')]+'-'+board[_0x340c('0x111')][_0x340c('0x14a')][_0x340c('0x2e')]+_0x340c('0x162'));}function _kifuNoteButtonClick(){if(board[_0x340c('0x111')]['isStudy']()){writeUserMessage(EJ(_0x340c('0x163'),_0x340c('0x164')),0x2,_0x340c('0x85'));return;}let _0x32fba1=window[_0x340c('0xf')](_0x340c('0x165'),_0x340c('0x166'));if(!_0x32fba1)alert(EJ(_0x340c('0x167'),'ウインドウ作成に失敗しました'));}function _shareKifuButtonClick(_0x58df0d){if(board['toKifuURL']()!='')shareKifu(_0x58df0d);else writeUserMessage(EJ(_0x340c('0x168'),'この盤面には棋譜URLの設定がありません'),0x2,_0x340c('0x85'));}function _uploadKifuButtonClick(){if(board['game'][_0x340c('0x149')]()&&board[_0x340c('0x148')]()){let _0x48538e=document[_0x340c('0x169')](_0x340c('0x16a'));_0x48538e[_0x340c('0x16b')]=_0x340c('0x16c');_0x48538e[_0x340c('0xc')]('change',function(_0x17f840){let _0x5d098a=_0x17f840[_0x340c('0x16d')][_0x340c('0x16e')][0x0];let _0x592b83=new FileReader();_0x592b83[_0x340c('0x16f')]=function(_0x279f48){let _0x498273=[];if(_0x5d098a[_0x340c('0x2e')]['match'](/\.bod$/))_0x498273=CSALinesFromBOD(_0x279f48[_0x340c('0x16d')][_0x340c('0x170')]);else if(_0x5d098a[_0x340c('0x2e')][_0x340c('0x13')](/\.kif$/))_0x498273=CSALinesFromKIF(_0x279f48[_0x340c('0x16d')][_0x340c('0x170')]);if(_0x498273[_0x340c('0x94')]>0x0)client[_0x340c('0x171')](_0x498273[_0x340c('0x172')]('/'));};_0x592b83[_0x340c('0x173')](_0x5d098a);},![]);_0x48538e['click']();}}function _optionButtonClick(){$(_0x340c('0x174'))[_0x340c('0x10a')](_0x340c('0xf'));}function _handleOptionClose(){$('#modalOption')[_0x340c('0x10a')](_0x340c('0x103'));_setOptionsFromDialog();_enforceOptions();}function _playerNameDblClick(_0x2e1652){_openPlayerInfo(users[_0x2e1652]);}function _allowWatcherChatClick(){_allowWatcherChat=$('#receiveWatcherChatCheckBox')['is'](_0x340c('0x175'));if(_allowWatcherChat)_sendAutoChat(_0x340c('0x176'));else _sendAutoChat(_0x340c('0x177'));}function _closeBoard(){if(board[_0x340c('0x148')]())_giveHostButtonClick();if(board[_0x340c('0x178')]()){client['closeGame']();_writeAfterCloseBoardMessage();}else if(board['isWatcher']())client[_0x340c('0x11c')](board['game']['gameId'],![]);_checkLobbyButtonClick(!![]);_refreshLobby();_updateHostPlayer(null);board[_0x340c('0x103')]();_switchLayer(0x1);$(_0x340c('0x13c'))[_0x340c('0xd3')]();watcherGrid[_0x340c('0x32')]()['draw']();kifuGrid['clear']()[_0x340c('0xbf')]();_greetState=0x0;_studyBase=null;_studyBranchMoves=null;_opponentDisconnectCount=0x0;forceKifuMode(0x1);_kifuModeRadioChange();}function _writeAfterCloseBoardMessage(){if(_dialogOnBoardClose){_dialogOnBoardClose=![];writeUserMessage(i18next['t'](_0x340c('0x179'))+board[_0x340c('0x17a')](),0x1,_0x340c('0x119'));_askEvaluation(board[_0x340c('0x17b')]()[_0x340c('0x2e')]);if(board[_0x340c('0x111')][_0x340c('0x158')]=='r'){if(!me['provisional']&&isBeforeUpgrade(me['rate']))writeUserMessage(i18next['t']('msg.before_upgrade'),0x1,_0x340c('0x17c'));else if(!me['provisional']&&isBeforeDowngrade(me[_0x340c('0x4b')]))writeUserMessage(i18next['t'](_0x340c('0x17d')),0x1,_0x340c('0x17c'));}}}function sendMoveAsPlayer(_0x32f491){client[_0x340c('0x17e')](_0x32f491);board['moves']['push'](_0x32f491);}function _kifuModeRadioChange(){if($(_0x340c('0x17f'))['prop']('checked')){if(board['onListen']){board[_0x340c('0x145')]=![];$(_0x340c('0x180'))['find'](_0x340c('0x181'))[_0x340c('0x105')](_0x340c('0x182'));if(board[_0x340c('0x183')]())_sendAutoChat(_0x340c('0x184'));board['clearCanvas']();}}else{if(!board[_0x340c('0x145')]){board[_0x340c('0x145')]=!![];$(_0x340c('0x180'))[_0x340c('0x68')]('.dataTables_scrollBody')[_0x340c('0x131')](_0x340c('0x182'));if(board[_0x340c('0x183')]())_sendAutoChat(_0x340c('0x185'));board[_0x340c('0x146')](![]);if(board[_0x340c('0x186')]&&_studyBase!=null)_handleStudy();if(!board[_0x340c('0x186')]){if(kifuGrid['rows']()['count']()>0x0&&kifuGrid[_0x340c('0x51')](_0x340c('0x187'))['data']()[_0x340c('0x188')])_restorePublicKifu();kifuGrid[_0x340c('0x51')](_0x340c('0x187'))[_0x340c('0x83')]();scrollGridToSelected(kifuGrid);board[_0x340c('0x189')](board[_0x340c('0x18a')]);}board[_0x340c('0x18b')](!![],!![]);}}board[_0x340c('0x18c')]();}function forceKifuMode(_0x57610e){if($(_0x340c('0x18d')+_0x57610e+')')[_0x340c('0x79')](_0x340c('0x7a'))==![]){$('input[name=kifuModeRadio]:eq('+_0x57610e+')')[_0x340c('0x79')](_0x340c('0x7a'),!![]);_kifuModeRadioChange();}}function _kifuSelected(_0x11a902){if(kifuGrid[_0x340c('0x51')](_0x340c('0x187'))['data']()[_0x340c('0x188')]&&!kifuGrid['row'](_0x11a902)['data']()[_0x340c('0x188')]){_restorePublicKifu();if(board[_0x340c('0x148')]())_sendAutoChat('#G003');}board[_0x340c('0x189')](kifuGrid[_0x340c('0x10c')](Array[_0x340c('0x18e')](Array(_0x11a902+0x1)[_0x340c('0xd4')]()))[_0x340c('0x5a')]());if(board[_0x340c('0x148')]()){sendStudy(_0x11a902);}else{forceKifuMode(0x0);}}function _replayButtonClick(_0x286ced){let _0x2dcd9a=kifuGrid[_0x340c('0x51')]({'selected':!![]})[_0x340c('0x48')]();if(_0x286ced<0x0&&_0x2dcd9a<=0x0)return;if(_0x286ced>0x0&&_0x2dcd9a>=kifuGrid[_0x340c('0x10c')]()['count']()-0x1){if(!board[_0x340c('0x186')]&&!board[_0x340c('0x145')]){forceKifuMode(0x1);_kifuModeRadioChange();}return;}switch(_0x286ced){case-0x2:_0x2dcd9a=0x0;break;case-0x1:_0x2dcd9a--;break;case 0x1:_0x2dcd9a++;break;case 0x2:_0x2dcd9a=kifuGrid[_0x340c('0x10c')]()[_0x340c('0x18f')]()-0x1;break;}kifuGrid['row'](_0x2dcd9a)[_0x340c('0x83')]();scrollGridToSelected(kifuGrid);_kifuSelected(_0x2dcd9a);}function _restorePublicKifu(){let _0x39a1b3=kifuGrid[_0x340c('0x51')]({'selected':!![]})[_0x340c('0x48')]();if(board['moves'][_0x340c('0x94')]<=0x1)return;kifuGrid[_0x340c('0x32')]();kifuGrid[_0x340c('0x10c')][_0x340c('0x190')](board[_0x340c('0x18a')]);kifuGrid['row'](_0x39a1b3)[_0x340c('0x83')]();drawGridMaintainScroll(kifuGrid);}function _updateHostPlayer(_0x30e1c6){if(!board[_0x340c('0x111')])return;if(_0x30e1c6==hostPlayerName)return;let _0x262de6=hostPlayerName;hostPlayerName=_0x30e1c6;board[_0x340c('0x191')][_0x340c('0x11e')]();if(watcherGrid[_0x340c('0x51')]('#'+_0x262de6)[_0x340c('0x5a')]()){watcherGrid[_0x340c('0x51')]('#'+_0x262de6)[_0x340c('0x5a')](users[_0x262de6][_0x340c('0x192')]());}if(watcherGrid[_0x340c('0x51')]('#'+hostPlayerName)[_0x340c('0x5a')]()){watcherGrid['row']('#'+hostPlayerName)[_0x340c('0x5a')](users[hostPlayerName][_0x340c('0x192')]());}else if(hostPlayerName==board['game'][_0x340c('0x14c')][_0x340c('0x2e')]||hostPlayerName==board[_0x340c('0x111')][_0x340c('0x14a')]['name']){board['playerInfos'][hostPlayerName==board['game']['black'][_0x340c('0x2e')]?0x0:0x1]['find'](_0x340c('0x193'))[_0x340c('0x194')](board[_0x340c('0x191')]);}}function sendTimeout(){client['timeout']();board['pauseAllTimers']();}function setBoardConditions(){if(board[_0x340c('0x178')]()){$(_0x340c('0x195'))['addClass'](_0x340c('0x106'));$(_0x340c('0x196'))[_0x340c('0x79')](_0x340c('0xbe'),![]);if(board['isPostGame']){kifuGrid[_0x340c('0x83')][_0x340c('0x197')](_0x340c('0x2f'));$(_0x340c('0x198'))['find']('button')[_0x340c('0x79')](_0x340c('0xbe'),![]);$(_0x340c('0x199'))[_0x340c('0x79')]('disabled',board['isHost']());$('#resignButton')[_0x340c('0x105')](_0x340c('0x106'));$(_0x340c('0x19a'))[_0x340c('0x131')](_0x340c('0x106'));$(_0x340c('0x19b'))[_0x340c('0x79')]({'disabled':!![],'checked':!![]});}else{kifuGrid[_0x340c('0x83')][_0x340c('0x197')]('api');$(_0x340c('0x198'))[_0x340c('0x68')]('button')[_0x340c('0x79')](_0x340c('0xbe'),!![]);$('input[name=kifuModeRadio]')[_0x340c('0x79')](_0x340c('0xbe'),!![]);$(_0x340c('0x19c'))[_0x340c('0x131')](_0x340c('0x106'));$(_0x340c('0x19a'))[_0x340c('0x105')](_0x340c('0x106'));if(board['game'][_0x340c('0x158')]!='r'){$(_0x340c('0x19b'))['prop']({'disabled':![],'checked':!![]});}else{$(_0x340c('0x19b'))[_0x340c('0x79')]({'disabled':!![],'checked':![]});}}}else if(board[_0x340c('0x19d')]()){kifuGrid[_0x340c('0x83')][_0x340c('0x197')](_0x340c('0x2f'));$(_0x340c('0x198'))['find'](_0x340c('0xd9'))[_0x340c('0x79')](_0x340c('0xbe'),![]);$('input[name=kifuModeRadio]')[_0x340c('0x79')](_0x340c('0xbe'),board['isHost']());$('#greetButton')[_0x340c('0x79')](_0x340c('0xbe'),_0x340c('0x7b'));$('#resignButton,\x20#rematchButton')['addClass'](_0x340c('0x106'));$(_0x340c('0x19e'))[_0x340c('0x131')](_0x340c('0x106'));$(_0x340c('0x19b'))[_0x340c('0x79')]({'disabled':!![],'checked':!![]});}if(board['game'])$(_0x340c('0x19f'))[_0x340c('0x131')](_0x340c('0x106'));else $(_0x340c('0x19f'))[_0x340c('0x105')](_0x340c('0x106'));if(board[_0x340c('0x145')])$(_0x340c('0x1a0'))[_0x340c('0x79')](_0x340c('0x7a'),!![]);else $(_0x340c('0x17f'))[_0x340c('0x79')](_0x340c('0x7a'),!![]);if(board['isHost']())$(_0x340c('0x1a1'))['css'](_0x340c('0xfd'),_0x340c('0xac'));else $(_0x340c('0x1a1'))[_0x340c('0xa5')](_0x340c('0xfd'),_0x340c('0xfe'));if(board[_0x340c('0x148')]()&&board['isPlayer']())$(_0x340c('0x1a2'))[_0x340c('0x131')]('button-disabled');else $(_0x340c('0x1a2'))[_0x340c('0x105')](_0x340c('0x106'));if(board['game']['isStudy']()&&board[_0x340c('0x148')]())$('#uploadKifuButton')[_0x340c('0x131')](_0x340c('0x1a3'));else $(_0x340c('0x1a4'))[_0x340c('0x105')](_0x340c('0x1a3'));if(board[_0x340c('0x186')])$(_0x340c('0x1a5'))[_0x340c('0x131')](_0x340c('0x1a3'));else $(_0x340c('0x1a5'))[_0x340c('0x105')](_0x340c('0x1a3'));_allowWatcherChat=$(_0x340c('0x19b'))['is'](_0x340c('0x175'));_kifuModeRadioChange();}function _handleNewGame(){let _0x359278=$(_0x340c('0x1a6'))['val']();let _0x4bbbf0='';let _0x3ab253=$(_0x340c('0x1a7'))[_0x340c('0xa5')](_0x340c('0xfd'))=='block'?$(_0x340c('0x1a8'))[_0x340c('0x72')]():'';if(_0x359278==0x1){client[_0x340c('0x1a9')]('r',0x384,0x3c);}else if(_0x359278==0x2){client[_0x340c('0x1a9')]('r',0x258,0x1e);}else if(_0x359278==0x3){client[_0x340c('0x1a9')]('r',0x12c,0x1e);}else if(_0x359278==0x4){client[_0x340c('0x1a9')]('r',0x0,0x1e);}else if(_0x359278==0x5){let _0x4afcae=$(_0x340c('0x1aa'))[_0x340c('0x72')]();client[_0x340c('0x1a9')](_0x4afcae,0x3c*$(_0x340c('0x1ab'))[_0x340c('0x72')](),$(_0x340c('0x1ac'))[_0x340c('0x72')](),_0x4afcae['match'](/^hc/)?-0x1:0x0,'',_0x4bbbf0,_0x3ab253);}else if(_0x359278==0x6){let _0x3f7456=$('#newGameTournamentSelect\x20option:selected')['val']();if(tournaments[_0x3f7456])tournaments[_0x3f7456]['wait']();}else if(_0x359278==0x7){client[_0x340c('0x1ad')]();let _0xdc372c=$('#newGameStudyRuleSelect\x20option:selected')[_0x340c('0x72')]();let _0x2d0b31=$(_0x340c('0x1ae'))[_0x340c('0x72')]();let _0xf94d0c=$(_0x340c('0x1af'))[_0x340c('0x72')]();client[_0x340c('0x1b0')](_0xdc372c,_0x2d0b31,_0xf94d0c,_0x3ab253);}else if(_0x359278==0x8){client[_0x340c('0x1ad')]();}$(_0x340c('0x109'))[_0x340c('0x10a')](_0x340c('0x103'));}function _handleAcceptChallenge(){client[_0x340c('0x1b1')]();_gameAccepted=!![];}function _handleRejectChallenge(_0x4011eb,_0x25c98d=null){client[_0x340c('0x1b2')](_0x25c98d);writeUserMessage(EJ('Rejected\x20the\x20challenge\x20from\x20'+_0x4011eb[_0x340c('0x2e')]+'.',_0x4011eb[_0x340c('0x2e')]+_0x340c('0x1b3')),0x1,_0x340c('0x119'),!![]);}function _handleAcceptInvitation(_0x576820){_playerChallengeClick(_0x576820);}function _handleDeclineInvitation(_0x2cf010,_0x432b53=''){client['privateChat'](_0x2cf010[_0x340c('0x2e')],_0x340c('0x1b4')+_0x432b53);writeUserMessage(EJ(_0x340c('0x1b5')+_0x2cf010[_0x340c('0x2e')]+'.',_0x2cf010[_0x340c('0x2e')]+_0x340c('0x1b6')),0x1,_0x340c('0x119'),!![]);}function _openPlayerInfo(_0x4d6d07,_0x1052d8=!![]){let _0x2a6c1b=$(_0x340c('0x1b7')+_0x4d6d07[_0x340c('0x2e')]);if(!_0x2a6c1b[0x0]){_0x2a6c1b=$(_0x340c('0x1b8'),{'id':_0x340c('0x1b9')+_0x4d6d07[_0x340c('0x2e')],'title':_0x4d6d07[_0x340c('0x2e')]+'\x20\x20'+_0x4d6d07[_0x340c('0x1ba')](),'html':_0x340c('0x1bb')+_0x4d6d07[_0x340c('0x2e')]+_0x340c('0x1bc')})['dialog']({'autoOpen':![],'width':_0x340c('0x1bd'),'position':{'at':_0x340c('0x1be')+mouseX+_0x340c('0x1bf')+mouseY},'close':function(_0x151034){if(_0x2a6c1b[_0x340c('0x68')](_0x340c('0x1c0'))[_0x340c('0xc9')]()=='')_0x2a6c1b[_0x340c('0x10a')](_0x340c('0x1c1'))['remove']();},'buttons':[{'text':'','class':'fa\x20fa-graduation-cap\x20font-fa\x20buttons-for-host\x20connected-button-left','title':i18next['t'](_0x340c('0x1c2')),'click':function(){_giveHostButtonClick(_0x4d6d07);}},{'text':'','class':_0x340c('0x1c3'),'title':i18next['t'](_0x340c('0x1c4')),'click':function(){_giveSubhostButtonClick(_0x4d6d07);}},{'text':i18next['t'](_0x340c('0x1c5')),'click':function(){_playerChallengeClick(_0x4d6d07);$(this)[_0x340c('0x10a')]('close');}},{'text':'','class':_0x340c('0x1c6'),'title':i18next['t'](_0x340c('0x1c7')),'click':function(){_playerDetailClick(_0x4d6d07);}},{'text':'','class':_0x340c('0x1c8'),'title':'PM','click':function(){_playerPMClick(this);}}]});if(!board[_0x340c('0x148')]())_0x2a6c1b[_0x340c('0x1c9')](_0x340c('0x1ca'))[_0x340c('0x68')]('.buttons-for-host')[_0x340c('0xa5')](_0x340c('0xfd'),'none');if(_0x4d6d07[_0x340c('0x108')])_0x2a6c1b[_0x340c('0x68')](_0x340c('0x1cb'))[_0x340c('0x79')]('disabled',!![]);_0x2a6c1b[_0x340c('0x68')]('#privateChatInput')['on'](_0x340c('0x92'),function(_0x3ebb30){if(_0x3ebb30[_0x340c('0x93')]==0xd){if($(this)[_0x340c('0x72')]()[_0x340c('0x94')]>0x0){if(board[_0x340c('0x8b')]()){showAlertDialog(_0x340c('0x1cc'));}else{client['privateChat'](_0x4d6d07['name'],$(this)[_0x340c('0x72')]());let _0x3c609b=_0x2a6c1b[_0x340c('0x68')](_0x340c('0x1c0'));$(_0x340c('0x124'),{})[_0x340c('0xa5')](_0x340c('0x1cd'),_0x340c('0x1ce'))[_0x340c('0x9')]($(this)[_0x340c('0x72')]())[_0x340c('0x126')](_0x3c609b);_0x3c609b['append'](_0x340c('0x127'));_0x3c609b[_0x340c('0x12a')]({'scrollTop':_0x3c609b[0x0][_0x340c('0x129')]},_0x340c('0x6f'));}$(this)[_0x340c('0x72')]('');}}});}if(_0x1052d8){_0x2a6c1b['dialog'](_0x340c('0xf'));if(!_0x4d6d07[_0x340c('0x108')])apiClient[_0x340c('0x1cf')](_0x4d6d07);if(_0x4d6d07[_0x340c('0x1d0')]())apiClient[_0x340c('0x1d1')](_0x4d6d07[_0x340c('0x1d2')],_0x4d6d07[_0x340c('0x2e')]);if(getPremium()>=0x1)apiClient[_0x340c('0x1d3')](_0x4d6d07[_0x340c('0x2e')]);}_0x2a6c1b[_0x340c('0x68')](_0x340c('0x1d4'))['attr'](_0x340c('0xff'),_0x4d6d07[_0x340c('0x1d5')]());_0x2a6c1b[_0x340c('0x68')]('p#p1')[_0x340c('0xc9')](_0x4d6d07[_0x340c('0x3c')][_0x340c('0x1d6')]()+'\x20'+_0x4d6d07[_0x340c('0x3c')][_0x340c('0x1d7')]());_0x2a6c1b['find'](_0x340c('0x1d8'))[_0x340c('0xc9')](_0x340c('0x1d9')+_0x4d6d07[_0x340c('0x4b')]+'\x20('+makeRankFromRating(_0x4d6d07['rate'])+')\x20'+_0x4d6d07[_0x340c('0x1da')]()+_0x340c('0x1db')+_0x4d6d07['name']+_0x340c('0x1dc'));return _0x2a6c1b;}function _playerChallengeClick(_0x2d5dc2){if(_0x2d5dc2==me)return;if(board[_0x340c('0x178')]()){writeUserMessage(i18next(_0x340c('0x1dd')),0x1,_0x340c('0x119'));}else if(_challengeUser){writeUserMessage(i18next(_0x340c('0x1de')),0x1,'#008800');}else if(_0x2d5dc2[_0x340c('0x1df')]()){if(_0x2d5dc2[_0x340c('0x1d2')]&&!_0x2d5dc2['waitingChallengeableTournament']()){writeUserMessage(EJ('You\x20are\x20not\x20registered\x20to\x20this\x20tournament.',_0x340c('0x1e0')),0x1,_0x340c('0x115'));}else if(_0x2d5dc2[_0x340c('0x1d2')]&&!tournaments[_0x2d5dc2[_0x340c('0x1d2')]][_0x340c('0x1e1')]()){writeUserMessage(EJ(_0x340c('0x1e2'),_0x340c('0x1e3')),0x1,_0x340c('0x115'));}else if(_0x2d5dc2[_0x340c('0x4b')]>=RANK_THRESHOLDS[0x2]&&me[_0x340c('0x1e4')]&&_0x2d5dc2[_0x340c('0x1e5')][_0x340c('0x13')](/^r_/)){writeUserMessage(i18next['t']('msg.no_challenge_6dan'),0x1,_0x340c('0x119'));}else if(_checkGuestGamesExpired()){}else if(_0x2d5dc2[_0x340c('0x1e5')][_0x340c('0x13')](/_automatch\-/)){client[_0x340c('0x1e6')](_0x2d5dc2);}else if(_0x2d5dc2[_0x340c('0x1e5')][_0x340c('0x13')](/^va/)){writeUserMessage(EJ(_0x340c('0x1e7'),_0x340c('0x1e8')),0x1,'#ff0000');}else if(me[_0x340c('0x108')]&&_0x2d5dc2[_0x340c('0x1e5')][_0x340c('0x13')](/^r_/)){writeUserMessage(i18next['t'](_0x340c('0x1e9')),0x1,'#ff0000');}else{_challengeUser=_0x2d5dc2;writeUserMessage(EJ(_0x340c('0x1ea')+_challengeUser[_0x340c('0x2e')]+_0x340c('0x1eb'),_challengeUser[_0x340c('0x2e')]+'さんに挑戦中.....\x20(待ち時間\x20最大で20秒)'),0x1,_0x340c('0x119'),!![]);client[_0x340c('0x1ec')](_challengeUser);setGeneralTimeout(_0x340c('0x1ed'),0x6d60);}}else if(me['isGuest']||_0x2d5dc2[_0x340c('0x1ee')]){writeUserMessage(EJ(_0x340c('0x1ef'),_0x340c('0x1f0')),0x1,_0x340c('0x119'));}else if(!me['listAsWaiter']()){writeUserMessage(EJ('The\x20opponent\x20is\x20not\x20waiting\x20with\x20own\x20game\x20rule.\x20You\x20can\x20invite\x20him\x20if\x20you\x20wait\x20with\x20your\x20own\x20game\x20rule.',_0x340c('0x1f1')),0x1,_0x340c('0x119'));}else if(_0x2d5dc2[_0x340c('0x1f2')]){writeUserMessage(_0x2d5dc2[_0x340c('0x2e')]+EJ(_0x340c('0x1f3'),_0x340c('0x1f4')),0x1,_0x340c('0x119'),!![]);}else if(_0x2d5dc2[_0x340c('0x1f5')]()){writeUserMessage(_0x2d5dc2[_0x340c('0x2e')]+EJ(_0x340c('0x1f6'),'さんは対局中です。'),0x1,_0x340c('0x119'),!![]);}else{me[_0x340c('0x1e5')][_0x340c('0x13')](/^([0-9a-z]+?)_(.*)-([0-9]*)-([0-9]*)/);client[_0x340c('0x1f7')](_0x2d5dc2[_0x340c('0x2e')],_0x340c('0x1f8')+RegExp['$3']+','+RegExp['$4']+','+RegExp['$1']);writeUserMessage(EJ(_0x340c('0x1f9'),_0x340c('0x1fa')+_0x2d5dc2['name']+_0x340c('0x1fb')),0x1,'#008800');}}function _playerDetailClick(_0x5b9db3){if(_0x5b9db3[_0x340c('0x108')])return;window[_0x340c('0xf')](_0x340c('0x10b')+EJ('en','ja')+_0x340c('0x1fc')+_0x5b9db3[_0x340c('0x2e')]);}function _playerPMClick(_0xb8de11,_0x575a69=![]){if(_0x575a69||$(_0xb8de11)[_0x340c('0x68')]('div#player-info-layer-1')[_0x340c('0xa5')](_0x340c('0xbc'))==0x1){$(_0xb8de11)[_0x340c('0x68')](_0x340c('0x1fd'))[_0x340c('0xa5')](_0x340c('0xbc'),0x0);$(_0xb8de11)['find'](_0x340c('0x1fe'))[_0x340c('0xa5')]('opacity',0x1);}else{$(_0xb8de11)[_0x340c('0x68')](_0x340c('0x1fd'))['css'](_0x340c('0xbc'),0x1);$(_0xb8de11)['find'](_0x340c('0x1fe'))[_0x340c('0xa5')](_0x340c('0xbc'),0x0);}}function _handleImpasseDeclare(){$(_0x340c('0x143'))['dialog'](_0x340c('0x103'));client['kachi']();}function sendGrab(_0x35f14e,_0x4ebcd3){client['gameChat'](_0x340c('0x1ff')+_0x35f14e+','+_0x4ebcd3);}function _handleGeneralResponse(_0x53ad8d){console['log'](_0x340c('0x200')+_0x53ad8d);}function _handleLoggedIn(_0x315f5b){sp[_0x340c('0x201')]();$(_0x340c('0xdd'))[_0x340c('0x9')](i18next['t'](_0x340c('0x202')));if($(_0x340c('0xdc'))[_0x340c('0x72')]()==0x0&&$(_0x340c('0x78'))['prop'](_0x340c('0x7a'))){localStorage[_0x340c('0x70')]=$(_0x340c('0x71'))[_0x340c('0x72')]();localStorage[_0x340c('0x74')]=caesar(caesar($(_0x340c('0x75'))[_0x340c('0x72')](),0x3),0x51);localStorage[_0x340c('0x77')]=$('#loginSave')[_0x340c('0x79')](_0x340c('0x7a'));}$(_0x340c('0x203'))[_0x340c('0x12a')]({'opacity':0x0},testMode?0x0:0x3e8,function(){_switchLayer(0x1);_refreshLobby(!![]);$(_0x340c('0x203'))['css'](_0x340c('0xbc'),0x1);if(testMode)_testFunction(0x2);});$(_0x340c('0x204'))[_0x340c('0x79')]('src',_0x340c('0x205')+client[_0x340c('0x206')]+_0x340c('0x207'));$(_0x340c('0x208'))[_0x340c('0x9')](client[_0x340c('0x206')]+_0x340c('0x209'));let _0x52a014=_0x315f5b[_0x340c('0xe')](':');client[_0x340c('0x20a')]=_0x52a014[0x0];users[client[_0x340c('0x20a')]]=new User(client['username']);me=users[client[_0x340c('0x20a')]];me[_0x340c('0x20b')](_0x52a014);mileage=parseInt(_0x52a014[0xc]);premium=makePremiumNum(parseInt(_0x52a014[0xd]),_0x52a014[0xe]);hidden_prm=premium;_enforcePremium();if(_loginHistory[_0x340c('0x20c')](client[_0x340c('0x20a')])>=0x0)_loginHistory[_0x340c('0x20d')](_loginHistory['indexOf'](client['username']),0x1);_loginHistory[_0x340c('0x17')](client[_0x340c('0x20a')]);localStorage[_0x340c('0x76')]=caesar(caesar(_loginHistory[_0x340c('0x172')](','),0x3),0x51);apiClient['getOptions']();apiClient[_0x340c('0x20e')]();_updateLobbyHeader();_writeWelcomeMessage();_hourMileCount=0x0;setGeneralTimeout(_0x340c('0x20f'),0x36ee80);_refreshWorldClocks();$(_0x340c('0x210'))[_0x340c('0xa5')](_0x340c('0xfd'),i18next[_0x340c('0x1e')]=='ja'?_0x340c('0x211'):'none');}function _writeWelcomeMessage(){writeUserMessage(i18next['t'](_0x340c('0x212')),0x1,_0x340c('0x119'));if(getPremium())writeUserMessage(EJ(_0x340c('0x213')+makePremiumName(getPremium())+_0x340c('0x214'),makePremiumName(getPremium())+_0x340c('0x215')+me[_0x340c('0x2e')]+'様、いつもご利用有難うございます。＜(_\x20_)＞'),0x1,_0x340c('0x216'),!![]);}function _updateLobbyHeader(){$(_0x340c('0x217'))['text'](me[_0x340c('0x2e')]+_0x340c('0x209'));$('#header-rate')[_0x340c('0x9')]('R'+me[_0x340c('0x4b')]+_0x340c('0x209'));$(_0x340c('0x218'))[_0x340c('0x9')](mileage+EJ(_0x340c('0x219'),_0x340c('0x21a')));$(_0x340c('0x21b'))['text'](makePremiumName(premium)+EJ(_0x340c('0x21c'),_0x340c('0x21d')));}function _handleLoginFailed(_0x4214e3){$(_0x340c('0xdd'))['text'](i18next['t'](_0x340c('0x12b')+_0x4214e3));$(_0x340c('0x21e'))[_0x340c('0xce')](_0x340c('0xbe'),![]);}function _handleWho(_0x39d9e2){let _0x57f148=_0x39d9e2[_0x340c('0x18')]()[_0x340c('0xe')]('\x0a');_0x57f148['forEach'](function(_0x24f039){let _0x344a69=_0x24f039[_0x340c('0xe')](',');let _0x2f0b42=_0x344a69[_0x340c('0x21f')]();if(users[_0x2f0b42]==null)users[_0x2f0b42]=new User(_0x2f0b42);users[_0x2f0b42]['setFromWho'](_0x344a69);});playerGrid[_0x340c('0x32')]();waiterGrid[_0x340c('0x32')]();Object[_0x340c('0xd4')](users)[_0x340c('0x7')](function(_0x3ea2c4){playerGrid[_0x340c('0x51')][_0x340c('0x190')](users[_0x3ea2c4][_0x340c('0x192')]());if(users[_0x3ea2c4]['listAsWaiter']())waiterGrid['row'][_0x340c('0x190')](users[_0x3ea2c4]['gridObject']());});playerGrid['draw']();playerGrid[_0x340c('0x51')]('#'+me[_0x340c('0x2e')])[_0x340c('0x83')]();scrollGridToSelected(playerGrid);drawGridMaintainScroll(waiterGrid);_playerSelected(playerGrid,playerGrid[_0x340c('0x51')]({'selected':!![]})[_0x340c('0x48')]());$('#findUser')[_0x340c('0x81')](_0x340c('0xd7'),_0x340c('0x220'),Object[_0x340c('0xd4')](users));}function _handleList(_0x24e4dd){let _0x29c5ff=0x0;let _0xf9a119=_0x24e4dd[_0x340c('0x18')]()['split']('\x0a');gameGrid[_0x340c('0x32')]();let _0x576f83=[];let _0x460de1=null;_0xf9a119['forEach'](function(_0x22dfe4){if(_0x22dfe4=='')return;_0x29c5ff+=0x1;let _0x546a51=_0x22dfe4[_0x340c('0xe')]('\x20');let _0xc85df9=users[_0x546a51[0x0][_0x340c('0xe')]('+')[0x2]];if(!_0xc85df9){_0xc85df9=new User(_0x546a51[0x0][_0x340c('0xe')]('+')[0x2]);if(_0x546a51[0x0][_0x340c('0x13')](/^STUDY\+/))_0xc85df9[_0x340c('0x221')](!![]);else _0xc85df9[_0x340c('0x222')](_0x546a51[0x2],parseInt(_0x546a51[0x4]));}let _0xccdd8f=users[_0x546a51[0x0]['split']('+')[0x3]];if(!_0xccdd8f){_0xccdd8f=new User(_0x546a51[0x0][_0x340c('0xe')]('+')[0x3]);if(_0x546a51[0x0][_0x340c('0x13')](/^STUDY\+/))_0xccdd8f[_0x340c('0x221')](![]);else _0xccdd8f[_0x340c('0x222')](_0x546a51[0x3],parseInt(_0x546a51[0x5]));}let _0x5b855c=new Game(_0x29c5ff,_0x546a51[0x0],_0xc85df9,_0xccdd8f);_0x5b855c[_0x340c('0x222')](parseInt(_0x546a51[0x1]),_0x546a51[0x6],_0x546a51[0x7]==_0x340c('0x7b'),_0x546a51[0x8]=='true',parseInt(_0x546a51[0x9]),_0x546a51[0xa]);if(_0x5b855c['isMyDisconnectedGame']())_0x460de1=_0x5b855c;_0x576f83[_0x340c('0x17')](_0x5b855c);});gameGrid[_0x340c('0x10c')][_0x340c('0x190')](_0x576f83);gameGrid[_0x340c('0xbf')]();if(_0x460de1)_enterGame(_0x460de1);}function _handleWatchers(_0x50d896){let _0x46750c=_0x50d896['trim']()['split']('\x0a');watcherGrid[_0x340c('0x32')]();_0x46750c[_0x340c('0x7')](function(_0x4d701c){if(users[_0x4d701c])watcherGrid[_0x340c('0x51')]['add'](users[_0x4d701c][_0x340c('0x192')]());});watcherGrid[_0x340c('0xbf')]();}function _handleLobbyIn(_0x122c32){let _0x3449a8=_0x122c32[_0x340c('0xe')](',');let _0x323bd7='';let _0x366aad=_0x3449a8[0x0];if(_0x3449a8[0x2]=='true'&&parseInt(_0x3449a8[0x1])<RANK_THRESHOLDS[0x0]){_0x323bd7=EJ(_0x340c('0x223'),_0x340c('0x224'));}else{_0x323bd7=EJ('A\x20','')+makeRankFromRating(parseInt(_0x3449a8[0x1]));}let _0x2b8347=_0x3449a8[0xc]!=null&&_0x3449a8[0xc][_0x340c('0x13')](/81AR/);if(_isFavorite(_0x366aad)||_isColleague(_0x366aad)||parseInt(_0x3449a8[0x1])>=RANK_THRESHOLDS[0x3]||parseInt(_0x3449a8[0x6])>=0x7||users[_0x340c('0x94')]<0x28&&_0x366aad!=me[_0x340c('0x2e')]){writeUserMessage(_0x340c('0x225')+_name2link(_0x366aad)+EJ(_0x340c('0x226')+(_0x2b8347?_0x340c('0x227'):'')+'.\x20'+_0x323bd7+_0x340c('0x228')+countries[parseInt(_0x3449a8[0x3])][_0x340c('0x229')]+'.'+(parseInt(_0x3449a8[0x6])>=0x3?_0x340c('0x22a')+_0x3449a8[0x6]+_0x340c('0x22b'):''),'\x20さんが'+(_0x2b8347?_0x340c('0x22c'):'')+_0x340c('0x22d')+countries[parseInt(_0x3449a8[0x3])]['name_ja']+',\x20'+_0x323bd7+')'+(parseInt(_0x3449a8[0x6])>=0x3?_0x340c('0x22e')+_0x3449a8[0x6]+_0x340c('0x22f'):'')),0x1,_0x340c('0x119'),_isFavorite(_0x366aad)||_isColleague(_0x366aad));}if(_0x366aad==me[_0x340c('0x2e')])return;if(!users[_0x366aad]){users[_0x366aad]=new User(_0x366aad);$(_0x340c('0x80'))[_0x340c('0x81')](_0x340c('0xd7'),_0x340c('0x220'),Object[_0x340c('0xd4')](users));}else{}users[_0x366aad][_0x340c('0x230')](parseInt(_0x3449a8[0x1]),_0x3449a8[0x2],parseInt(_0x3449a8[0x3]),_0x3449a8[0xc]);playerGrid['row']['add'](users[_0x366aad][_0x340c('0x192')]());drawGridMaintainScroll(playerGrid);}function _handleLobbyOut(_0x2423af){if(currentLayer==0x1){if(_isFavorite(_0x2423af)||_isColleague(_0x2423af)){writeUserMessage(_0x340c('0x225')+_0x2423af+i18next['t'](_0x340c('0x231')),0x1,_0x340c('0x119'));}}playerGrid[_0x340c('0x51')]('#'+_0x2423af)[_0x340c('0x161')]();waiterGrid[_0x340c('0x51')]('#'+_0x2423af)[_0x340c('0x161')]();drawGridMaintainScroll(playerGrid);drawGridMaintainScroll(waiterGrid);delete users[_0x2423af];}function _handleGame(_0x38e264){let _0x9297b3='';if(_0x38e264[_0x340c('0x13')](/^\[(.+)\]$/)){_0x9297b3=RegExp['$1'];if(users[_0x9297b3]){users[_0x9297b3][_0x340c('0x232')]('*','*','');if(playerInfoWindows[_0x9297b3])playerInfoWindows[_0x9297b3][_0x340c('0x233')]();}waiterGrid[_0x340c('0x51')]('#'+_0x9297b3)[_0x340c('0x161')]();drawGridMaintainScroll(waiterGrid);}else{let _0x3cb458=_0x38e264[_0x340c('0x13')](/^([0-9a-z]+?)_(.*)-([0-9]*)-([0-9]*),/);if(_0x3cb458[0x2][_0x340c('0x13')](/^@/))return;if(_0x3cb458[0x2][_0x340c('0x13')](/\-\-/)){_0x9297b3=_0x3cb458[0x2]['split']('--')[0x0];}else{_0x9297b3=_0x3cb458[0x2][_0x340c('0xe')]('.')[0x0];}_0x3cb458=_0x38e264[_0x340c('0x13')](/(.+),(\+|\-|\*),(.+)$/);if(!users[_0x9297b3])return;users[_0x9297b3][_0x340c('0x232')](_0x3cb458[0x1],_0x3cb458[0x2],_0x3cb458[0x3]=='*'?'':_0x3cb458[0x3]);waiterGrid[_0x340c('0x51')]('#'+_0x9297b3)[_0x340c('0x161')]();waiterGrid[_0x340c('0x51')]['add'](users[_0x9297b3][_0x340c('0x192')]());drawGridMaintainScroll(waiterGrid);}playerGrid['row']('#'+_0x9297b3)[_0x340c('0x5a')](users[_0x9297b3][_0x340c('0x192')]());drawGridMaintainScroll(playerGrid);}function _handleChallenger(_0x2d6a4b){sp[_0x340c('0x234')](_0x340c('0x235'));$(_0x340c('0x236'))[_0x340c('0x10a')]('open');_initModalChallenger(users[_0x2d6a4b]);if(me[_0x340c('0x1d2')])apiClient[_0x340c('0x1d1')](me['waitingTournamentId'],_0x2d6a4b);}function _handleAccept(_0x9a0039){clearGeneralTimeout[_0x340c('0x1ed')];_gameAccepted=!![];_interpretCommunicationCode('',_0x340c('0x237'),0x1,!![],![]);if(_challengeUser)client[_0x340c('0x1e6')](_challengeUser);}function _handleDecline(_0x4cb15){clearGeneralTimeout[_0x340c('0x1ed')];if(_0x4cb15[_0x340c('0x13')](/^([A-Z]\d{3})/)){_interpretCommunicationCode('',RegExp['$1'],0x1,!![],![]);}else{writeUserMessage(_0x4cb15,0x1,_0x340c('0x119'),!![]);}_challengeUser=null;_gameAccepted=![];$(_0x340c('0x236'))[_0x340c('0x10a')](_0x340c('0x103'));}function _handleGameSummary(_0x34e068){_gameAccepted=![];let _0x5443de;let _0x269ecf;let _0x7de2ff;let _0xb70931='';let _0x161c0b;let _0x28ee16;_0x34e068[_0x340c('0xe')]('\x0a')[_0x340c('0x7')](function(_0x1c1de0){if(_0x1c1de0[_0x340c('0x13')](/^Name\+\:(.+)$/)){_0x5443de=users[RegExp['$1']];}else if(_0x1c1de0[_0x340c('0x13')](/^Name\-\:(.+)$/)){_0x269ecf=users[RegExp['$1']];}else if(_0x1c1de0[_0x340c('0x13')](/^Your_Turn\:(.)$/)){_0x7de2ff=RegExp['$1']=='+';}else if(_0x1c1de0[_0x340c('0x13')](/^To_Move\:(.)$/)){_0xb70931='P0'+RegExp['$1']+'\x0a';}else if(_0x1c1de0[_0x340c('0x13')](/^P[0-9\+\-]/)){_0xb70931+=_0x1c1de0+'\x0a';}else if(_0x1c1de0[_0x340c('0x13')](/^START:(.+):(\d+)$/)){_0x161c0b=RegExp['$1'];_0x28ee16=RegExp['$2'];}});_challengeUser=null;if(board[_0x340c('0x111')])_closeBoard();board[_0x340c('0x116')](new Game(0x0,_0x161c0b,_0x5443de,_0x269ecf));board['startGame'](_0xb70931,_0x7de2ff?0x0:0x1);board[_0x340c('0x238')](_0x28ee16);_dialogOnBoardClose=![];$('#kifuGridWrapper')['find'](_0x340c('0x181'))[_0x340c('0x131')](_0x340c('0x182'));setBoardConditions();_switchLayer(0x2);sp['gameStart']();_greetState=0x1;_writeGameStartMessage();}function _writeGameStartMessage(){writeUserMessage(i18next['t'](_0x340c('0x239'))+'\x0a',0x2,_0x340c('0x23a'));if(board[_0x340c('0x135')]==0x0)writeUserMessage(EJ(_0x340c('0x23b')+(board[_0x340c('0x111')][_0x340c('0x23c')]()?'(Handicap\x20taker).':_0x340c('0x23d')),_0x340c('0x23e')+(board[_0x340c('0x111')]['isHandicap']()?_0x340c('0x23f'):_0x340c('0x240'))+_0x340c('0x241')),0x2,_0x340c('0x119'),!![]);else writeUserMessage(EJ(_0x340c('0x242')+(board[_0x340c('0x111')]['isHandicap']()?'(Handicap\x20giver).':_0x340c('0x243')),_0x340c('0x23e')+(board[_0x340c('0x111')][_0x340c('0x23c')]()?_0x340c('0x244'):'は後手')+_0x340c('0x241')),0x2,_0x340c('0x119'),!![]);if(board[_0x340c('0x111')][_0x340c('0x158')]!='r')writeUserMessage(i18next['t'](_0x340c('0x245')),0x2,_0x340c('0x119'));let _0x327b76=board[_0x340c('0x17b')]();if(board[_0x340c('0x111')][_0x340c('0x158')]=='r'&&!me[_0x340c('0x1e4')]){if(isBeforeUpgrade(me[_0x340c('0x4b')])&&!_0x327b76['provisional']&&_0x327b76[_0x340c('0x4b')]>me['rate']-0xc8)_sendAutoChat(_0x340c('0x246'));else if(isBeforeDowngrade(me['rate'])&!_0x327b76[_0x340c('0x1e4')]&&_0x327b76[_0x340c('0x4b')]<me[_0x340c('0x4b')]+0xc8)_sendAutoChat(_0x340c('0x247'));}client[_0x340c('0x1f7')](board[_0x340c('0x17b')]()[_0x340c('0x2e')],_0x340c('0x248')+options[_0x340c('0x249')]+','+options[_0x340c('0x24a')]);}function _handleMove(_0x481a5d,_0x169664){board[_0x340c('0x146')](!![]);if(board[_0x340c('0x8b')]()){let _0x5375b7=_0x481a5d[_0x340c('0x24b')](0x0,0x1)=='+';board['getPlayersTimer'](_0x5375b7)[_0x340c('0x24c')](_0x169664);if(_0x5375b7&&board[_0x340c('0x135')]==0x0||!_0x5375b7&&board[_0x340c('0x135')]==0x1){board[_0x340c('0x18a')][board['moves']['length']-0x1][_0x340c('0x24d')](_0x169664,board);board[_0x340c('0x24e')](board[_0x340c('0x18a')][board[_0x340c('0x18a')]['length']-0x1]);}else{let _0x410df5=new Movement(board['getFinalMove']());_0x410df5[_0x340c('0x24f')](_0x481a5d);_0x410df5[_0x340c('0x24d')](_0x169664,board);board[_0x340c('0x250')](_0x410df5);board[_0x340c('0x251')]();}board[_0x340c('0x252')][_0x340c('0x253')]();}}function _handleGameEnd(_0x455609,_0x23e6cc=![]){board[_0x340c('0x254')]();_checkLobbyButtonClick(!![]);let _0x50f667=_0x455609[_0x340c('0xe')]('\x0a')[0x0];board[_0x340c('0x111')][_0x340c('0x255')]=_0x50f667;let _0x43d649=_0x455609[_0x340c('0xe')]('\x0a')[0x1];clearInterval(_disconnectTimer);$(_0x340c('0x256'))[_0x340c('0x161')]();board[_0x340c('0x186')]=!![];let _0x1db9f6=new Movement(board[_0x340c('0x257')]());_0x1db9f6[_0x340c('0x258')](_0x50f667);board[_0x340c('0x259')]=moment();if(_0x50f667!='SUSPEND'){board[_0x340c('0x18a')][_0x340c('0x17')](_0x1db9f6);if(!kifuGrid['row'](':last')[_0x340c('0x5a')]()[_0x340c('0x188')])board[_0x340c('0x24e')](_0x1db9f6);}if(_0x50f667==_0x340c('0x25a')&&board[_0x340c('0x178')]()&&!_0x23e6cc)sp[_0x340c('0x25b')]();writeUserMessage(_0x1db9f6['toGameEndMessage'](),0x2,_0x340c('0x25c'));switch(_0x43d649){case'LOSE':board[_0x340c('0x25d')](0x1-board[_0x340c('0x135')]);board[_0x340c('0x14e')]=0x2;writeUserMessage(EJ(_0x340c('0x25e'),_0x340c('0x25f')),0x2,_0x340c('0x25c'),!![]);sp[_0x340c('0x260')](![]);openResult(-0x1);break;case _0x340c('0x261'):board[_0x340c('0x25d')](board[_0x340c('0x135')]);board[_0x340c('0x14e')]=0x1;writeUserMessage(EJ(_0x340c('0x262'),_0x340c('0x263')),0x2,_0x340c('0x25c'),!![]);sp['gameEnd'](!![]);openResult(0x1);break;case _0x340c('0x264'):board[_0x340c('0x25d')](-0x1);if(board[_0x340c('0x135')]==0x1)board[_0x340c('0x14e')]=0x1;else if(board[_0x340c('0x135')]==0x0)board[_0x340c('0x14e')]=0x2;writeUserMessage(EJ(_0x340c('0x265'),_0x340c('0x266')),0x2,_0x340c('0x25c'),!![]);sp['gameEnd'](!![]);if(board[_0x340c('0x178')]()&&!_0x23e6cc)openResult(0x0);break;case _0x340c('0x267'):board[_0x340c('0x25d')](0x0);writeUserMessage(EJ(_0x340c('0x268'),'###\x20先手(または下手)の勝ち\x20###\x0a'),0x2,_0x340c('0x25c'),!![]);sp[_0x340c('0x260')](!![]);break;case _0x340c('0x269'):board[_0x340c('0x25d')](0x1);writeUserMessage(EJ('###\x20Gote\x20(or\x20Uwate)\x20Wins\x20###\x0a',_0x340c('0x26a')),0x2,'#DD0088',!![]);sp[_0x340c('0x260')](!![]);break;}if(board[_0x340c('0x178')]()&&board[_0x340c('0x111')][_0x340c('0x158')][_0x340c('0x13')](/^hc/)){if(board[_0x340c('0x135')]==0x0)board[_0x340c('0x14e')]=0x1;else board[_0x340c('0x14e')]=0x2;}if(_0x23e6cc)board[_0x340c('0x14e')]=0x1;else{if(board[_0x340c('0x148')]()){writeUserMessage(i18next['t'](_0x340c('0x26b')),0x2,_0x340c('0x119'),!![]);sendStudy();}else if(board[_0x340c('0x183')]())writeUserMessage(i18next['t'](_0x340c('0x26c')),0x2,_0x340c('0x119'),!![]);}if(board[_0x340c('0x178')]()){if(!_0x23e6cc){_dialogOnBoardClose=!![];if(board[_0x340c('0x111')][_0x340c('0x158')]=='r')client['mileage'](0xa,config[_0x340c('0x26d')]);else client['mileage'](0x5,config['mileagePass']);let _0x332aa3=board[_0x340c('0x111')][_0x340c('0x26e')]();if(_0x332aa3){writeUserMessage(EJ(_0x340c('0x26f'),_0x340c('0x270'))+_0x332aa3['url'](),0x2,_0x340c('0x17c'));}if(me['isGuest'])_countGuestGame();}}board[_0x340c('0x271')](0x0,'name-mouse-out',![]);board['playerNameClassChange'](0x1,_0x340c('0x272'),![]);setBoardConditions();board[_0x340c('0x251')]();if(_greetState<=0x2)_greetState=_0x23e6cc?0x4:0x3;}function _handleResult(_0x7e280f){let _0x2f8968=_0x7e280f[_0x340c('0xe')](',');loadResult(_0x2f8968[0x0],_0x2f8968[0x1],_0x2f8968[0x2],_0x2f8968[0x3]);me[_0x340c('0x4b')]=parseInt(_0x2f8968[0x1]);users[board[_0x340c('0x17b')]()[_0x340c('0x2e')]][_0x340c('0x4b')]=parseInt(_0x2f8968[0x3]);}function _handleMonitor(_0x18b469){let _0x7b450=null;let _0x5a1a4d=_0x18b469[_0x340c('0xe')]('\x0a');let _0x2de731=[];let _0x3be608=0x0;let _0x1d5c74='';let _0x426cf8='';let _0x1d2f12=![];board['clearArrows'](!![]);_0x5a1a4d[_0x340c('0x7')](function(_0x3c9ed0){if(_0x3c9ed0['match'](/^([-+][0-9]{4}[A-Z]{2}|%TORYO)$/)){_0x2de731[_0x340c('0x17')](RegExp['$1']);}else if(_0x3c9ed0[_0x340c('0x13')](/^T(\d+)$/)){_0x2de731[_0x2de731[_0x340c('0x94')]-0x1]+=','+RegExp['$1'];}else if(_0x3c9ed0=='MONITOR_RESET'){_0x1d2f12=!![];}else if(_0x3c9ed0[_0x340c('0x13')](/^kifu_id:(.+)$/)){_0x7b450=RegExp['$1'];}else if(_0x3c9ed0['match'](/^\$SINCE_LAST_MOVE:(\d+)$/)){_0x3be608=parseInt(RegExp['$1']);}else if(_0x3c9ed0['match'](/^To_Move:([\+\-])$/)){_0x1d5c74+='P0'+RegExp['$1']+'\x0a';}else if(_0x3c9ed0[_0x340c('0x13')](/^P[0-9+-].*/)){_0x1d5c74+=_0x3c9ed0+'\x0a';}else if(_0x3c9ed0['match'](/^#(SENTE_WIN|GOTE_WIN|DRAW|RESIGN|TIME_UP|ILLEGAL_MOVE|SENNICHITE|OUTE_SENNICHITE|JISHOGI|DISCONNECT|SUSPEND|CATCH|TRY)/)){_0x426cf8+=RegExp['$1']+'\x0a';}else if(_0x3c9ed0[_0x340c('0x13')](/^NOT_FOUND$/)){board[_0x340c('0x103')]();return;}});if(_0x7b450){if(_0x1d2f12)forceKifuMode(0x1);board[_0x340c('0x273')](_0x1d5c74,0x2,_0x2de731,_0x3be608);board['setKifuId'](_0x7b450);setBoardConditions();_switchLayer(0x2);if(!board['game'][_0x340c('0x149')]()){writeUserMessage(board['game'][_0x340c('0x158')]=='r'?i18next['t'](_0x340c('0x274')):i18next['t'](_0x340c('0x275')),0x2,_0x340c('0x119'));}let _0x58670f=board[_0x340c('0x111')][_0x340c('0x26e')]();if(_0x58670f){writeUserMessage(EJ(_0x340c('0x276'),'イベント対局:\x20「')+_0x58670f[_0x340c('0x2e')]()+EJ('\x22\x20','」\x20')+_0x58670f['url'](),0x2,_0x340c('0x17c'),!![]);}}else{_0x2de731[_0x340c('0x7')](function(_0x12575e){if(_0x12575e[_0x340c('0x13')](/^%TORYO/))return;let _0x383570=new Movement(board[_0x340c('0x257')]());_0x383570[_0x340c('0x24f')](_0x12575e['split'](',')[0x0]);_0x383570[_0x340c('0x24d')](parseInt(_0x12575e[_0x340c('0xe')](',')[0x1]),board);board[_0x340c('0x277')](_0x383570);});}if(_0x426cf8!=''){_handleGameEnd(_0x426cf8);if(_0x3be608>0x0)board[_0x340c('0x259')][_0x340c('0x190')](-0x1*_0x3be608,_0x340c('0x278'));}}function _handleReconnect(_0xdd8973){let _0x363ab7=null;let _0x105eaf=_0xdd8973[_0x340c('0xe')]('\x0a');let _0x5f56a6=[];let _0x3f1681=0x0;let _0x42ee7b='';let _0x3801e5='';_0x105eaf['forEach'](function(_0x40dde3){if(_0x40dde3[_0x340c('0x13')](/^([-+][0-9]{4}[A-Z]{2}|%TORYO)$/)){_0x5f56a6[_0x340c('0x17')](RegExp['$1']);}else if(_0x40dde3[_0x340c('0x13')](/^T(\d+)$/)){_0x5f56a6[_0x5f56a6[_0x340c('0x94')]-0x1]+=','+RegExp['$1'];}else if(_0x40dde3[_0x340c('0x13')](/^kifu_id:(.+)$/)){_0x363ab7=RegExp['$1'];}else if(_0x40dde3[_0x340c('0x13')](/^\$SINCE_LAST_MOVE:(\d+)$/)){_0x3f1681=parseInt(RegExp['$1']);}else if(_0x40dde3['match'](/^To_Move:([\+\-])$/)){_0x42ee7b+='P0'+RegExp['$1']+'\x0a';}else if(_0x40dde3[_0x340c('0x13')](/^P[0-9+-].*/)){_0x42ee7b+=_0x40dde3+'\x0a';}else if(_0x40dde3[_0x340c('0x13')](/^#(SENTE_WIN|GOTE_WIN|DRAW|RESIGN|TIME_UP|ILLEGAL_MOVE|SENNICHITE|OUTE_SENNICHITE|JISHOGI|DISCONNECT|CATCH|TRY)/)){_0x3801e5+=RegExp['$1']+'\x0a';}});board[_0x340c('0x273')](_0x42ee7b,board['getPlayerRoleFromName'](me['name']),_0x5f56a6,_0x3f1681);if(_0x363ab7)board[_0x340c('0x238')](_0x363ab7);setBoardConditions();_switchLayer(0x2);_greetState=0x2;if(_0x3801e5!=''){client[_0x340c('0x117')]=0x0;_handleGameEnd(_0x3801e5,!![]);}}function _handleEnter(_0x284e14){if(board[_0x340c('0x279')](_0x284e14)!=null){clearInterval(_disconnectTimer);$(_0x340c('0x256'))[_0x340c('0x161')]();if(board[_0x340c('0x8b')]())board[_0x340c('0x27a')](board[_0x340c('0x279')](_0x284e14));writeUserMessage(_name2link(_0x284e14)+i18next['t'](_0x340c('0x27b')),0x2,board[_0x340c('0x279')](_0x284e14)==0x0?_0x340c('0x27c'):_0x340c('0x27d'),!![]);board[_0x340c('0x271')](board[_0x340c('0x279')](_0x284e14),_0x340c('0x27e'),![]);sp[_0x340c('0x27f')](!![]);if(board['isHost']())client[_0x340c('0x88')](_0x340c('0x14f')+_0x284e14);}else{let _0x18abbc=![];if(watcherGrid[_0x340c('0x10c')]()[_0x340c('0x18f')]()<0xf||_0x18abbc){writeUserMessage(_name2link(_0x284e14)+i18next['t'](_0x340c('0x27b')),0x2,_0x340c('0x119'),_0x18abbc);}if(users[_0x284e14]){watcherGrid[_0x340c('0x51')][_0x340c('0x190')](users[_0x284e14][_0x340c('0x192')]());drawGridMaintainScroll(watcherGrid);}}if(board[_0x340c('0x148')]())client[_0x340c('0x1f7')](_0x284e14,'[##STUDY]'+_generateStudyText(kifuGrid['row']({'selected':!![]})['data']()[_0x340c('0x280')]));if(board[_0x340c('0x8b')]()){if(board[_0x340c('0x111')][_0x340c('0x158')]!='r'&&!_allowWatcherChat)client[_0x340c('0x1f7')](_0x284e14,_0x340c('0x281'));}}function _handleLeave(_0xf5371a){if(!board[_0x340c('0x111')])return;if(board[_0x340c('0x279')](_0xf5371a)!=null){writeUserMessage(_0xf5371a+i18next['t'](_0x340c('0x231')),0x2,board[_0x340c('0x279')](_0xf5371a)==0x0?_0x340c('0x27c'):_0x340c('0x27d'),!![]);board[_0x340c('0x271')](board[_0x340c('0x279')](_0xf5371a),'name-left',!![]);sp[_0x340c('0x27f')](![]);}else{let _0x1194b7=![];if(watcherGrid[_0x340c('0x10c')]()[_0x340c('0x18f')]()<0xa||_0x1194b7){writeUserMessage(_0xf5371a+i18next['t'](_0x340c('0x231')),0x2,_0x340c('0x119'),_0x1194b7);}watcherGrid[_0x340c('0x51')]('#'+_0xf5371a)[_0x340c('0x161')]();drawGridMaintainScroll(watcherGrid);}}function _handleDisconnect(_0x2b3c47){if(!board[_0x340c('0x111')])return;if(board['getPlayerRoleFromName'](_0x2b3c47)!=null){writeUserMessage(_0x2b3c47+EJ(_0x340c('0x282'),_0x340c('0x283')),0x2,board[_0x340c('0x279')](_0x2b3c47)==0x0?_0x340c('0x27c'):_0x340c('0x27d'),!![]);board['playerNameClassChange'](board[_0x340c('0x279')](_0x2b3c47),_0x340c('0x27e'),!![]);sp[_0x340c('0x27f')](![]);if(board[_0x340c('0x8b')]()&&_0x2b3c47!=me[_0x340c('0x2e')]){board[_0x340c('0x284')](board[_0x340c('0x279')](_0x2b3c47));writeUserMessage(i18next['t'](_0x340c('0x285')),0x2,_0x340c('0x115'));_startDisconnectTimer();}}}function _startDisconnectTimer(){_opponentDisconnectCount+=0x1;$(_0x340c('0x256'))['remove']();let _0x21453e=$(_0x340c('0x286'),{'id':_0x340c('0x284')});$(_0x340c('0x13c'))[_0x340c('0xd5')](_0x21453e);_0x21453e[_0x340c('0xc9')](i18next['t'](_0x340c('0x287'))+_0x340c('0x288')+i18next['t']('sec'));let _0x2dd7cb=0x0;let _0x581064=_opponentDisconnectCount>0x1?0x1:0x3c;_disconnectTimer=setInterval(function(){_0x2dd7cb++;$(_0x340c('0x289'))['text'](_0x2dd7cb);if(_0x2dd7cb==_0x581064){$('<input\x20id=\x22disconnectDeclareButton\x22\x20type=\x22button\x22\x20value=\x22'+i18next['t'](_0x340c('0x28a'))+'\x22\x20style=\x22height:20px;margin-left:5px\x22>')[_0x340c('0x126')](_0x21453e);$(_0x340c('0x28b'))[_0x340c('0x6d')](function(){_handleDisconnectDeclare();});}else if(_0x2dd7cb>=0x12c){_handleDisconnectDeclare();}},0x3e8);}function _handleDisconnectDeclare(){clearInterval(_disconnectTimer);client[_0x340c('0x28a')]();$(_0x340c('0x256'))['remove']();}function _handleStart(_0x3c24bd){let _0x1046b9=_0x3c24bd[_0x340c('0xe')]('+');let _0x3ee2fd=_0x1046b9[0x1]['match'](/^([0-9a-z]+?)_(.*)-([0-9]*)-([0-9]*)$/);let _0x4340c6;let _0x1c8193;if(_0x1046b9[0x0]==_0x340c('0x28c')){let _0x1c8193=_0x3ee2fd[0x2][_0x340c('0xe')]('.')[0x0]+EJ('\x20CREATED\x20[',_0x340c('0x28d'));_0x1c8193+=_game2link(EJ('STUDY\x20ROOM',_0x340c('0x28e')),_0x3c24bd);_0x1c8193+=EJ('].',_0x340c('0x28f'));writeUserMessage(_0x1c8193,0x1,'#008800');sp[_0x340c('0x290')]();let _0x5d9e74=new User(_0x1046b9[0x2]);_0x5d9e74[_0x340c('0x221')](!![]);var _0x517ab6=new User(_0x1046b9[0x3]);_0x517ab6[_0x340c('0x221')](![]);_0x4340c6=new Game(0x0,_0x3c24bd,_0x5d9e74,_0x517ab6);if(_0x4340c6[_0x340c('0x291')]()){board[_0x340c('0x14e')]=0x2;_enterGame(_0x4340c6);}}else{_0x1c8193='['+_game2link(EJ(_0x340c('0x292'),_0x340c('0x293')),_0x3c24bd)+']\x20';_0x1c8193+='☗'+_0x1046b9[0x2]+EJ(_0x340c('0x294'),'\x20対\x20')+'☖'+_0x1046b9[0x3]+_0x340c('0x295')+EJ(HANDICAPS_EN[_0x3ee2fd[0x1]],HANDICAPS_JA[_0x3ee2fd[0x1]]);writeUserMessage(_0x1c8193,0x1,_0x340c('0x119'));if(users[_0x1046b9[0x2]]){users[_0x1046b9[0x2]][_0x340c('0x296')](_0x1046b9[0x1],'+');playerGrid[_0x340c('0x51')]('#'+_0x1046b9[0x2])[_0x340c('0x161')]();playerGrid[_0x340c('0x51')][_0x340c('0x190')](users[_0x1046b9[0x2]][_0x340c('0x192')]());waiterGrid[_0x340c('0x51')]('#'+_0x1046b9[0x2])[_0x340c('0x161')]();}if(users[_0x1046b9[0x3]]){users[_0x1046b9[0x3]][_0x340c('0x296')](_0x1046b9[0x1],'-');playerGrid[_0x340c('0x51')]('#'+_0x1046b9[0x3])[_0x340c('0x161')]();playerGrid[_0x340c('0x51')][_0x340c('0x190')](users[_0x1046b9[0x3]][_0x340c('0x192')]());waiterGrid[_0x340c('0x51')]('#'+_0x1046b9[0x3])[_0x340c('0x161')]();}drawGridMaintainScroll(playerGrid);drawGridMaintainScroll(waiterGrid);_0x4340c6=new Game(0x0,_0x3c24bd,users[_0x1046b9[0x2]],users[_0x1046b9[0x3]]);}gameGrid[_0x340c('0x51')][_0x340c('0x190')](_0x4340c6);drawGridMaintainScroll(gameGrid);}function _handleChat(_0x14e349,_0x3a0fd8){if(_0x3a0fd8[_0x340c('0x13')](/^\[##INFONEW\]/)){return;}else if(_0x3a0fd8[_0x340c('0x13')](/^\[##BROADCAST\](.+)$/)){return;}else if(_0x3a0fd8[_0x340c('0x13')](/^\[##WINS\](\d+)$/)){writeUserMessage(_name2link(_0x14e349)+EJ(_0x340c('0x297'),'さんが通算')+parseInt(RegExp['$1'])+EJ(_0x340c('0x298'),_0x340c('0x299')),0x1,_0x340c('0x119'),!![]);}else if(_0x3a0fd8[_0x340c('0x13')](/^\[##EXP\](.+),(\d+)$/)){let _0x55ee06=RegExp['$1']=='nr'?EJ(_0x340c('0x29a'),_0x340c('0x29b')):getHandicapShort(RegExp['$1']);writeUserMessage(_name2link(_0x14e349)+EJ(_0x340c('0x29c')+makeRank34FromExp(parseInt(RegExp['$2']))+_0x340c('0x29d')+_0x55ee06+'!',_0x340c('0x29e')+_0x55ee06+'で\x20'+makeRank34FromExp(parseInt(RegExp['$2']))+_0x340c('0x29f')),0x1,'#008800',!![]);}else if(_0x3a0fd8['match'](/^\[##.+\]/)){return;}else if(_isFavorite(_0x14e349)){writeUserMessage('['+_name2link(_0x14e349)+']\x20'+_0x3a0fd8,0x1,_0x340c('0x2a0'));}else if(_isColleague(_0x14e349)){writeUserMessage('['+_name2link(_0x14e349)+']\x20'+_0x3a0fd8,0x1,_0x340c('0x2a1'));}else if(_0x3a0fd8[_0x340c('0x13')](/\[auto\-chat\]/)){writeUserMessage('['+_name2link(_0x14e349)+']\x20'+_0x3a0fd8,0x1,_0x340c('0x2a2'));}else if(_0x14e349==me[_0x340c('0x2e')]){writeUserMessage('['+_name2link(_0x14e349)+']\x20'+_0x3a0fd8,0x1,_0x340c('0x2a3'));}else{writeUserMessage('['+_name2link(_0x14e349)+']\x20'+_0x3a0fd8,0x1,_0x340c('0x27c'));}if(currentLayer==0x1)sp[_0x340c('0x290')]();}function _handleGameChat(_0x29fc5c,_0x32aa74){if(!board['game'])return;if(board['isPlaying']()&&_0x32aa74[_0x340c('0x13')](/^\[comment\]/))return;if(_0x32aa74[_0x340c('0x13')](/\[\#\#HOVER\](\d+),(\d+)$/)){}else if(_0x32aa74[_0x340c('0x13')](/\[##GRAB\](\d+),(\d+)$/)){if(_0x29fc5c!=me[_0x340c('0x2e')]&&board['onListen'])board['handleGrab'](RegExp['$1'],RegExp['$2']);}else if(_0x32aa74[_0x340c('0x13')](/\[##TYPE\]$/)){if(_0x29fc5c!=me[_0x340c('0x2e')]){_runTypingIndicator(_0x29fc5c);}}else if(_0x32aa74[_0x340c('0x13')](/\[\#\#STUDY\](\d+)\/(.+)$/)){let _0x540028=_updateStudyState(_0x29fc5c,parseInt(RegExp['$1']),RegExp['$2']);if(hostPlayerName==null)_updateHostPlayer(_0x29fc5c);board[_0x340c('0x146')](!![]);if(board[_0x340c('0x148')]()&&_0x29fc5c==me[_0x340c('0x2e')])return;if(!(board[_0x340c('0x186')]&&board[_0x340c('0x145')]))return;if(_0x29fc5c!=me['name'])_handleStudy(_0x540028);}else if(_0x32aa74[_0x340c('0x13')](/^\[##ARROW\]CLEAR$/)){if(_0x29fc5c!=me[_0x340c('0x2e')])board[_0x340c('0x146')](!![],_0x29fc5c);}else if(_0x32aa74['match'](/^\[##ARROW\](.+),(.+),(.+),(.+),(.+),(.+)$/)){if(!options[_0x340c('0x2a4')]==0x1||_0x29fc5c==me[_0x340c('0x2e')])return;if(board[_0x340c('0x8b')]())return;if(_0x29fc5c==me[_0x340c('0x2e')])_0x29fc5c='';board[_0x340c('0x2a5')](parseInt(RegExp['$1']),Number(RegExp['$2']),Number(RegExp['$3']),Number(RegExp['$4']),Number(RegExp['$5']),parseInt(RegExp['$6'],0x10),!![],_0x29fc5c);}else if(_0x32aa74[_0x340c('0x13')](/^\[##M_(IN|OUT)\](\d+),(\d+)$/)){let _0x11d49e=RegExp['$1']=='OUT';let _0x3bd0a8=board[_0x340c('0x279')](_0x29fc5c);if(_0x3bd0a8!=null)board[_0x340c('0x271')](_0x3bd0a8,_0x340c('0x272'),_0x11d49e);}else if(_0x32aa74[_0x340c('0x13')](/^\[##GIVEHOST\](.+)$/)){if(!board[_0x340c('0x186')])return;let _0x115d7e=RegExp['$1'];if(_0x115d7e==me[_0x340c('0x2e')]){sendStudy();board['studyHostType']=0x2;$('input[name=kifuModeRadio]:eq(1)')['prop']('checked',!![]);_kifuModeRadioChange();setBoardConditions();writeUserMessage(i18next['t'](_0x340c('0x26b')),0x2,'#008800',!![]);}else{writeUserMessage(EJ(_0x340c('0x2a6')+_0x115d7e,_0x340c('0x2a7')+_0x115d7e+'さんに引き継がれました。'),0x2,_0x340c('0x119'));}_updateHostPlayer(_0x115d7e);}else if(_0x32aa74['match'](/^\[##SUBHOST_ON\](.+)$/)){if(RegExp['$1']==me[_0x340c('0x2e')]){writeUserMessage(i18next['t'](_0x340c('0x2a8')),0x2,_0x340c('0x119'),!![]);board[_0x340c('0x14e')]=0x1;setBoardConditions();}else{writeUserMessage(EJ('Study\x20Sub-host\x20status\x20given\x20to\x20'+_name2link(RegExp['$1']),_name2link(RegExp['$1'])+_0x340c('0x2a9')),0x2,_0x340c('0x119'));}}else if(_0x32aa74[_0x340c('0x13')](/^\[##TEMPLATE\]([A-Z]\d{3})/)){_handleGameChat(_0x29fc5c,EJ('<Template>\x20',_0x340c('0x2aa'))+i18next['t']('code.'+RegExp['$1']));}else if(_0x32aa74[_0x340c('0x13')](/^\[##REMATCH\]$/)){board[_0x340c('0x2ab')](board[_0x340c('0x279')](_0x29fc5c));_interpretCommunicationCode(_0x29fc5c,'G050',0x2,!![],!![]);if(board[_0x340c('0x13a')]()){writeUserMessage(i18next['t'](_0x340c('0x2ac')),0x2,_0x340c('0x119'),!![]);if(board[_0x340c('0x178')]()){client[_0x340c('0x2ad')]();client[_0x340c('0x2ab')](board[_0x340c('0x111')],board[_0x340c('0x135')]);}else{$(_0x340c('0x2ae'))[_0x340c('0x131')]('button-disabled');}}}else if(_0x32aa74[_0x340c('0x13')](/^\[##.+\]/)){}else if(_0x32aa74['match'](/^\[auto\-chat\]\s#([A-Z]\d{3})$/)){_interpretCommunicationCode(_0x29fc5c,RegExp['$1'],0x2,![],!![]);}else{if(_0x29fc5c==board[_0x340c('0x111')]['black'][_0x340c('0x2e')]){_stopTypingIndicator(0x0);writeUserMessage('['+_name2link(_0x29fc5c)+']\x20'+_0x32aa74,0x2,_0x340c('0x27c'));}else if(_0x29fc5c==board['game']['white'][_0x340c('0x2e')]){_stopTypingIndicator(0x1);writeUserMessage('['+_name2link(_0x29fc5c)+']\x20'+_0x32aa74,0x2,'#666666');}else if(_0x29fc5c==me[_0x340c('0x2e')]){writeUserMessage('['+_name2link(_0x29fc5c)+']\x20'+_0x32aa74,0x2,_0x340c('0x2a3'));}else if(board[_0x340c('0x8b')]()&&!_allowWatcherChat){return;}else{writeUserMessage('['+_name2link(_0x29fc5c)+']\x20'+_0x32aa74,0x2,_0x340c('0x2af'));}sp[_0x340c('0x2b0')]();}}function _handlePrivateChat(_0x44e687,_0x9ea6da){if(_0x9ea6da[_0x340c('0x13')](/^\[\#\#STUDY\](\d+)\/(.+)$/)){_updateStudyState(_0x44e687,parseInt(RegExp['$1']),RegExp['$2']);if(!(board[_0x340c('0x186')]&&board[_0x340c('0x145')]))return;if(_0x44e687!=me[_0x340c('0x2e')])_handleStudy();_updateHostPlayer(_0x44e687);return;}else if(_0x9ea6da[_0x340c('0x13')](/^\[\#\#FITNESS\](\d),(\d)$/)){let _0x305cb1=EJ(_0x340c('0x2b1'),'対局相手の')+i18next['t'](_0x340c('0x2b2'))+':\x20'+_fitnessLevelText(RegExp['$1']);if(!board[_0x340c('0x111')][_0x340c('0x14c')]['isFromJapan']()||!board[_0x340c('0x111')][_0x340c('0x14a')][_0x340c('0x2b3')]())_0x305cb1+=_0x340c('0x295')+i18next['t']('option.english_level')+':\x20'+_fitnessLevelText(RegExp['$2']);writeUserMessage(_0x305cb1,0x2,_0x340c('0x2b4'));return;}else if(_0x9ea6da[_0x340c('0x13')](/^\[\#\#INVITE\](\d+),(\d+),(.+)$/)){_handleInvitation(_0x44e687);return;}else if(_0x9ea6da[_0x340c('0x13')](/^\[\#\#REJECT\]/)){if(_0x9ea6da[_0x340c('0x13')](/^\[\#\#REJECT\]([A-Z]\d{3})/))_interpretCommunicationCode(_0x44e687,RegExp['$1'],0x1,!![],![]);else writeUserMessage(_0x44e687+EJ(_0x340c('0x2b5'),_0x340c('0x2b6')),0x1,_0x340c('0x119'),!![]);return;}else if(_0x9ea6da[_0x340c('0x13')](/^\[auto\-PM\]/)){if(_0x9ea6da[_0x340c('0x13')](/^\[auto\-PM\]\s#([A-Z]\d{3})/))_interpretCommunicationCode(_0x44e687,RegExp['$1'],0x2,![],!![]);return;}if(me[_0x340c('0x108')])return;let _0x28dea8=$(_0x340c('0x2b7')+_0x44e687);if(!_0x28dea8[0x0]&&users[_0x44e687])_0x28dea8=_openPlayerInfo(users[_0x44e687],![]);let _0x39d83c=_0x28dea8[_0x340c('0x68')](_0x340c('0x1c0'));$(_0x340c('0x124'),{})[_0x340c('0xa5')](_0x340c('0x1cd'),_0x340c('0x2b8'))[_0x340c('0x9')](_0x9ea6da)[_0x340c('0x126')](_0x39d83c);_0x39d83c[_0x340c('0xd5')](_0x340c('0x127'));_0x39d83c['animate']({'scrollTop':_0x39d83c[0x0][_0x340c('0x129')]},_0x340c('0x6f'));_playerPMClick(_0x28dea8,!![]);if(!_0x28dea8[_0x340c('0x10a')](_0x340c('0x2b9'))&&!board[_0x340c('0x8b')]()){writeUserMessage(_0x340c('0x2ba')+_name2link(_0x44e687)+']\x20'+_0x9ea6da[_0x340c('0x11f')](/^\[\#\#URGENT\]/,''),0x1,_0x340c('0x85'));if(currentLayer==0x2)writeUserMessage(_0x340c('0x2ba')+_name2link(_0x44e687)+']\x20'+_0x9ea6da[_0x340c('0x11f')](/^\[\#\#URGENT\]/,''),0x2,_0x340c('0x85'));}if(!board['isPlaying']())sp[_0x340c('0x2bb')]();}function _handleInvitation(_0x5ea075){let _0x51131b=users[_0x5ea075];if(!_0x51131b){client[_0x340c('0x1f7')](_0x5ea075,_0x340c('0x1b4'));return;}if(board[_0x340c('0x178')]()){client[_0x340c('0x1f7')](_0x5ea075,_0x340c('0x2bc'));return;}if($(_0x340c('0x2bd'))['dialog'](_0x340c('0x2b9'))||_challengeUser){client[_0x340c('0x1f7')](_0x5ea075,_0x340c('0x2be'));return;}if(_0x51131b[_0x340c('0x1df')]()){sp['play'](_0x340c('0x2bf'));$('#modalInvitation')['dialog'](_0x340c('0xf'));_initModalInvitation(_0x51131b);}}function _handleMile(_0x15a229){if(me[_0x340c('0x108')])return;_0x15a229=parseInt(_0x15a229);if(_0x15a229==-0x1)return;let _0x3ec50c=_0x15a229-mileage;if(_0x3ec50c>0x0)writeUserMessage(EJ('You\x27ve\x20earned\x20'+_0x3ec50c+_0x340c('0x2c0')+(_0x3ec50c==0x1?'!':'s!'),_0x3ec50c+_0x340c('0x2c1')),0x1,'#FF3388');else if(_0x3ec50c<0x0)writeUserMessage(EJ('You\x27ve\x20used\x20'+-_0x3ec50c+_0x340c('0x2c0')+(_0x3ec50c==-0x1?'':'s'),-_0x3ec50c+_0x340c('0x2c2')),0x1,'#FF3388');mileage=_0x15a229;_updateLobbyHeader();}function _handleWins(_0x28f2ab){if(parseInt(_0x28f2ab)%0x64==0x0)client[_0x340c('0x2c3')](_0x340c('0x2c4')+_0x28f2ab);}function _handleExp(_0x362251){let _0x3b6aa7=parseInt(_0x362251['split'](',')[0x0]);let _0x14abb4=parseInt(_0x362251[_0x340c('0xe')](',')[0x1]);let _0x12ef0d=makeRank34FromExp(_0x14abb4);if(_0x12ef0d!=makeRank34FromExp(_0x14abb4-_0x3b6aa7)){client['chat'](_0x340c('0x2c5')+board[_0x340c('0x111')][_0x340c('0x158')]+','+_0x14abb4);writeUserMessage(EJ(_0x340c('0x2c6'),'クラス昇格!!'),0x2,_0x340c('0x25c'),!![]);}writeUserMessage(EJ(_0x340c('0x2c7')+_0x3b6aa7+_0x340c('0x2c8')+_0x14abb4+_0x340c('0x2c9')+_0x12ef0d+'\x22\x20level.',_0x3b6aa7+_0x340c('0x2ca')+_0x14abb4+_0x340c('0x2cb')+_0x12ef0d+_0x340c('0x2cc')),0x2,_0x340c('0x25c'));}function _handleClosed(){_stopAllTimeouts();$(_0x340c('0xdd'))[_0x340c('0x9')](i18next['t']('login.closed'));$(_0x340c('0x2cd'))[_0x340c('0x161')]();if(currentLayer!=0x0)showAlertDialog('disconnect',_backToEntrance);}function _backToEntrance(){$(_0x340c('0x2ce'))[_0x340c('0x79')](_0x340c('0xbe'),!![]);$(_0x340c('0x2cf'))['css'](_0x340c('0xfd'),'initial');_switchLayer(0x0);_clearAllParams();}function _clearAllParams(){users=new Object();tournaments=new Object();playerGrid[_0x340c('0x32')]()['draw']();waiterGrid[_0x340c('0x32')]()['draw']();gameGrid[_0x340c('0x32')]()[_0x340c('0xbf')]();board[_0x340c('0x103')]();_checkLobbyButtonClick(!![]);$(_0x340c('0x11d'))[_0x340c('0xd3')]();_loadDefaultOptions();}function _updateStudyState(_0x8d91f4,_0x4a0fc8,_0x444921='*'){let _0x421504=![];_studyBase=_0x4a0fc8;_studySender=_0x8d91f4;if(_0x444921=='*'){_studyBranchMoves=null;}else{let _0x23f482=_0x444921[_0x340c('0xe')]('/');if(_studyBranchMoves==null){writeUserMessage(_0x8d91f4+':\x20'+EJ(_0x340c('0x2d0')+_0x4a0fc8,_0x4a0fc8+_0x340c('0x2d1')),0x2,_0x340c('0x119'));if(_0x23f482['length']==0x1)_0x421504=!![];}else{if(_0x23f482[_0x340c('0x94')]==_studyBranchMoves[_0x340c('0x94')]+0x1)_0x421504=!![];}_studyBranchMoves=_0x444921[_0x340c('0xe')]('/');}return _0x421504;}function _handleStudy(_0x599204=![]){_sendStudyBuffer=null;if(_studyBase==null)return;if(_studyBranchMoves==null){if(kifuGrid[_0x340c('0x51')](_0x340c('0x187'))[_0x340c('0x5a')]()[_0x340c('0x188')])_restorePublicKifu();kifuGrid[_0x340c('0x10c')]()[_0x340c('0x10d')]();kifuGrid['row'](_studyBase)[_0x340c('0x83')]();scrollGridToSelected(kifuGrid);board[_0x340c('0x189')](kifuGrid[_0x340c('0x10c')](Array[_0x340c('0x18e')](Array(_studyBase+0x1)['keys']()))['data']());}else{kifuGrid['clear']();kifuGrid[_0x340c('0x10c')][_0x340c('0x190')](board[_0x340c('0x18a')]['slice'](0x0,_studyBase+0x1));board[_0x340c('0x189')](kifuGrid[_0x340c('0x10c')](Array[_0x340c('0x18e')](Array(_studyBase+0x1)['keys']()))[_0x340c('0x5a')]());let _0x28f84a=board[_0x340c('0x18a')][_studyBase];_studyBranchMoves[_0x340c('0x7')](function(_0xf5d1f9,_0xdab162){let _0x2d222f=new Movement(_0x28f84a);_0x2d222f[_0x340c('0x24f')](_0xf5d1f9);_0x2d222f['branch']=!![];_0x28f84a=board['handleBranchMove'](_0x2d222f,_0x599204&&_0xdab162==_studyBranchMoves[_0x340c('0x94')]-0x1);kifuGrid[_0x340c('0x10c')][_0x340c('0x190')]([_0x28f84a]);});board['refreshPosition']();if(_0x599204)board[_0x340c('0x2d2')](_0x28f84a['toX'],_0x28f84a[_0x340c('0x2d3')],_studySender,0xcc00);kifuGrid['draw']();kifuGrid[_0x340c('0x51')](_0x340c('0x187'))[_0x340c('0x83')]();scrollGridToSelected(kifuGrid);}}function _generateStudyText(_0xe4dbb1){let _0x20d4da='';for(let _0x2f2b2d=0x0;_0x2f2b2d<=_0xe4dbb1;_0x2f2b2d++){let _0x522627=kifuGrid[_0x340c('0x51')](_0x2f2b2d)[_0x340c('0x5a')]();if(!_0x522627[_0x340c('0x188')]){_0x20d4da=_0x522627[_0x340c('0x280')][_0x340c('0x1d7')]();}else{_0x20d4da+='/'+_0x522627[_0x340c('0x2d4')]();}}if(!_0x20d4da[_0x340c('0x13')](/\//))_0x20d4da+='/*';return _0x20d4da;}function sendStudy(_0x5bb06b=kifuGrid['row']({'selected':!![]})['data']()[_0x340c('0x280')]){_sendStudyBuffer=_generateStudyText(_0x5bb06b);if(timeouts[_0x340c('0x2d5')])return;_sendStudyExecute();}function _sendStudyExecute(){if(_sendStudyBuffer==null)return;client[_0x340c('0x88')](_0x340c('0x2d6')+_sendStudyBuffer);_sendStudyBuffer=null;setGeneralTimeout(_0x340c('0x2d5'),0x2bc);}function _sendAutoChat(_0x22db21){if(board[_0x340c('0x111')]){client[_0x340c('0x88')](_0x340c('0x2d7')+_0x22db21);}else{client['chat'](_0x340c('0x2d7')+_0x22db21);}}function _runTypingIndicator(_0x48841e){let _0x597e69=board[_0x340c('0x279')](_0x48841e);if(_0x597e69==null)return;let _0x5631d6=_0x340c('0x2d8')+_0x597e69;let _0x15f27e=$('#'+_0x5631d6);if(!_0x15f27e[_0x340c('0x94')]){_0x15f27e=$('<p></p>',{'id':_0x5631d6,'class':_0x340c('0x2d9')});let _0x54aa48=$(_0x340c('0x13c'));_0x54aa48['append'](_0x15f27e);_0x15f27e[_0x340c('0x9')]('['+_0x48841e+']\x20'+i18next['t']('msg.typing'));_0x54aa48['animate']({'scrollTop':_0x54aa48[0x0]['scrollHeight']},'fast');}setGeneralTimeout(_0x340c('0x2da')+_0x597e69,0x1388,!![]);}function _stopTypingIndicator(_0x2ada57,_0x43b25e=![]){if(_0x43b25e){$(_0x340c('0x2db')+_0x2ada57)[_0x340c('0x2dc')](_0x340c('0x6f'),function(){$(_0x340c('0x2db')+_0x2ada57)[_0x340c('0x161')]();});}else{$(_0x340c('0x2db')+_0x2ada57)[_0x340c('0x161')]();}clearGeneralTimeout('TYPE_'+_0x2ada57);}function _handleServers(_0x19c77a){_0x19c77a[0x0][_0x340c('0x2d')]=restoreIdleConnections(_0x19c77a[0x0]['population']);serverGrid[_0x340c('0x10c')][_0x340c('0x190')](_0x19c77a);serverGrid[_0x340c('0xbf')]();serverGrid[_0x340c('0x51')](0x0)[_0x340c('0x83')]();$(_0x340c('0x2ce'))[_0x340c('0x79')](_0x340c('0xbe'),![]);_loginTypeChange();if(testMode)_testFunction(0x1);}function _handleOptions(_0x46ae18){options=Object['assign'](options,_0x46ae18);_enforceOptions();_loadOptionsToDialog();}function _handleTournaments(_0x26d5d5){tournaments=new Object();_0x26d5d5[_0x340c('0x7')](function(_0x1143b5){tournaments[_0x1143b5['id']]=new Tournament(_0x1143b5);});$('#newGameTournamentSelect')[_0x340c('0xd3')]();Object[_0x340c('0xd4')](tournaments)[_0x340c('0x7')](function(_0x2230c6){if(tournaments[_0x2230c6][_0x340c('0x2dd')]())$(_0x340c('0x2de'))[_0x340c('0xd5')]($(_0x340c('0x2df'))[_0x340c('0x72')](_0x2230c6)[_0x340c('0x9')](tournaments[_0x2230c6]['name']()));});}function _handleCheckOpponent(_0x47c69f,_0x20991c){if(_0x47c69f['to_play']==null)return;let _0x175df8=$('[id=check-game-'+_0x20991c+']')['css'](_0x340c('0xfd'),'block');if(_0x47c69f[_0x340c('0x2e0')]){_0x175df8[_0x340c('0x9')](i18next['t'](_0x340c('0x2e1')));}else{_0x175df8[_0x340c('0x9')](i18next['t']('challenger.tournament_played'));}}function _handleEvaluation(_0x9fe5b3){let _0x1e14d2=$(_0x340c('0x2e2')+_0x9fe5b3[_0x340c('0x2e')]+']');let _0x1c9f69=Math[_0x340c('0x2e3')](_0x9fe5b3[_0x340c('0x2e4')]-_0x9fe5b3[_0x340c('0x2e5')],0x0);if(_0x1e14d2['length'])_0x1e14d2[_0x340c('0x9')](_0x1c9f69);}function _handlePlayerDetail(_0x1aa7f6,_0x3bcfdb){let _0x2df79f=$(_0x340c('0x1b7')+_0x3bcfdb);if(_0x2df79f[0x0]){let _0x3c4b33=0x0;if(_0x1aa7f6[_0x340c('0x2e6')]+_0x1aa7f6[_0x340c('0x2e7')]>0x0)_0x3c4b33=0x64*_0x1aa7f6['wins']/(_0x1aa7f6[_0x340c('0x2e6')]+_0x1aa7f6[_0x340c('0x2e7')]);_0x2df79f[_0x340c('0x68')](_0x340c('0x2e8'))[_0x340c('0xc9')](playingStyleName(_0x1aa7f6[_0x340c('0x2e9')]));_0x2df79f[_0x340c('0x68')](_0x340c('0x2ea'))[_0x340c('0xc9')](_0x1aa7f6[_0x340c('0x2e6')]+'\x20'+i18next['t'](_0x340c('0x2eb'))+'\x20'+_0x1aa7f6[_0x340c('0x2e7')]+'\x20'+i18next['t'](_0x340c('0x2ec'))+'\x20('+_0x3c4b33[_0x340c('0x2ed')](0x1)+'%)');_0x2df79f['find'](_0x340c('0x2ee'))[_0x340c('0xc9')](i18next['t']('player_info.streak')+':\x20'+_0x1aa7f6[_0x340c('0x2ef')]+'\x20('+i18next['t'](_0x340c('0x2f0'))+':\x20'+Math[_0x340c('0x2e3')](0x0,_0x1aa7f6[_0x340c('0x2f1')])+')');}}function _switchLayer(_0x51e974){$('div#layerLogin')[_0x340c('0xa5')]({'z-index':_0x51e974==0x0?0x2:0x1,'opacity':_0x51e974==0x0?0x1:0x0});$(_0x340c('0x2f2'))[_0x340c('0xa5')]({'z-index':_0x51e974==0x1?0x2:0x1,'opacity':_0x51e974==0x1||_0x51e974==0x2?0x1:0x0});$(_0x340c('0x2f3'))['css']({'z-index':_0x51e974==0x2?0x2:0x1,'opacity':_0x51e974==0x2?0x1:0x0});currentLayer=_0x51e974;}function setGeneralTimeout(_0x1f0d1b,_0x3d7964,_0x43f5b8=![]){if(timeouts[_0x1f0d1b]){if(_0x43f5b8)clearGeneralTimeout(_0x1f0d1b);else return;}timeouts[_0x1f0d1b]=setTimeout(_handleGeneralTimeout,_0x3d7964,_0x1f0d1b);}function clearGeneralTimeout(_0x15949b){if(timeouts[_0x15949b]){clearTimeout(timeouts[_0x15949b]);timeouts[_0x15949b]=![];}}function _enforceOptions(){sp[_0x340c('0x2f4')](options[_0x340c('0x2f5')]);sp[_0x340c('0x2f6')]=options[_0x340c('0x2f7')]==0x1;sp[_0x340c('0x2f8')]=options[_0x340c('0x2f9')]==0x1;sp[_0x340c('0x2fa')]=options[_0x340c('0x2f7')]==0x1;sp[_0x340c('0x2fb')]=options[_0x340c('0x2fc')]==0x1;board[_0x340c('0x2fd')](options[_0x340c('0x2fe')]);let _0x18b796=[0x1,1.5,0x2][options['board_size']];if(board[_0x340c('0x2ff')](_0x18b796)){$(_0x340c('0xb7'))[_0x340c('0x6b')](_0x18b796*board[_0x340c('0x300')][_0x340c('0x6b')]());_resize();}kifuGrid[_0x340c('0x10c')]()[_0x340c('0xc3')]();}function _handleGeneralTimeout(_0x2bb5d0){timeouts[_0x2bb5d0]=![];switch(_0x2bb5d0){case _0x340c('0x1ed'):if(_challengeUser){_challengeUser=null;writeUserMessage(i18next['t'](_0x340c('0x301')),0x1,_0x340c('0x119'),!![]);client[_0x340c('0x1b2')]('C031');}break;case _0x340c('0x107'):$(_0x340c('0x104'))[_0x340c('0x131')]('button-disabled');break;case _0x340c('0x302'):if(currentLayer==0x1)_refreshLobby();break;case _0x340c('0x20f'):if(client[_0x340c('0x206')]==_0x340c('0x303')){client['mileage']([0x5,0x8,0xa,0xa,0xc,0xc,0xc,0xc][_hourMileCount],config[_0x340c('0x26d')]);if(_hourMileCount<0x7){_hourMileCount++;setGeneralTimeout('HOUR_MILE',0x36ee80);}}break;case _0x340c('0x2d5'):_sendStudyExecute();break;case'SEND_TYPE':client[_0x340c('0x88')](_0x340c('0x304'));break;case _0x340c('0x305'):_stopTypingIndicator(0x0,!![]);break;case _0x340c('0x306'):_stopTypingIndicator(0x1,!![]);break;case _0x340c('0x307'):_refreshWorldClocks();break;}}function _stopAllTimeouts(){Object[_0x340c('0xd4')](timeouts)[_0x340c('0x7')](function(_0x5397cd){clearGeneralTimeout(_0x5397cd);});}function _name2link(_0x15082e){return _0x340c('0x308')+_0x15082e+_0x340c('0x309')+_0x15082e+_0x340c('0x30a');}function _game2link(_0x472a16,_0x44fab9){return _0x340c('0x30b')+_0x44fab9+_0x340c('0x30c')+_0x472a16+_0x340c('0x30a');}function _isFavorite(_0x147ede){return![];}function _isColleague(_0x5980c4){return![];}function getPremium(){if(premium==hidden_prm)return premium;else return 0x0;}function _enforcePremium(){_DisableOptionsByPremium();}function _refreshLobby(_0x90f8e7=![]){client['who'](_0x90f8e7);client[_0x340c('0x30d')]();setGeneralTimeout(_0x340c('0x302'),0x2bf20,!![]);}function _askEvaluation(_0xacbb95){if(me[_0x340c('0x108')]||_0xacbb95[_0x340c('0x13')](/^GUEST_/))return;$(_0x340c('0x2cd'))[_0x340c('0x161')]();let _0xf9e361=$(_0x340c('0x286'),{'id':_0x340c('0x30e')});_0xf9e361['html'](EJ(_0x340c('0x30f'),_0x340c('0x310'))+_0xacbb95+EJ(_0x340c('0x311'),_0x340c('0x312')));$(_0x340c('0x313'),{'href':'#','data-answer':'1'})['text'](EJ(_0x340c('0x314'),_0x340c('0x315')))[_0x340c('0x126')](_0xf9e361);$(_0x340c('0x313'),{'href':'#','data-answer':'-1'})[_0x340c('0x9')](EJ(_0x340c('0x316'),_0x340c('0x317')))[_0x340c('0x126')](_0xf9e361);_0xf9e361[_0x340c('0x68')]('a')[_0x340c('0x6d')](function(){$(_0x340c('0x2cd'))[_0x340c('0x161')]();apiClient['postEvaluation'](_0xacbb95,parseInt($(this)['data']('answer'))>0x0);});let _0x1e30a0=$(_0x340c('0x11d'));_0x1e30a0[_0x340c('0xd5')](_0xf9e361);_0x1e30a0[_0x340c('0x12a')]({'scrollTop':_0x1e30a0[0x0][_0x340c('0x129')]},_0x340c('0x6f'));}function _generateKIF(){let _0x35147c=gameTypeToKIF(board[_0x340c('0x111')][_0x340c('0x158')]);if(_0x35147c==null)return'';let _0x1cc02d=[];_0x1cc02d['push'](_0x340c('0x318'));let _0x334525=board[_0x340c('0x111')][_0x340c('0x59')][_0x340c('0xe')]('+')[0x4];_0x1cc02d[_0x340c('0x17')](_0x340c('0x319')+_0x334525[_0x340c('0x24b')](0x0,0x4)+'/'+_0x334525[_0x340c('0x24b')](0x4,0x2)+'/'+_0x334525[_0x340c('0x24b')](0x6,0x2));_0x1cc02d[_0x340c('0x17')](_0x340c('0x31a'));_0x1cc02d['push'](_0x340c('0x31b')+Math[_0x340c('0x31c')](board[_0x340c('0x111')][_0x340c('0x31d')]/0x3c)+'分+'+board[_0x340c('0x111')]['byoyomi']+'秒');_0x1cc02d[_0x340c('0x17')](_0x340c('0x31e')+_0x35147c);_0x1cc02d['push'](_0x340c('0x31f')+board['game'][_0x340c('0x14c')][_0x340c('0x2e')]);_0x1cc02d[_0x340c('0x17')](_0x340c('0x320')+board[_0x340c('0x111')][_0x340c('0x14a')][_0x340c('0x2e')]);_0x1cc02d[_0x340c('0x17')](_0x340c('0x321'));board[_0x340c('0x18a')][_0x340c('0x7')](function(_0x5be7ad){let _0x373a32=_0x5be7ad[_0x340c('0x322')]();if(_0x373a32!=null)_0x1cc02d['push'](_0x373a32);});let _0x3bc5f8=![];kifuGrid[_0x340c('0x10c')]()[_0x340c('0x5a')]()['each'](function(_0x5bc0a4,_0x1e6b69){if(_0x5bc0a4['branch']){if(!_0x3bc5f8){_0x3bc5f8=!![];_0x1cc02d[_0x340c('0x17')]('');_0x1cc02d[_0x340c('0x17')](_0x340c('0x323')+_0x5bc0a4['num']+'手');}_0x1cc02d[_0x340c('0x17')](_0x5bc0a4[_0x340c('0x322')]());}});return _0x1cc02d[_0x340c('0x172')]('\x0d\x0a');}function generateKifuNoteObject(){if(!board['game'])return null;if(board[_0x340c('0x111')][_0x340c('0x149')]()||!board[_0x340c('0x111')][_0x340c('0x255')])return null;let _0x52c4e4=board[_0x340c('0x111')][_0x340c('0x59')][_0x340c('0xe')]('+')[0x4];let _0x25f55e='';if(board[_0x340c('0x170')]!=null){if(board[_0x340c('0x170')]==-0x1)_0x25f55e=_0x340c('0x324');else if(board[_0x340c('0x170')]==0x0)_0x25f55e=(board[_0x340c('0x111')][_0x340c('0x158')][_0x340c('0x13')](/^hc/)?'下手':'先手')+'勝ち';else if(board['result']==0x1)_0x25f55e=(board[_0x340c('0x111')][_0x340c('0x158')][_0x340c('0x13')](/^hc/)?'上手':'後手')+'勝ち';if(board[_0x340c('0x111')][_0x340c('0x255')]&&board['game'][_0x340c('0x255')]!=_0x340c('0x325'))_0x25f55e+='('+Movement[_0x340c('0x326')][_0x340c('0x327')][board[_0x340c('0x111')][_0x340c('0x255')]]+')';}let _0x5d9599=[];let _0x43296c=[];let _0x391caa=0x0;board['moves'][_0x340c('0x7')](function(_0x33cf12){if(_0x33cf12[_0x340c('0x280')]==0x1&&_0x33cf12[_0x340c('0x328')]==Position[_0x340c('0x326')][_0x340c('0x329')])_0x43296c['push'](',');if(_0x33cf12[_0x340c('0x280')]!=0x0&&!_0x33cf12[_0x340c('0x32a')]){_0x43296c[_0x340c('0x17')](_0x33cf12[_0x340c('0x32b')]());_0x391caa+=0x1;}if(_0x43296c[_0x340c('0x94')]==0x96){_0x5d9599[_0x340c('0x17')](_0x43296c);_0x43296c=[];}});if(_0x43296c[_0x340c('0x94')]>0x0)_0x5d9599[_0x340c('0x17')](_0x43296c);let _0x119662={'rule':HANDICAPS_JA[board['game']['gameType']]||'','startedAt':_0x52c4e4['substr'](0x0,0x4)+'/'+_0x52c4e4[_0x340c('0x24b')](0x4,0x2)+'/'+_0x52c4e4['substr'](0x6,0x2)+'\u3000'+_0x52c4e4[_0x340c('0x24b')](0x8,0x2)+':'+_0x52c4e4[_0x340c('0x24b')](0xa,0x2),'endedAt':board[_0x340c('0x259')]['tz'](_0x340c('0x32c'))[_0x340c('0x32d')]('YYYY/MM/DD\u3000HH:mm'),'place':_0x340c('0x32e')+client[_0x340c('0x206')]+'サーバ','thinkingTime':'各\x20'+Math[_0x340c('0x31c')](board[_0x340c('0x111')][_0x340c('0x31d')]/0x3c)+_0x340c('0x32f')+board[_0x340c('0x111')][_0x340c('0x330')]+'秒)','blackName':board[_0x340c('0x111')][_0x340c('0x14c')][_0x340c('0x2e')]+_0x340c('0x331')+board['game'][_0x340c('0x14c')]['titleName'](),'whiteName':board['game']['white']['name']+_0x340c('0x331')+board['game'][_0x340c('0x14a')][_0x340c('0x1ba')](),'blackRank':(board['game']['black'][_0x340c('0x1e4')]?'(':'')+makeRankFromRating(board[_0x340c('0x111')][_0x340c('0x14c')]['rate'],!![])+(board[_0x340c('0x111')][_0x340c('0x14c')][_0x340c('0x1e4')]?')':''),'whiteRank':(board[_0x340c('0x111')][_0x340c('0x14a')][_0x340c('0x1e4')]?'(':'')+makeRankFromRating(board[_0x340c('0x111')][_0x340c('0x14a')][_0x340c('0x4b')],!![])+(board[_0x340c('0x111')][_0x340c('0x14a')][_0x340c('0x1e4')]?')':''),'moveSets':_0x5d9599,'movesCount':_0x391caa['toString']()+'手','result':_0x25f55e,'opening':board[_0x340c('0x111')][_0x340c('0x332')]!='*'?openingTypeObject(board[_0x340c('0x111')][_0x340c('0x332')],!![])[_0x340c('0x333')]:'','tournament':board[_0x340c('0x111')][_0x340c('0x26e')]()?board['game']['getTournament']()['name']():'','usedTime':'☗\x20'+sec2minsec(board['accumulatedTimes'][0x0])+_0x340c('0x334')+sec2minsec(board[_0x340c('0x335')][0x1])};return _0x119662;}function _countGuestGame(){let _0x297265=new Date();if(localStorage[_0x340c('0x336')]&&localStorage[_0x340c('0x336')]==_0x297265[_0x340c('0x337')]())localStorage[_0x340c('0x117')]=parseInt(localStorage[_0x340c('0x117')])+0x1;else{localStorage[_0x340c('0x336')]=_0x297265[_0x340c('0x337')]();localStorage[_0x340c('0x117')]=0x1;}}function _checkGuestGamesExpired(){if(client[_0x340c('0x206')]==_0x340c('0x338'))return![];if(!me[_0x340c('0x108')])return![];let _0x2f457c=new Date();if(localStorage[_0x340c('0x336')]&&localStorage[_0x340c('0x336')]==_0x2f457c[_0x340c('0x337')]()&&localStorage[_0x340c('0x117')]>=0x3){showAlertDialog(_0x340c('0x339'));return!![];}else{return![];}}function _loadDefaultOptions(){options={'timer_sound_type':0x2,'piece_type':0x0,'piece_type_34':0x1,'button_sound_play':0x1,'lobbychat_sound_play':0x1,'gamechat_sound_play':0x1,'end_sound_play':0x1,'hold_piece':0x1,'highlight_movable':0x0,'notation_style':0x1,'pm_auto_open':0x0,'accept_arrow':0x1,'arrow_color':0xcc00,'history_length':0x32,'postgame_study_level':0x0,'english_level':0x0,'receive_kifu_comment':0x0,'board_size':0x0,'favorites':[],'members':[],'opponents':[],'show_accumulated_time':0x0};_enforceOptions();_loadOptionsToDialog();}function _generateWorldClocks(){WorldClock[_0x340c('0x326')][_0x340c('0x33a')]['forEach'](function(_0x590e1f){let _0x53dad3=new WorldClock(_0x590e1f[_0x340c('0x33b')],_0x590e1f[_0x340c('0x33c')]);$(_0x340c('0x33d'))[_0x340c('0xd5')](_0x53dad3[_0x340c('0x300')]);_worldClocks[_0x340c('0x17')](_0x53dad3);});}function _refreshWorldClocks(){let _0x5caac5=moment();_worldClocks[_0x340c('0x7')](function(_0x12adbe){_0x12adbe['draw'](_0x5caac5);});setGeneralTimeout(_0x340c('0x307'),0x2710);}function _fitnessLevelText(_0x2c3c00){let _0x3662a8=parseInt(_0x2c3c00);if(_0x3662a8==0x0)return i18next['t'](_0x340c('0x33e'));else return i18next['t'](_0x340c('0x33f'))+(_0x3662a8-0x1)[_0x340c('0x1d7')]();}function _findGameByUser(_0x47f1ff){let _0x22668c=null;gameGrid[_0x340c('0x10c')]()[_0x340c('0x5a')]()['toArray']()[_0x340c('0x340')](function(_0x332e4e){if(_0x332e4e[_0x340c('0x341')](_0x47f1ff)){_0x22668c=_0x332e4e;return!![];}});return _0x22668c;}