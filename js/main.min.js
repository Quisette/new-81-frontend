var _0x5806=['Study\x20Sub-host\x20status\x20given\x20to\x20','さんに、感想戦サブ・ホスト権限が付与されました。','<Template>\x20','<定型>\x20','G050','msg.rematch_agreed','rematch','#rematchButton','#660000','Opponent\x27s\x20','対局相手の','option.study_level','isFromJapan','option.english_level','#0000AA','さんに招待メッセージが送信出来ませんでした。','div#player-info-window-','#f35','isOpen','PM:\x20[','[##REJECT]C011','#modalInvitation','[##REJECT]C012','play','INVITATION','You\x27ve\x20earned\x20','\x20D-Mile','\x20Dマイル獲得しました!','You\x27ve\x20used\x20','\x20Dマイルを消費しました。(通算マイル・期間マイルは減少しません)','chat','[##WINS]','You\x27re\x20promoted\x20to\x20a\x20new\x20rank!!','クラス昇格!!','You\x27ve\x20gained\x20','\x20EXP!!\x20(Total:\x20','\x22\x20level.','EXPを獲得!!\x20(トータル\x20','EXP)\x20現在「','」レベルです','#userEvaluationDialog','Studying\x20a\x20branch\x20from\x20move\x20#','手目からの分岐手順を検討','slice','handleBranchMove','refreshPosition','popupName','toX','toY','num','toCSA','SEND_STUDY','[auto-chat]\x20','typingIndicator-','msg.typing','#typingIndicator-','fadeOut','TYPE_','assign','#newGameTournamentSelect','amJoined','<option/>','to_play','challenger.tournament_not_yet','[id=get-evaluation-','max','good','bad','wins','losses','p#p3','style_id','p#p4','player_info.win','player_info.loss','toFixed','p#p5','player_info.streak','player_info.current','streak','div#layerLogin','div#layerLobby','div#layerBoard','setByoyomiType','gameStartEndEnabled','gamechat_sound_play','chatLobbyEnabled','lobbychat_sound_play','chatBoardEnabled','buttonEnabled','button_sound_play','setPieceDesignType','board_size','setScale','div','msg.no_answer','C031','show','AUTO_REFRESH','[##TYPE]','TYPE_0','WORLD_CLOCK','<sPAn\x20onclick=\x22_openPlayerInfo(users[\x27','\x27])\x22\x20class=\x22name-link\x22>','<sPAn\x20onclick=\x22_enterGameById(\x27','\x27)\x22\x20class=\x22name-link\x22>','who','list','Evaluate\x20','対局相手','\x27s\x20game\x20manner\x20->\x20','さんの対局マナーを評価して下さい\x20→\x20','<a></a>','[Good]','[良い]','[Bad]','[悪い]','postEvaluation','answer','#KIF\x20version=2.0\x20encoding=UTF-8','開始日時：','場所：81Dojo','floor','total','手合割：','先手：','後手：','手数----指手---------消費時間','toKIF','変化：','引き分け','RESIGN','special_notations_ja','owner','CONST','GOTE','toKifuNote','YYYY/MM/DD\u3000HH:mm','81道場\x20','byoyomi','&nbsp;','titleName','opening','tip','accumulatedTimes','&emsp;☖\x20','period','getDay','MOON','guest_expire','SEEDS','key','timezone','#worldClocks','option.not_defined','option.level','toArray','some','isUserIn','http://81dojo.com/dojo/images/','loadNewPosition','MERCURY','test','テスト','shogihub.com','search','substring','split','forEach','p#versionText','text','ver.\x20','#boardBox','addEventListener','load','responseText','get','dat/countries.txt','send','match','TITLE_HOLDERS','titleNames','titleAvatars','BANNED','banned','push','trim','open','http://81dojo.com/dojo/infoData.html?','dat/config.json?','allowConsole','language','locale','use','init','languageChanged','dataTableExt','oSort','rate-str-asc','rateStrToRate','rate-str-desc','#serverGrid','DataTable','dt-body-left','<img\x20class=\x22inline\x22\x20src=\x22img/','.png\x22>\x20','description_en','description_ja','population','35%','name','single','Loading...','読込中','clear','#playerGrid','title','14%','rank','nameStr','40%','country','12%','rate','10%','dt-body-right','rate-str','desc','#playerGrid\x20tbody','user-select','node','selected','preventDefault','index','row','#waiterGrid','waiter','50%','ruleStr','timeStr','13%','#waiterGrid\x20tbody','dblclick','parent','hasClass','#gameGrid','senteStr','29%','goteStr','ruleShort','16%','movesStr','openingStr','gameId','#gameGrid\x20tbody','data','#watcherGrid','name_column','watcher','55%','25%','20%','#watcherGrid\x20tbody','#kifuGrid','15%','moveStr','60%','.subMenu','.menuBar\x20>\x20ul\x20>\x20li','hover','find','button-disabled','ul:not(:animated)','width','slideDown','slideUp','click','closest','fast','login','val','dat','#passwordInput','dat2','#loginSave','checked','save','#languageSelector','openingMusic','#openingMusicCheckBox','prop','true','#findUser','autocomplete','item','value','select','lobby.player_not_found','#FF0000','onblur','game','gameChat','[##M_OUT]0,0','onfocus','isPlaying','isRated','[##M_IN]0,0','beforeunload','You\x20are\x20player.','unload','getElementById','layerBoard','#lobbyChatInput','keyup','length','keyCode','SEND_TYPE','isPlayer','tooltip','onmousemove','event','clientY','focus','system.81dojo.com','setCallbackFunctions','SERVERS','PLAYER','TOURNAMENTS','EVALUATION','onresize','div.menuBar','a.button','min-width','innerWidth','#layerBoard','css','#lobbyChatBox','insertAfter','flex','initial','#gameGridWrapper','11\x2011\x201px','actualWidth','innerHeight','actualHeight','#boardChatBox','insertBefore','#boardRightBottomHBox','#watcherBox','#kifuBox','prependTo','#boardLeftBottomHBox','#playerGridWrapper,\x20#waiterGridWrapper,\x20#gameGridWrapper,\x20#watcherGridWrapper,\x20#kifuGridWrapper','each','.dataTables_scrollBody','height','thead','#layerLoginContents','opacity','input[name=loginType],\x20input#usernameInput,\x20input#passwordInput,\x20input#loginSave,\x20input#loginButton','disabled','draw','p#loginAlert','getServers','rows','invalidate','settings','oLanguage','loading','sEmptyTable','board.no_watchers','span#languageFlag','#languageSelector\x20option:selected','code','flagImgTag16','attr','[data-i18n-value]','data-i18n-value','data-i18n-title','#newGameRuleSelect,\x20#newGameStudyRuleSelect','<option\x20/>','#modalNewGame,\x20#modalChallenger,\x20#modalInvitation,\x20#modalImpasse,\x20#modalOption,\x20#modalChatTemplate','dialog','option','[id^=i18n-]','button','label','#usernameInput,\x20#passwordInput','input[name=loginType]:checked','close','Please\x20select\x20a\x20server.','#loginButton,\x20#passwordInput,\x20#usernameInput','#loginAlert','host','port','guest','dojo_guest','#hiddenPass','LOBBY_IN','LOBBY_OUT','CHAT','GAMECHAT','PRIVATECHAT','GAME_END','ERROR','CLOSED','WHO','WATCHERS','CHALLENGE','DECLINE','GAME_SUMMARY','START','RESULT','MONITOR','RECONNECT','MILE','EXP','WINS','ENTER','LEAVE','DISCONNECT','connect','input#reloginButton','display','img#entrance-img','img/entrance_ja.jpg','img/81Dojo_bye.jpg','#refreshButton','addClass','REFRESH','isGuest','#modalNewGame','http://system.81dojo.com/','_blank','deselect','lockedOut','isVariant','この対局ルールはHTML版アプリでは未対応です。','#ff0000','setGame','getPlayerRoleFromName','status','msg.reconnect_while_game','watchers','reconnect','#lobbyMessageArea','#boardMessageArea','p#disconnectTimer,\x20p#typingIndicator-0,\x20p#typingIndicator-1','detach','replace','&lt;','<span','</span>','<a\x20href=\x22$1\x22\x20target=\x22_blank\x22>$1</a>','<span></span>','bold','appendTo','append','scrollTop','scrollHeight','animate','code.','#008800','chatBoard','#boardContents','pointer-events','none','#checkLobbyButton','removeClass','html','<i\x20class=\x22fa\x20fa-eye\x20fa-2x\x22></i>','border-bottom','5px\x20ridge\x20orange','40px','<i\x20class=\x22fa\x20fa-eye-slash\x20fa-2x\x22></i>','myRoleType','position','turn','resign','rematchAgreed','[##REMATCH]','monitor','msg.rematch_ended','<(_\x20_)>\x20お願いします。(Onegai-shimasu.)','<(_\x20_)>\x20有難うございました。(Arigatou-gozaimashita.)','#modalChatTemplate','[##TEMPLATE]','calcImpasse','onListen','clearArrows','[##ARROW]CLEAR','isHost','isStudy','white','[##GIVEHOST]','studyHostType','[##SUBHOST_ON]','canCalculateMaterialBalance','駒割計算結果(','手まで):\u3000','getMaterialBalance','平手以外では使えません','http://kyokumen.jp/positions/','toSFEN','This\x20board\x20cannot\x20be\x20shared.','この盤面はシェアできません','<textarea></textarea>','clip-board-area','body','#clip-board-area','copy','remove','now','81Dojo-','This\x20game\x20cannot\x20be\x20exported.','この対局は出力できません','kifu_note','ウインドウ作成に失敗しました','This\x20board\x20does\x20not\x20have\x20a\x20kifu\x20URL.','createElement','input','type','target','files','onload','result','resetStudyPosition','join','readAsText','#modalOption','#G101','#G100','closeGame','empty','msg.last_kifu_url','getOpponent','gameType','provisional','msg.before_upgrade','msg.before_downgrade','#FF3388','move','moves','input[name=kifuModeRadio]:eq(0)','#kifuGridWrapper','local-kifu','isSubHost','#G000','clearCanvas','#G001','isPostGame','branch',':last','replayMoves','redrawAllArrows','setBoardConditions','input[name=kifuModeRadio]:eq(','#G003','from','keys','count','gridObject','black','playerInfos','#player-info-rate','prepend','hostMark','timeout','#flipButton','#greetButton','style','#replayButtons','input[name=kifuModeRadio]','#resignButton','#receiveWatcherChatCheckBox','#clearArrowsButton,\x20#positionMenuButton,\x20#kifuMenuButton,\x20#rematchButton,\x20#closeGameButton','isWatcher','#clearArrowsButton,\x20#flipButton,\x20#positionMenuButton,\x20#kifuMenuButton','#logoutButton','.buttons-for-host','#giveHostButton','#uploadKifuButton','submenu-button-disabled','#kifuNoteButton,\x20#shareKifuTwitterButton,\x20#shareKifuFacebookButton',':checked','input[name=\x22newGameType\x22]:checked','#privateRoomPass','block','#newGamePasswordInput','wait','#newGameRuleSelect\x20option:selected','#newGameTotalSelect\x20option:selected','#newGameByoyomiSelect\x20option:selected','#newGameTournamentSelect\x20option:selected','stopWaiting','#newGameStudyBlack','study','accept','decline','Rejected\x20the\x20challenge\x20from\x20','さんからの挑戦をパスしました。','[##REJECT]','さんからの招待をパスしました。','#player-info-window-','<div></div>','player-info-window-','<div\x20id=\x22player-info-layer-1\x22\x20class=\x22hbox\x22\x20style=\x22pointer-events:none\x22>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22avatar-wrapper\x22><img\x20class=\x22avatar\x22/></div>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex:1;margin-left:10px\x22><p\x20id=\x22p1\x22></p><p\x20id=\x22p2\x22></p><p\x20id=\x22p3\x22></p><p\x20id=\x22p4\x22></p><p\x20id=\x22p5\x22></p></div>\x20\x20\x20\x20\x20\x20\x20\x20</div>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22player-info-layer-2\x22\x20style=\x22margin-top:-128px;opacity:0\x22>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22privateMessageArea\x22></div>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22hbox\x22\x20style=\x22margin-top:5px\x22><span\x20style=\x22margin-right:5px;white-space:nowrap\x22>PM:</span><input\x20id=\x22privateChatInput\x22\x20style=\x22flex:1\x22></div>\x20\x20\x20\x20\x20\x20\x20\x20</div>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22check-game\x22\x20id=\x22check-game-','auto','left+','#privateMessageArea','destroy','fa\x20fa-graduation-cap\x20font-fa\x20buttons-for-host\x20connected-button-left','board.give_host','fa\x20fa-user-plus\x20font-fa\x20buttons-for-host\x20connected-button-right','board.give_subhost','fa\x20fa-info-circle\x20font-fa','fa\x20fa-comment\x20font-fa','siblings','#privateChatInput','pm_while_playing','color','#33f','<br>','waitingChallengeableTournament','getEvaluation','img.avatar','src','p#p1','toString','p#p2','R:\x20','mobileIconTag','<img\x20class=\x22icon-evaluation\x22\x20src=\x22img/icon_like.png\x22><span\x20class=\x22get-evaluation\x22\x20id=\x22get-evaluation-','msg.still_in_game','msg.challenge_only_one','listAsWaiter','waitingTournamentId','You\x20are\x20not\x20registered\x20to\x20this\x20tournament.','この大会には参加していません。','withinPeriod','現在、大会開催期間外です。','msg.no_challenge_6dan','waitingGameName','This\x20game\x20rule\x20is\x20not\x20supported\x20yet.','HTML版は特殊ルールには未対応です。','msg.no_guest_rating','challenge','.....\x20','さんに挑戦中.....\x20','#challengeCanceler','<a\x20id=\x22challengeCanceler\x22\x20href=\x22#\x22\x20onclick=\x22_cancelChallenge($(this))\x22>[','cancel',']</a><br>','SHOW_CHALLENGE_CANCELER','isMobile','相手は対局待をしていません。','The\x20opponent\x20is\x20not\x20waiting\x20with\x20own\x20game\x20rule.\x20You\x20can\x20invite\x20him\x20if\x20you\x20wait\x20with\x20your\x20own\x20game\x20rule.','相手は対局待をしていません。自分が対局待にすることで招待メッセージを送ることが可能です。','idle','\x20is\x20not\x20accepting\x20challenge\x20or\x20invitations\x20right\x20now.','さんは現在\x20挑戦・招待を受け付けていません。','inGameRoom','\x20is\x20in\x20another\x20game\x20right\x20now.','さんは対局中です。','privateChat','[##INVITE]','さんに送信しました。(拒否された場合は連続送信しないで下さい)','after','<span\x20class=\x22canceled\x22>','/players/show/','div#player-info-layer-1','div#player-info-layer-2','#modalImpasse','kachi','[##GRAB]','log','stopOpening','login.successfull','#usernameInput','div#layerLoginContents','#serverLogo','img/','serverName','#header-serverName','\x20:\x20','username','setFromLogin','indexOf','splice','getOptions','getTournaments','HOUR_MILE','msg.html5_initial','You\x20have\x20','\x20status.\x20Thank\x20you\x20for\x20choosing\x2081Dojo.','クラス','#FFBB00','#header-playerName','#header-rate','#header-mile','\x20D-Miles\x20:\x20','\x20Dマイル\x20:\x20','#header-premium','shift','setFromWho','add','source','setFromStudy','setFromList','isMyDisconnectedGame','新鋭棋士','\x20\x20-\x20\x20','\x20logged\x20in','\x20via\x20mobile','\x20from\x20','\u3000Now\x20on\x20','-win\x20streak!','モバイルから','ログインしました。\x20(','name_ja','\u3000現在','連勝中!','setFromLobbyIn','setFromGame','CHALLENGER','checkTournamentOpponent','C005','seek','#modalChallenger','startGame','setKifuId','msg.game_start','#444444','You\x20are\x20Black\x20','isHandicap','(Handicap\x20taker).','(Sente).','あなた','が先手','You\x20are\x20White\x20','(Handicap\x20giver).','(Gote).\x0a','が上手(うわて)','は後手','です。','#G020','#G021','english_level','substr','getPlayersTimer','useTime','setTime','addMoveToKifuGrid','setFromCSA','handleReceivedMove','updateTurnHighlight','runningTimer','pauseAllTimers','gameEndType','p#disconnectTimer','setGameEnd','endTime','TIME_UP','sayTimeUp','toGameEndMessage','#DD0088','LOSE','setResult','###\x20You\x20Lose\x20###','###\x20あなたの負けです\x20###','gameEnd','WIN','###\x20あなたの勝ちです\x20###\x0a','DRAW','###\x20Draw\x20###\x0a','SENTE_WIN','###\x20Sente\x20(or\x20Shitate)\x20Wins\x20###\x0a','###\x20先手(または下手)の勝ち\x20###\x0a','GOTE_WIN','###\x20Gote\x20(or\x20Uwate)\x20Wins\x20###\x0a','###\x20後手(または上手)の勝ち\x20###\x0a','msg.host','msg.subhost','mileagePass','mileage','getTournament','Tournament\x20status:\x20','イベント対局結果の確認:\x20','url','playerNameClassChange','MONITOR_RESET','msg.rated','msg.nonrated','This\x20game\x20belongs\x20to:\x20\x22','getFinalMove','handleMonitorMove','seconds','#000000','#666666','name-left','code.G030','[##STUDY]','door','code.G031','\x20disconnected.','さんの接続が切れました。','msg.opponent_disconnect','<p></p>','disconnectTimer','since_disconnect','sec','span#disconnectCount','<input\x20id=\x22disconnectDeclareButton\x22\x20type=\x22button\x22\x20value=\x22','\x22\x20style=\x22height:20px;margin-left:5px\x22>','#disconnectDeclareButton','\x20CREATED\x20[','STUDY\x20ROOM','検討室',']を作成しました。','chatLobby','isMyRoom','GAME\x20STARTED','新規対局','\x20vs\x20','\x20対\x20','\x20/\x20','setFromStart','\x20has\x20won\x20','さんが通算','\x20games!','勝を達成しました!','10-sec\x20Shogi','10秒将棋','\x20is\x20promoted\x20to\x20','\x20class\x20in\x20','さん、','\x20に昇格!!','#DD7700','#550066','#888888','#0033DD','handleGrab','addArrow','OUT','input[name=kifuModeRadio]:eq(1)','Study\x20Host\x20status\x20given\x20to\x20','感想戦ホストは、','さんに引き継がれました。','msg.subhost_given'];(function(_0x43e6f6,_0x3443c8){var _0x10a8f6=function(_0xdd7182){while(--_0xdd7182){_0x43e6f6['push'](_0x43e6f6['shift']());}};_0x10a8f6(++_0x3443c8);}(_0x5806,0x9f));var _0x11ac=function(_0x4b9aa1,_0x533058){_0x4b9aa1=_0x4b9aa1-0x0;var _0x386ece=_0x5806[_0x4b9aa1];return _0x386ece;};'use strict';var testMode=![];const IMAGE_DIRECTORY=_0x11ac('0x0');var args=new Object();var client=null;var apiClient=null;var sp;var currentLayer=0x0;var mileage;var serverGrid;var playerGrid;var waiterGrid;var gameGrid;var watcherGrid;var kifuGrid;var users=new Object();var tournaments=new Object();var playerInfoWindows=new Object();var timeouts=new Object();var _disconnectTimer;var me;var _challengeUser=null;var _gameAccepted=![];var _allowWatcherChat=![];var _greetState=0x0;var premium=0x0;var countries=new Object();var board;var hidden_prm=0x0;var _hourMileCount;var mouseX;var mouseY;var config=null;var infoFetcher=new Object();var options=new Object();var _studyBase=null;var _studyBranchMoves=null;var _studySender=null;var _sendStudyBuffer=null;var _opponentDisconnectCount=0x0;var _dialogOnBoardClose=![];var _worldClocks=[];var _loginHistory=[];var hostPlayerName=null;function _testFunction(_0x3de45e){if(_0x3de45e==0x0){if(!![]){board[_0x11ac('0x1')]();_switchLayer(0x2);return;}_handleServers([{'id':0x1,'name':_0x11ac('0x2'),'description_en':_0x11ac('0x3'),'description_ja':_0x11ac('0x4'),'enabled':!![],'population':0x0,'host':_0x11ac('0x5'),'port':0xff4}]);}else if(_0x3de45e==0x1){_loginButtonClick();}else if(_0x3de45e==0x2){}}$(function(){if(location[_0x11ac('0x6')]!=''){location[_0x11ac('0x6')][_0x11ac('0x7')](0x1)[_0x11ac('0x8')]('&')[_0x11ac('0x9')](function(_0x1cc5c5){let _0x4f77c0=_0x1cc5c5[_0x11ac('0x8')]('=');args[_0x4f77c0[0x0]]=_0x4f77c0[0x1];});}$(_0x11ac('0xa'))[_0x11ac('0xb')](_0x11ac('0xc')+version);board=new Board($(_0x11ac('0xd')));let _0xd5e64a=new XMLHttpRequest();_0xd5e64a[_0x11ac('0xe')](_0x11ac('0xf'),function(){_0xd5e64a[_0x11ac('0x10')][_0x11ac('0x8')]('\x0a')[_0x11ac('0x9')](function(_0x48ba9c){let _0x304aa8=_0x48ba9c[_0x11ac('0x8')]('\x09');countries[_0x304aa8[0x0]]=new Country(parseInt(_0x304aa8[0x0]),_0x304aa8[0x1],_0x304aa8[0x4],_0x304aa8[0x2]);});});_0xd5e64a['open'](_0x11ac('0x11'),_0x11ac('0x12'));_0xd5e64a[_0x11ac('0x13')]();infoFetcher={'titleNames':new Object(),'titleNameTips':new Object(),'titleAvatars':new Object(),'banned':[]};let _0x31ca4f=new XMLHttpRequest();_0x31ca4f[_0x11ac('0xe')](_0x11ac('0xf'),function(){let _0x5d9918='';_0x31ca4f['responseText']['split']('\x0a')[_0x11ac('0x9')](function(_0x5a6ac1){if(_0x5a6ac1[_0x11ac('0x14')](/^###(.+)$/)){_0x5d9918=RegExp['$1'];}else{switch(_0x5d9918){case _0x11ac('0x15'):let _0x212fad=_0x5a6ac1[_0x11ac('0x8')]('\x09');infoFetcher[_0x11ac('0x16')][_0x212fad[0x0]]=_0x212fad[0x1];infoFetcher['titleNameTips'][_0x212fad[0x0]]=_0x212fad[0x2];infoFetcher[_0x11ac('0x17')][_0x212fad[0x0]]=_0x212fad[0x3];break;case _0x11ac('0x18'):infoFetcher[_0x11ac('0x19')][_0x11ac('0x1a')](_0x5a6ac1[_0x11ac('0x1b')]());}}});});_0x31ca4f[_0x11ac('0x1c')](_0x11ac('0x11'),_0x11ac('0x1d')+version);_0x31ca4f[_0x11ac('0x13')]();sp=new SoundPlayer();$['getJSON'](_0x11ac('0x1e')+new Date()['getTime'](),function(_0x3369ef){config=_0x3369ef;if(config[_0x11ac('0x1f')]==![])debugLoop();});i18next[_0x11ac('0x20')]=localStorage[_0x11ac('0x21')]||args[_0x11ac('0x21')]||'ja';i18next[_0x11ac('0x22')](i18nextXHRBackend)[_0x11ac('0x23')]({'lng':localStorage[_0x11ac('0x21')]||args[_0x11ac('0x21')]||'ja','fallbackLng':args[_0x11ac('0x21')]||'ja','debug':!![],'backend':{'loadPath':'locales/{{lng}}.json?'+version}},function(_0x3f9237,_0xe4c34c){_updateLanguage();});i18next['on'](_0x11ac('0x24'),()=>{_updateLanguage();});$['fn'][_0x11ac('0x25')][_0x11ac('0x26')][_0x11ac('0x27')]=function(_0x5d57d6,_0x5ea5f3){_0x5d57d6=User[_0x11ac('0x28')](_0x5d57d6);_0x5ea5f3=User['rateStrToRate'](_0x5ea5f3);return _0x5d57d6<_0x5ea5f3?-0x1:_0x5d57d6>_0x5ea5f3?0x1:0x0;};$['fn'][_0x11ac('0x25')]['oSort'][_0x11ac('0x29')]=function(_0x36a20e,_0x6778b1){_0x36a20e=User['rateStrToRate'](_0x36a20e);_0x6778b1=User['rateStrToRate'](_0x6778b1);return _0x36a20e<_0x6778b1?0x1:_0x36a20e>_0x6778b1?-0x1:0x0;};serverGrid=$(_0x11ac('0x2a'))[_0x11ac('0x2b')]({'data':[],'columns':[{'data':'name','width':'35%','className':_0x11ac('0x2c'),'bSortable':![],'render':function(_0x53edd7){return _0x11ac('0x2d')+_0x53edd7+_0x11ac('0x2e')+_0x53edd7;}},{'width':'35%','bSortable':![],'render':function(_0x39fbf1,_0x490e13,_0x41c245){return EJ(_0x41c245[_0x11ac('0x2f')],_0x41c245[_0x11ac('0x30')]);}},{'data':_0x11ac('0x31'),'width':_0x11ac('0x32'),'bSortable':![]}],'rowId':_0x11ac('0x33'),'searching':![],'paging':![],'info':![],'order':![],'select':_0x11ac('0x34'),'oLanguage':{'sEmptyTable':EJ(_0x11ac('0x35'),_0x11ac('0x36'))}});serverGrid[_0x11ac('0x37')]();playerGrid=$(_0x11ac('0x38'))[_0x11ac('0x2b')]({'data':[],'columns':[{'data':'statStr','width':'10%'},{'data':_0x11ac('0x39'),'width':_0x11ac('0x3a')},{'data':_0x11ac('0x3b'),'width':_0x11ac('0x3a'),'bSortable':![]},{'data':_0x11ac('0x3c'),'width':_0x11ac('0x3d'),'className':_0x11ac('0x2c')},{'data':_0x11ac('0x3e'),'width':_0x11ac('0x3f'),'className':'dt-body-left'},{'data':_0x11ac('0x40'),'width':_0x11ac('0x41'),'className':_0x11ac('0x42'),'type':_0x11ac('0x43')}],'rowId':_0x11ac('0x33'),'searching':![],'paging':![],'info':![],'select':_0x11ac('0x34'),'order':[[0x5,_0x11ac('0x44')]],'scrollY':!![]});playerGrid[_0x11ac('0x37')]();$(_0x11ac('0x45'))['on']('dblclick','tr',function(){_openPlayerInfo(users[playerGrid['row'](this)['id']()]);});playerGrid['on'](_0x11ac('0x46'),function(_0x28cdf9,_0xfb5f26,_0x597a87,_0x317829,_0x15e9c7){if($(_0x317829[_0x11ac('0x47')]())['parent']()['hasClass'](_0x11ac('0x48'))){_0x28cdf9[_0x11ac('0x49')]();}else{_playerSelected(playerGrid,_0x317829[_0x11ac('0x4a')]()[_0x11ac('0x4b')]);}});waiterGrid=$(_0x11ac('0x4c'))['DataTable']({'data':[],'columns':[{'data':_0x11ac('0x4d'),'width':_0x11ac('0x4e'),'className':_0x11ac('0x2c')},{'data':_0x11ac('0x40'),'width':_0x11ac('0x41'),'className':'dt-body-right','type':_0x11ac('0x43')},{'data':_0x11ac('0x4f'),'width':'27%'},{'data':_0x11ac('0x50'),'width':_0x11ac('0x51')}],'rowId':_0x11ac('0x33'),'searching':![],'paging':![],'info':![],'select':'single','order':[[0x1,_0x11ac('0x44')]],'scrollY':!![]});waiterGrid[_0x11ac('0x37')]();$(_0x11ac('0x52'))['on'](_0x11ac('0x53'),'tr',function(){_openPlayerInfo(users[waiterGrid[_0x11ac('0x4b')](this)['id']()]);});waiterGrid['on'](_0x11ac('0x46'),function(_0x77a8cb,_0x2ed691,_0x105297,_0x4c0d12,_0x379293){if($(_0x4c0d12[_0x11ac('0x47')]())[_0x11ac('0x54')]()[_0x11ac('0x55')](_0x11ac('0x48'))){_0x77a8cb[_0x11ac('0x49')]();}else{_playerSelected(waiterGrid,_0x4c0d12[_0x11ac('0x4a')]()[_0x11ac('0x4b')]);}});gameGrid=$(_0x11ac('0x56'))[_0x11ac('0x2b')]({'data':[],'columns':[{'data':_0x11ac('0x57'),'width':_0x11ac('0x58'),'className':_0x11ac('0x2c'),'bSortable':![]},{'data':_0x11ac('0x59'),'width':_0x11ac('0x58'),'className':_0x11ac('0x42'),'bSortable':![]},{'data':_0x11ac('0x5a'),'width':_0x11ac('0x5b'),'bSortable':![]},{'data':_0x11ac('0x5c'),'width':'7%','bSortable':![]},{'data':'watchersStr','width':'7%','bSortable':![]},{'data':_0x11ac('0x5d'),'width':_0x11ac('0x3f'),'bSortable':![]},{'data':'maxRate','width':'0%','visible':![]}],'rowId':_0x11ac('0x5e'),'searching':![],'paging':![],'info':![],'select':_0x11ac('0x34'),'order':[[0x6,_0x11ac('0x44')]],'scrollY':!![]});gameGrid[_0x11ac('0x37')]();$(_0x11ac('0x5f'))['on'](_0x11ac('0x53'),'tr',function(){_enterGame(gameGrid[_0x11ac('0x4b')](this)[_0x11ac('0x60')]());});watcherGrid=$(_0x11ac('0x61'))[_0x11ac('0x2b')]({'data':[],'columns':[{'name':_0x11ac('0x62'),'data':_0x11ac('0x63'),'width':_0x11ac('0x64'),'className':_0x11ac('0x2c')},{'data':_0x11ac('0x3e'),'width':_0x11ac('0x65'),'className':_0x11ac('0x2c')},{'data':_0x11ac('0x40'),'width':_0x11ac('0x66'),'className':_0x11ac('0x42'),'type':_0x11ac('0x43')}],'rowId':_0x11ac('0x33'),'searching':![],'paging':![],'info':![],'select':_0x11ac('0x34'),'order':[[0x2,_0x11ac('0x44')]],'scrollY':!![]});watcherGrid[_0x11ac('0x37')]();$(_0x11ac('0x67'))['on'](_0x11ac('0x53'),'tr',function(){_openPlayerInfo(users[watcherGrid[_0x11ac('0x4b')](this)['id']()]);});kifuGrid=$(_0x11ac('0x68'))[_0x11ac('0x2b')]({'data':[],'columns':[{'data':'numStr','width':_0x11ac('0x69'),'bSortable':![]},{'data':_0x11ac('0x6a'),'width':_0x11ac('0x6b'),'className':_0x11ac('0x2c'),'bSortable':![]},{'data':_0x11ac('0x50'),'width':_0x11ac('0x65'),'className':_0x11ac('0x42'),'bSortable':![]}],'searching':![],'paging':![],'info':![],'select':'api','scrollY':!![],'order':![]});kifuGrid['clear']();kifuGrid['on'](_0x11ac('0x46'),function(_0x4f5134,_0x536345,_0x2aeaaa,_0x284ec9,_0x3dfd57){if($(_0x284ec9[_0x11ac('0x47')]())[_0x11ac('0x54')]()[_0x11ac('0x55')](_0x11ac('0x48'))){_0x4f5134[_0x11ac('0x49')]();}else{_kifuSelected(_0x284ec9[_0x11ac('0x4a')]()['row']);}});$(_0x11ac('0x6c'))['hide']();$(_0x11ac('0x6d'))[_0x11ac('0x6e')](function(){if($(this)[_0x11ac('0x6f')]('a')[_0x11ac('0x55')](_0x11ac('0x70')))return;$(_0x11ac('0x71'),this)['css']('min-width',$(this)[_0x11ac('0x72')]())[_0x11ac('0x73')]();},function(){$('ul',this)[_0x11ac('0x74')]();});$(_0x11ac('0x6c'))['find']('a')[_0x11ac('0x75')](function(){$(this)[_0x11ac('0x76')]('ul')[_0x11ac('0x74')](_0x11ac('0x77'));});_generateWorldClocks();_switchLayer(0x0);_fadeInLoginView();if(localStorage[_0x11ac('0x78')])$('#usernameInput')[_0x11ac('0x79')](localStorage[_0x11ac('0x78')]);if(localStorage[_0x11ac('0x7a')]){$(_0x11ac('0x7b'))[_0x11ac('0x79')](decaesar(decaesar(localStorage[_0x11ac('0x7a')],0x51),0x3));$('#hiddenPass')['val'](decaesar(decaesar(localStorage[_0x11ac('0x7a')],0x51),0x3));maskPass();}if(localStorage[_0x11ac('0x7c')])_loginHistory=decaesar(decaesar(localStorage[_0x11ac('0x7c')],0x51),0x3)['split'](',');if(localStorage['save'])$(_0x11ac('0x7d'))['prop'](_0x11ac('0x7e'),localStorage[_0x11ac('0x7f')]=='true');$(_0x11ac('0x80'))[_0x11ac('0x79')](localStorage[_0x11ac('0x21')]||args[_0x11ac('0x21')]||'ja');if(localStorage[_0x11ac('0x81')]){$(_0x11ac('0x82'))[_0x11ac('0x83')](_0x11ac('0x7e'),localStorage[_0x11ac('0x81')]==_0x11ac('0x84'));sp['muteOpening'](!(localStorage['openingMusic']==_0x11ac('0x84')));}$(_0x11ac('0x85'))[_0x11ac('0x86')]({'autoFocus':!![],'minLength':0x2,'delay':0x0,'select':function(_0x5a0b08,_0x51073c){let _0x49378a=_0x51073c[_0x11ac('0x87')][_0x11ac('0x88')];if(users[_0x49378a]){playerGrid[_0x11ac('0x4b')]('#'+_0x49378a)[_0x11ac('0x89')]();scrollGridToSelected(playerGrid);_playerSelected(playerGrid,playerGrid[_0x11ac('0x4b')]({'selected':!![]})[_0x11ac('0x4a')]());}else{writeUserMessage(i18next['t'](_0x11ac('0x8a')),0x1,_0x11ac('0x8b'));}}});window[_0x11ac('0x8c')]=function(){if(board['isPlaying']()&&!testMode&&board[_0x11ac('0x8d')]['isRated']())client[_0x11ac('0x8e')](_0x11ac('0x8f'));};window[_0x11ac('0x90')]=function(){if(board[_0x11ac('0x91')]()&&!testMode&&board[_0x11ac('0x8d')][_0x11ac('0x92')]())client[_0x11ac('0x8e')](_0x11ac('0x93'));};$(window)['on'](_0x11ac('0x94'),function(_0x1ee8c4){if(board['isPlaying']()){writeUserMessage(_0x11ac('0x95'),0x2,_0x11ac('0x8b'));return'You\x20are\x20player.\x20Exit\x20the\x20room\x20before\x20closing\x20the\x20browser.';}});$(window)[_0x11ac('0x96')](function(){if(board['isHost']())_giveHostButtonClick();});document[_0x11ac('0x97')](_0x11ac('0x98'))['ondragstart']=function(){return![];};$(_0x11ac('0x99'))['on'](_0x11ac('0x9a'),function(_0xb43a7a){if(_0xb43a7a['keyCode']==0xd){if($(this)['val']()[_0x11ac('0x9b')]>0x0){client['chat']($(this)['val']());$(this)[_0x11ac('0x79')]('');}}});$('#boardChatInput')['on'](_0x11ac('0x9a'),function(_0x4aaa25){if(_0x4aaa25[_0x11ac('0x9c')]==0xd){if($(this)[_0x11ac('0x79')]()[_0x11ac('0x9b')]>0x0){clearGeneralTimeout(_0x11ac('0x9d'));client[_0x11ac('0x8e')]($(this)[_0x11ac('0x79')]());$(this)['val']('');}}else if(board[_0x11ac('0x9e')]()){if(_0x4aaa25[_0x11ac('0x9c')]==0x8){if($(this)[_0x11ac('0x79')]()=='')clearGeneralTimeout('SEND_TYPE');}else{if($(this)[_0x11ac('0x79')]()[_0x11ac('0x9b')]>0x0)setGeneralTimeout(_0x11ac('0x9d'),0x9c4);}}});$(_0x11ac('0x7b'))[_0x11ac('0x9f')]();window[_0x11ac('0xa0')]=function(_0x247631){_0x247631=_0x247631||window[_0x11ac('0xa1')];mouseX=_0x247631['clientX'];mouseY=_0x247631[_0x11ac('0xa2')];};$(_0x11ac('0x85'))['on'](_0x11ac('0xa3'),function(){$(this)[_0x11ac('0x79')]('');});_resize();_loadDefaultOptions();apiClient=new WebSystemApiClient(_0x11ac('0xa4'),0x50);apiClient[_0x11ac('0xa5')](_0x11ac('0xa6'),_handleServers);apiClient[_0x11ac('0xa5')]('OPTIONS',_handleOptions);apiClient[_0x11ac('0xa5')](_0x11ac('0xa7'),_handlePlayerDetail);apiClient[_0x11ac('0xa5')](_0x11ac('0xa8'),_handleTournaments);apiClient['setCallbackFunctions']('CHECK_OPPONENT',_handleCheckOpponent);apiClient[_0x11ac('0xa5')](_0x11ac('0xa9'),_handleEvaluation);if(testMode){_testFunction(0x0);}else{_prepareForLogin();}});window[_0x11ac('0xaa')]=function(){_resize();};function _resize(){$('#layerLobby')[_0x11ac('0x6f')](_0x11ac('0xab'))[_0x11ac('0x6f')](_0x11ac('0xac'))['css'](_0x11ac('0xad'),window[_0x11ac('0xae')]/9.5);$(_0x11ac('0xaf'))[_0x11ac('0x6f')](_0x11ac('0xab'))[_0x11ac('0x6f')](_0x11ac('0xac'))[_0x11ac('0xb0')](_0x11ac('0xad'),window[_0x11ac('0xae')]/12.5);if(window[_0x11ac('0xae')]>0x60e){$(_0x11ac('0xb1'))[_0x11ac('0xb2')]($('#playerListBox'))[_0x11ac('0xb0')](_0x11ac('0xb3'),_0x11ac('0xb4'));}else{$(_0x11ac('0xb1'))[_0x11ac('0xb2')]($(_0x11ac('0xb5')))[_0x11ac('0xb0')](_0x11ac('0xb3'),_0x11ac('0xb6'));}if(window[_0x11ac('0xae')]>=board[_0x11ac('0xb7')]()+0x190&&window[_0x11ac('0xb8')]<board[_0x11ac('0xb9')]()+0xe6){$(_0x11ac('0xba'))[_0x11ac('0xbb')]($(_0x11ac('0xbc')));$(_0x11ac('0xbd'))['insertAfter']($(_0x11ac('0xbe')));}else{$(_0x11ac('0xbd'))[_0x11ac('0xbf')]($(_0x11ac('0xc0')));$(_0x11ac('0xba'))[_0x11ac('0xb2')]($('#watcherBox'));}$(_0x11ac('0xc1'))[_0x11ac('0xc2')](function(){$(this)[_0x11ac('0x6f')](_0x11ac('0xc3'))[_0x11ac('0xb0')](_0x11ac('0xc4'),$(this)['height']()-$(this)[_0x11ac('0x6f')]($(_0x11ac('0xc5')))[_0x11ac('0xc4')]());});}function _fadeInLoginView(){$(_0x11ac('0xc6'))[_0x11ac('0xb0')](_0x11ac('0xc7'),0x0)['animate']({'opacity':0x1},testMode?0x0:0xbb8);}function _prepareForLogin(){sp['startOpening']();$(_0x11ac('0xc8'))[_0x11ac('0x83')](_0x11ac('0xc9'),!![]);serverGrid[_0x11ac('0x37')]()[_0x11ac('0xca')]();$(_0x11ac('0xcb'))[_0x11ac('0xb')]('');apiClient[_0x11ac('0xcc')]();}function _languageSelected(){i18next['changeLanguage']($('#languageSelector')[_0x11ac('0x79')]());localStorage['locale']=$('#languageSelector')[_0x11ac('0x79')]();}function _updateLanguage(){serverGrid[_0x11ac('0xcd')]()[_0x11ac('0xce')]();playerGrid[_0x11ac('0xcf')]()[0x0][_0x11ac('0xd0')]['sEmptyTable']=i18next['t'](_0x11ac('0xd1'));playerGrid['draw']();waiterGrid[_0x11ac('0xcf')]()[0x0][_0x11ac('0xd0')][_0x11ac('0xd2')]=i18next['t'](_0x11ac('0xd1'));waiterGrid[_0x11ac('0xca')]();gameGrid['settings']()[0x0]['oLanguage'][_0x11ac('0xd2')]=i18next['t']('loading');gameGrid[_0x11ac('0xca')]();watcherGrid['settings']()[0x0][_0x11ac('0xd0')][_0x11ac('0xd2')]=i18next['t'](_0x11ac('0xd3'));watcherGrid[_0x11ac('0xca')]();$(_0x11ac('0xd4'))['html'](countries[$(_0x11ac('0xd5'))[_0x11ac('0x60')](_0x11ac('0xd6'))][_0x11ac('0xd7')]());$(_0x11ac('0xcb'))['text']('');$('[data-i18n]')['each'](function(){$(this)[_0x11ac('0xb')](i18next['t']($(this)[_0x11ac('0xd8')]('data-i18n')));});$(_0x11ac('0xd9'))[_0x11ac('0xc2')](function(){$(this)[_0x11ac('0x79')](i18next['t']($(this)['attr'](_0x11ac('0xda'))));});$('[data-i18n-title]')[_0x11ac('0xc2')](function(){$(this)['attr']('title',i18next['t']($(this)['attr'](_0x11ac('0xdb'))));});$(_0x11ac('0xdc'))['empty']();let _0x371ee4=i18next['language']=='ja'?HANDICAPS_JA:HANDICAPS_EN;Object['keys'](_0x371ee4)[_0x11ac('0x9')](function(_0x5a1f4d){if(_0x5a1f4d=='r'||_0x5a1f4d[_0x11ac('0x14')](/^va/))return!![];$(_0x11ac('0xdc'))['append']($(_0x11ac('0xdd'))[_0x11ac('0x79')](_0x5a1f4d)[_0x11ac('0xb')](_0x371ee4[_0x5a1f4d]));});$(_0x11ac('0xde'))[_0x11ac('0xc2')](function(){$(this)[_0x11ac('0xdf')](_0x11ac('0xe0'),_0x11ac('0x39'),i18next['t']($(this)['attr'](_0x11ac('0xdb'))));$(this)[_0x11ac('0x83')](_0x11ac('0x39'),'');});$(_0x11ac('0xe1'))[_0x11ac('0xc2')](function(){$(this)[_0x11ac('0xe2')](_0x11ac('0xe0'),_0x11ac('0xe3'),i18next['t']($(this)['attr']('id')['split']('-')[0x1]));});$(_0x11ac('0x7b'))[_0x11ac('0x9f')]();}function _openingMusicCheckBoxClick(){localStorage[_0x11ac('0x81')]=$(_0x11ac('0x82'))['prop'](_0x11ac('0x7e'));sp['muteOpening'](!$(_0x11ac('0x82'))[_0x11ac('0x83')](_0x11ac('0x7e')));}function _loginTypeChange(){$(_0x11ac('0xe4'))[_0x11ac('0xd8')](_0x11ac('0xc9'),$(_0x11ac('0xe5'))[_0x11ac('0x79')]()==0x1);}function _loginButtonClick(){$('#passwordInput')['tooltip'](_0x11ac('0xe6'));let _0x452d3b=serverGrid[_0x11ac('0x4b')]({'selected':!![]})[_0x11ac('0x60')]();if(_0x452d3b==null){alert(_0x11ac('0xe7'));return;}if(_bannedLoginInHistory())return;$(_0x11ac('0xe8'))[_0x11ac('0xd8')](_0x11ac('0xc9'),!![]);if(client!=null)client[_0x11ac('0xe6')]();$(_0x11ac('0xe9'))[_0x11ac('0xb')](i18next['t']('login.connecting'));let _0x344bec=$(_0x11ac('0xe5'))[_0x11ac('0x79')]()==0x1;client=new WebSocketClient(_0x452d3b[_0x11ac('0x33')],_0x452d3b[_0x11ac('0xea')],_0x452d3b[_0x11ac('0xeb')],_0x344bec?_0x11ac('0xec'):$('#usernameInput')[_0x11ac('0x79')](),_0x344bec?_0x11ac('0xed'):$(_0x11ac('0xee'))[_0x11ac('0x79')]());client[_0x11ac('0xa5')]('LOGGED_IN',_handleLoggedIn);client[_0x11ac('0xa5')]('LOGIN_FAILED',_handleLoginFailed);client[_0x11ac('0xa5')](_0x11ac('0xef'),_handleLobbyIn);client[_0x11ac('0xa5')](_0x11ac('0xf0'),_handleLobbyOut);client['setCallbackFunctions'](_0x11ac('0xf1'),_handleChat);client[_0x11ac('0xa5')](_0x11ac('0xf2'),_handleGameChat);client['setCallbackFunctions'](_0x11ac('0xf3'),_handlePrivateChat);client['setCallbackFunctions']('MOVE',_handleMove);client['setCallbackFunctions'](_0x11ac('0xf4'),_handleGameEnd);client['setCallbackFunctions'](_0x11ac('0xf5'),_handleGeneralResponse);client[_0x11ac('0xa5')](_0x11ac('0xf6'),_handleClosed);client['setCallbackFunctions'](_0x11ac('0xf7'),_handleWho);client[_0x11ac('0xa5')]('LIST',_handleList);client['setCallbackFunctions'](_0x11ac('0xf8'),_handleWatchers);client[_0x11ac('0xa5')]('GAME',_handleGame);client[_0x11ac('0xa5')](_0x11ac('0xf9'),_handleChallenger);client['setCallbackFunctions']('ACCEPT',_handleAccept);client[_0x11ac('0xa5')](_0x11ac('0xfa'),_handleDecline);client[_0x11ac('0xa5')](_0x11ac('0xfb'),_handleGameSummary);client[_0x11ac('0xa5')](_0x11ac('0xfc'),_handleStart);client[_0x11ac('0xa5')](_0x11ac('0xfd'),_handleResult);client[_0x11ac('0xa5')](_0x11ac('0xfe'),_handleMonitor);client['setCallbackFunctions'](_0x11ac('0xff'),_handleReconnect);client[_0x11ac('0xa5')](_0x11ac('0x100'),_handleMile);client[_0x11ac('0xa5')](_0x11ac('0x101'),_handleExp);client[_0x11ac('0xa5')](_0x11ac('0x102'),_handleWins);client[_0x11ac('0xa5')](_0x11ac('0x103'),_handleEnter);client[_0x11ac('0xa5')](_0x11ac('0x104'),_handleLeave);client[_0x11ac('0xa5')](_0x11ac('0x105'),_handleDisconnect);client[_0x11ac('0x106')]();}function _reloginButtonClick(){$(_0x11ac('0x107'))[_0x11ac('0xb0')](_0x11ac('0x108'),'none');$(_0x11ac('0x109'))[_0x11ac('0x83')]('src',_0x11ac('0x10a'));_prepareForLogin();_fadeInLoginView();}function _bannedLoginInHistory(){for(let _0x514b46=0x0;_0x514b46<_loginHistory[_0x11ac('0x9b')];_0x514b46++){if(infoFetcher[_0x11ac('0x19')]['includes'](_loginHistory[_0x514b46]))return!![];}return![];}function _logoutButtonClick(){$(_0x11ac('0x109'))['prop']('src',_0x11ac('0x10b'));_backToEntrance();client[_0x11ac('0xe6')]();}function _refreshButtonClick(){_refreshLobby();$(_0x11ac('0x10c'))[_0x11ac('0x10d')](_0x11ac('0x70'));setGeneralTimeout(_0x11ac('0x10e'),0x2710);}function _waitButtonClick(){_disableNewGameOptions(me[_0x11ac('0x10f')]);$(_0x11ac('0x110'))[_0x11ac('0xdf')](_0x11ac('0x1c'));}function _navigateToWebSystem(_0x16fea2){window[_0x11ac('0x1c')](_0x11ac('0x111')+EJ('en','ja')+'/'+_0x16fea2,_0x11ac('0x112'));}function _playerSelected(_0x5d21b2,_0x4e4285){let _0x3a5f73=_0x5d21b2==playerGrid?waiterGrid:playerGrid;let _0x27b156=_0x5d21b2[_0x11ac('0x4b')](_0x4e4285)[_0x11ac('0x60')]()[_0x11ac('0x33')];_0x3a5f73[_0x11ac('0xcd')]()['deselect']();_0x3a5f73['row']('#'+_0x27b156)[_0x11ac('0x89')]();scrollGridToSelected(_0x3a5f73);gameGrid[_0x11ac('0xcd')]()[_0x11ac('0x113')]();let _0x964d93=_findGameByUser(users[_0x27b156]);if(_0x964d93){gameGrid['row']('#'+_0x964d93[_0x11ac('0x5e')])[_0x11ac('0x89')]();scrollGridToSelected(gameGrid);}$(_0x11ac('0x85'))['val']('');}function _enterGame(_0x44a77e){if(_0x44a77e[_0x11ac('0x114')]()){let _0x3828fe=prompt(i18next['t']('lobby.require_pass'));if(_0x3828fe!=null&&_0x3828fe!=''){_0x44a77e['enterPass'](_0x3828fe);_enterGame(_0x44a77e);}return;}if(board['game'])return;if(_0x44a77e[_0x11ac('0x115')]()){writeUserMessage(EJ('This\x20game\x20rule\x20is\x20not\x20supported\x20by\x20HTML\x20client\x20yet.',_0x11ac('0x116')),0x1,_0x11ac('0x117'));return;}board[_0x11ac('0x118')](_0x44a77e);if(!_0x44a77e[_0x11ac('0x5e')][_0x11ac('0x14')](/^STUDY/)&&board[_0x11ac('0x119')](me[_0x11ac('0x33')])!=null){if(me[_0x11ac('0x11a')]==0x1){writeUserMessage(i18next['t'](_0x11ac('0x11b')),0x1,'#008800',!![]);board['close']();}else{client[_0x11ac('0x11c')](_0x44a77e[_0x11ac('0x5e')]);client[_0x11ac('0x11d')](_0x44a77e[_0x11ac('0x5e')]);}}else{client[_0x11ac('0x11c')](_0x44a77e['gameId']);client['monitor'](_0x44a77e[_0x11ac('0x5e')],!![]);}}function _enterGameById(_0x21e916){let _0x13d2c6=gameGrid[_0x11ac('0x4b')]('#'+_0x21e916);if(_0x13d2c6!=null)_enterGame(_0x13d2c6[_0x11ac('0x60')]());}function writeUserMessage(_0x455280,_0x1c3529,_0x5031b8=null,_0x5240e2=![],_0x264a52=!![]){let _0x2144f5;let _0x179c1d;if(_0x1c3529==0x1){_0x2144f5=$(_0x11ac('0x11e'));}else if(_0x1c3529==0x2){_0x2144f5=$(_0x11ac('0x11f'));_0x179c1d=$(_0x11ac('0x120'));if(_0x179c1d[_0x11ac('0x9b')])_0x179c1d[_0x11ac('0x121')]();}_0x455280=_0x455280[_0x11ac('0x122')](/</g,_0x11ac('0x123'));_0x455280=_0x455280['replace'](/&lt;sPAn/g,_0x11ac('0x124'));_0x455280=_0x455280[_0x11ac('0x122')](/&lt;\/SpaN>/g,_0x11ac('0x125'));_0x455280=_0x455280[_0x11ac('0x122')](/(https?\:\/\/[^\"^\s^\\^\)^\(]+)/g,_0x11ac('0x126'));_0x455280=_0x455280[_0x11ac('0x122')](/\n/g,'<br>&emsp;');$(_0x11ac('0x127'),{})[_0x11ac('0xb0')]({'color':_0x5031b8?_0x5031b8:'','font-weight':_0x5240e2?_0x11ac('0x128'):''})['html'](_0x455280)[_0x11ac('0x129')](_0x2144f5);if(_0x264a52)_0x2144f5[_0x11ac('0x12a')]('<br>');if(_0x179c1d&&_0x179c1d['length'])_0x179c1d[_0x11ac('0x129')](_0x2144f5);if(_0x2144f5[_0x11ac('0x12b')]()+_0x2144f5[_0x11ac('0xc4')]()>_0x2144f5[0x0][_0x11ac('0x12c')]-0x50)_0x2144f5[_0x11ac('0x12d')]({'scrollTop':_0x2144f5[0x0][_0x11ac('0x12c')]},'fast');}function _interpretCommunicationCode(_0x4e1aa2,_0x3dfba9,_0x50d755,_0x4af6ce,_0x2f339a){writeUserMessage(_0x4e1aa2+i18next['t'](_0x11ac('0x12e')+_0x3dfba9),_0x50d755,_0x11ac('0x12f'),_0x4af6ce);if(_0x2f339a)sp[_0x11ac('0x130')]();}function _checkLobbyButtonClick(_0x2138bd=![]){if($(_0x11ac('0x131'))[_0x11ac('0xb0')](_0x11ac('0x132'))==_0x11ac('0x133')){$(_0x11ac('0x134'))[_0x11ac('0x10d')]('button-disabled');$(_0x11ac('0x131'))[_0x11ac('0xb0')]('pointer-events',_0x11ac('0xb4'))[_0x11ac('0x12d')]({'opacity':0x1},_0x2138bd?0x0:0x4b0);$(_0x11ac('0xaf'))[_0x11ac('0x12d')]({'height':'100%'},_0x2138bd?0x0:0x4b0,function(){$(_0x11ac('0xaf'))[_0x11ac('0xb0')]('border-bottom',_0x11ac('0x133'));$(_0x11ac('0x134'))[_0x11ac('0x135')]('button-disabled');$(_0x11ac('0x134'))[_0x11ac('0x136')](_0x11ac('0x137'));});}else if(!_0x2138bd){$(_0x11ac('0x134'))[_0x11ac('0x10d')](_0x11ac('0x70'));$(_0x11ac('0x131'))[_0x11ac('0xb0')](_0x11ac('0x132'),_0x11ac('0x133'))[_0x11ac('0x12d')]({'opacity':0x0},0x4b0);$(_0x11ac('0xaf'))[_0x11ac('0xb0')](_0x11ac('0x138'),_0x11ac('0x139'))['animate']({'height':_0x11ac('0x13a')},0x4b0,function(){_refreshLobby();$(_0x11ac('0x134'))[_0x11ac('0x135')](_0x11ac('0x70'));$('#checkLobbyButton')[_0x11ac('0x136')](_0x11ac('0x13b'));});}}function _resignButtonClick(){if(board[_0x11ac('0x13c')]==0x0&&board[_0x11ac('0x13d')][_0x11ac('0x13e')]==!![]||board[_0x11ac('0x13c')]==0x1&&board['position'][_0x11ac('0x13e')]==![]){client[_0x11ac('0x8e')]('<(_\x20_)>\x20負けました。(Makemashita.)');client[_0x11ac('0x13f')]();_greetState=0x3;_greetButtonClick();}}function _rematchButtonClick(){if(board['isPlayer']()){if(!board[_0x11ac('0x140')]()){client[_0x11ac('0x8e')](_0x11ac('0x141'));if(_checkGuestGamesExpired())return;}}else{let _0x335fc0='';if(board[_0x11ac('0x8d')][_0x11ac('0x5e')]['split']('+')[0x1][_0x11ac('0x14')](/^([0-9a-z]+?)_(.*)$/)){_0x335fc0=RegExp['$1']+'_@'+RegExp['$2'];}else return;let _0x5d6a5f=gameGrid[_0x11ac('0xcd')](function(_0x32a4aa,_0x1b1560,_0x4f1cd0){return _0x1b1560[_0x11ac('0x5e')]['split']('+')[0x1]==_0x335fc0;});if(_0x5d6a5f){client[_0x11ac('0x142')](board[_0x11ac('0x8d')][_0x11ac('0x5e')],![]);board[_0x11ac('0xe6')]();$(_0x11ac('0x11f'))['empty']();watcherGrid[_0x11ac('0x37')]()['draw']();board[_0x11ac('0x118')](_0x5d6a5f['data']()[0x0]);client['watchers'](board[_0x11ac('0x8d')][_0x11ac('0x5e')]);client[_0x11ac('0x142')](board[_0x11ac('0x8d')][_0x11ac('0x5e')],!![]);}else{writeUserMessage(i18next['t'](_0x11ac('0x143')),0x2,_0x11ac('0x12f'));}}}function _greetButtonClick(){switch(_greetState){case 0x1:client['gameChat'](_0x11ac('0x144'));_greetState=0x2;break;case 0x3:client['gameChat'](_0x11ac('0x145'));_greetState=0x4;break;case 0x4:$(_0x11ac('0x146'))[_0x11ac('0xdf')]('open');break;}}function _sendChatTemplate(_0x2cd17e){client[_0x11ac('0x8e')](_0x11ac('0x147')+_0x2cd17e);}function _flipButtonClick(){board['flipBoard']();}function _impasseButtonClick(){if(board[_0x11ac('0x8d')][_0x11ac('0x115')]())return;$('#modalImpasse')['dialog'](_0x11ac('0x1c'));board[_0x11ac('0x148')]();}function _clearArrowsButtonClick(){if(board[_0x11ac('0x149')]){if(board[_0x11ac('0x14a')](!![],me[_0x11ac('0x33')])){client['gameChat'](_0x11ac('0x14b'));}}else{board['clearArrows'](![]);}}function _giveHostButtonClick(_0x22a3f6=null){if(!board[_0x11ac('0x14c')]())return;if(_0x22a3f6==null){if(!board[_0x11ac('0x8d')][_0x11ac('0x14d')]()){if(board[_0x11ac('0x8d')][_0x11ac('0x14e')][_0x11ac('0x33')]!=me[_0x11ac('0x33')]&&board['isPlayerPresent'](0x1)){_0x22a3f6=board[_0x11ac('0x8d')][_0x11ac('0x14e')];}else if(board[_0x11ac('0x8d')]['black'][_0x11ac('0x33')]!=me['name']&&board['isPlayerPresent'](0x0)){_0x22a3f6=board['game']['black'];}}}if(_0x22a3f6){client[_0x11ac('0x8e')](_0x11ac('0x14f')+_0x22a3f6[_0x11ac('0x33')]);board[_0x11ac('0x150')]=0x1;setBoardConditions();}}function _giveSubhostButtonClick(_0x1eae38){if(_0x1eae38[_0x11ac('0x33')]==me[_0x11ac('0x33')])return;client['gameChat'](_0x11ac('0x151')+_0x1eae38['name']);}function _materialBalanceButtonClick(){let _0x1e82cc=kifuGrid[_0x11ac('0x4b')]({'selected':!![]})[_0x11ac('0x4a')]();if(board[_0x11ac('0x8d')][_0x11ac('0x152')]())writeUserMessage(EJ('Material\x20balance\x20(move\x20#',_0x11ac('0x153'))+_0x1e82cc+EJ('):\u3000',_0x11ac('0x154'))+board[_0x11ac('0x155')](_0x1e82cc<=0x28),0x2,_0x11ac('0x12f'));else writeUserMessage(EJ('This\x20function\x20is\x20only\x20for\x20even\x20games.',_0x11ac('0x156')),0x2,_0x11ac('0x12f'));}function _KyokumenpediaClick(){window['open'](_0x11ac('0x157')+board[_0x11ac('0x13d')][_0x11ac('0x158')](),_0x11ac('0x112'));}function _sharePositionButtonClick(_0x4ed023){if(!board[_0x11ac('0x8d')]['gameType'][_0x11ac('0x14')](/^va/))sharePosition(_0x4ed023);else writeUserMessage(EJ(_0x11ac('0x159'),_0x11ac('0x15a')),0x2,_0x11ac('0x8b'));}function _kifuCopyButtonClick(){let _0x132f31=$(_0x11ac('0x15b'),{'id':_0x11ac('0x15c')})[_0x11ac('0xb')](_generateKIF())[_0x11ac('0x129')]($(_0x11ac('0x15d')));$(_0x11ac('0x15e'))[_0x11ac('0x89')]();document['execCommand'](_0x11ac('0x15f'));$(_0x11ac('0x15e'))[_0x11ac('0x160')]();}function _kifuDownloadButtonClick(){let _0x25339f=Date[_0x11ac('0x161')]();downloadToFile(_generateKIF(),_0x11ac('0x162')+formatDateToText(new Date())+'-'+board[_0x11ac('0x8d')]['black'][_0x11ac('0x33')]+'-'+board[_0x11ac('0x8d')][_0x11ac('0x14e')][_0x11ac('0x33')]+'.kif');}function _kifuNoteButtonClick(){if(board[_0x11ac('0x8d')][_0x11ac('0x14d')]()){writeUserMessage(EJ(_0x11ac('0x163'),_0x11ac('0x164')),0x2,_0x11ac('0x8b'));return;}let _0x1b885c=window[_0x11ac('0x1c')]('./kifu_note.html',_0x11ac('0x165'));if(!_0x1b885c)alert(EJ('New\x20window\x20could\x20not\x20be\x20opened',_0x11ac('0x166')));}function _shareKifuButtonClick(_0x32fbf3){if(board['toKifuURL']()!='')shareKifu(_0x32fbf3);else writeUserMessage(EJ(_0x11ac('0x167'),'この盤面には棋譜URLの設定がありません'),0x2,_0x11ac('0x8b'));}function _uploadKifuButtonClick(){if(board[_0x11ac('0x8d')][_0x11ac('0x14d')]()&&board['isHost']()){let _0x2ef12e=document[_0x11ac('0x168')](_0x11ac('0x169'));_0x2ef12e[_0x11ac('0x16a')]='file';_0x2ef12e[_0x11ac('0xe')]('change',function(_0x5f16a5){let _0x5067aa=_0x5f16a5[_0x11ac('0x16b')][_0x11ac('0x16c')][0x0];let _0x10b7f2=new FileReader();_0x10b7f2[_0x11ac('0x16d')]=function(_0x54b72f){let _0x1a5a0f=[];if(_0x5067aa[_0x11ac('0x33')]['match'](/\.bod$/))_0x1a5a0f=CSALinesFromBOD(_0x54b72f[_0x11ac('0x16b')][_0x11ac('0x16e')]);else if(_0x5067aa[_0x11ac('0x33')][_0x11ac('0x14')](/\.kif$/))_0x1a5a0f=CSALinesFromKIF(_0x54b72f[_0x11ac('0x16b')]['result']);if(_0x1a5a0f[_0x11ac('0x9b')]>0x0)client[_0x11ac('0x16f')](_0x1a5a0f[_0x11ac('0x170')]('/'));};_0x10b7f2[_0x11ac('0x171')](_0x5067aa);},![]);_0x2ef12e[_0x11ac('0x75')]();}}function _optionButtonClick(){$(_0x11ac('0x172'))[_0x11ac('0xdf')](_0x11ac('0x1c'));}function _handleOptionClose(){$(_0x11ac('0x172'))[_0x11ac('0xdf')](_0x11ac('0xe6'));_setOptionsFromDialog();_enforceOptions();}function _playerNameDblClick(_0xcd0aef){_openPlayerInfo(users[_0xcd0aef]);}function _allowWatcherChatClick(){_allowWatcherChat=$('#receiveWatcherChatCheckBox')['is'](':checked');if(_allowWatcherChat)_sendAutoChat(_0x11ac('0x173'));else _sendAutoChat(_0x11ac('0x174'));}function _closeBoard(){if(board[_0x11ac('0x14c')]())_giveHostButtonClick();if(board[_0x11ac('0x9e')]()){client[_0x11ac('0x175')]();_writeAfterCloseBoardMessage();}else if(board['isWatcher']())client[_0x11ac('0x142')](board[_0x11ac('0x8d')][_0x11ac('0x5e')],![]);_checkLobbyButtonClick(!![]);_refreshLobby();_updateHostPlayer(null);board[_0x11ac('0xe6')]();_switchLayer(0x1);$(_0x11ac('0x11f'))[_0x11ac('0x176')]();watcherGrid[_0x11ac('0x37')]()[_0x11ac('0xca')]();kifuGrid[_0x11ac('0x37')]()[_0x11ac('0xca')]();_greetState=0x0;_studyBase=null;_studyBranchMoves=null;_opponentDisconnectCount=0x0;forceKifuMode(0x1);_kifuModeRadioChange();}function _writeAfterCloseBoardMessage(){if(_dialogOnBoardClose){_dialogOnBoardClose=![];writeUserMessage(i18next['t'](_0x11ac('0x177'))+board['toKifuURL'](),0x1,_0x11ac('0x12f'));_askEvaluation(board[_0x11ac('0x178')]()[_0x11ac('0x33')]);if(board[_0x11ac('0x8d')][_0x11ac('0x179')]=='r'){if(!me[_0x11ac('0x17a')]&&isBeforeUpgrade(me['rate']))writeUserMessage(i18next['t'](_0x11ac('0x17b')),0x1,'#FF3388');else if(!me[_0x11ac('0x17a')]&&isBeforeDowngrade(me[_0x11ac('0x40')]))writeUserMessage(i18next['t'](_0x11ac('0x17c')),0x1,_0x11ac('0x17d'));}}}function sendMoveAsPlayer(_0x1d4495){client[_0x11ac('0x17e')](_0x1d4495);board[_0x11ac('0x17f')][_0x11ac('0x1a')](_0x1d4495);}function _kifuModeRadioChange(){if($(_0x11ac('0x180'))[_0x11ac('0x83')](_0x11ac('0x7e'))){if(board[_0x11ac('0x149')]){board[_0x11ac('0x149')]=![];$(_0x11ac('0x181'))[_0x11ac('0x6f')]('.dataTables_scrollBody')[_0x11ac('0x10d')](_0x11ac('0x182'));if(board[_0x11ac('0x183')]())_sendAutoChat(_0x11ac('0x184'));board[_0x11ac('0x185')]();}}else{if(!board[_0x11ac('0x149')]){board[_0x11ac('0x149')]=!![];$(_0x11ac('0x181'))[_0x11ac('0x6f')](_0x11ac('0xc3'))['removeClass'](_0x11ac('0x182'));if(board[_0x11ac('0x183')]())_sendAutoChat(_0x11ac('0x186'));board[_0x11ac('0x14a')](![]);if(board[_0x11ac('0x187')]&&_studyBase!=null)_handleStudy();if(!board[_0x11ac('0x187')]){if(kifuGrid['rows']()['count']()>0x0&&kifuGrid[_0x11ac('0x4b')](':last')[_0x11ac('0x60')]()[_0x11ac('0x188')])_restorePublicKifu();kifuGrid[_0x11ac('0x4b')](_0x11ac('0x189'))[_0x11ac('0x89')]();scrollGridToSelected(kifuGrid);board[_0x11ac('0x18a')](board[_0x11ac('0x17f')]);}board[_0x11ac('0x18b')](!![],!![]);}}board[_0x11ac('0x18c')]();}function forceKifuMode(_0x2798e6){if($(_0x11ac('0x18d')+_0x2798e6+')')[_0x11ac('0x83')](_0x11ac('0x7e'))==![]){$(_0x11ac('0x18d')+_0x2798e6+')')[_0x11ac('0x83')]('checked',!![]);_kifuModeRadioChange();}}function _kifuSelected(_0xa53421){if(kifuGrid[_0x11ac('0x4b')](_0x11ac('0x189'))[_0x11ac('0x60')]()[_0x11ac('0x188')]&&!kifuGrid[_0x11ac('0x4b')](_0xa53421)[_0x11ac('0x60')]()[_0x11ac('0x188')]){_restorePublicKifu();if(board[_0x11ac('0x14c')]())_sendAutoChat(_0x11ac('0x18e'));}board[_0x11ac('0x18a')](kifuGrid[_0x11ac('0xcd')](Array[_0x11ac('0x18f')](Array(_0xa53421+0x1)[_0x11ac('0x190')]()))[_0x11ac('0x60')]());if(board['isHost']()){sendStudy(_0xa53421);}else{forceKifuMode(0x0);}}function _replayButtonClick(_0x44c306){let _0x423b63=kifuGrid[_0x11ac('0x4b')]({'selected':!![]})[_0x11ac('0x4a')]();if(_0x44c306<0x0&&_0x423b63<=0x0)return;if(_0x44c306>0x0&&_0x423b63>=kifuGrid[_0x11ac('0xcd')]()[_0x11ac('0x191')]()-0x1){if(!board[_0x11ac('0x187')]&&!board['onListen']){forceKifuMode(0x1);_kifuModeRadioChange();}return;}switch(_0x44c306){case-0x2:_0x423b63=0x0;break;case-0x1:_0x423b63--;break;case 0x1:_0x423b63++;break;case 0x2:_0x423b63=kifuGrid[_0x11ac('0xcd')]()[_0x11ac('0x191')]()-0x1;break;}kifuGrid[_0x11ac('0x4b')](_0x423b63)[_0x11ac('0x89')]();scrollGridToSelected(kifuGrid);_kifuSelected(_0x423b63);}function _restorePublicKifu(){let _0x3c9e49=kifuGrid[_0x11ac('0x4b')]({'selected':!![]})[_0x11ac('0x4a')]();if(board[_0x11ac('0x17f')]['length']<=0x1)return;kifuGrid[_0x11ac('0x37')]();kifuGrid[_0x11ac('0xcd')]['add'](board[_0x11ac('0x17f')]);kifuGrid['row'](_0x3c9e49)[_0x11ac('0x89')]();drawGridMaintainScroll(kifuGrid);}function _updateHostPlayer(_0x282b67){if(!board[_0x11ac('0x8d')])return;if(_0x282b67==hostPlayerName)return;let _0x46f519=hostPlayerName;hostPlayerName=_0x282b67;board['hostMark'][_0x11ac('0x121')]();if(watcherGrid[_0x11ac('0x4b')]('#'+_0x46f519)[_0x11ac('0x60')]()){watcherGrid['row']('#'+_0x46f519)['data'](users[_0x46f519]['gridObject']());}if(watcherGrid[_0x11ac('0x4b')]('#'+hostPlayerName)['data']()){watcherGrid[_0x11ac('0x4b')]('#'+hostPlayerName)[_0x11ac('0x60')](users[hostPlayerName][_0x11ac('0x192')]());}else if(hostPlayerName==board[_0x11ac('0x8d')][_0x11ac('0x193')][_0x11ac('0x33')]||hostPlayerName==board['game']['white'][_0x11ac('0x33')]){board[_0x11ac('0x194')][hostPlayerName==board[_0x11ac('0x8d')]['black'][_0x11ac('0x33')]?0x0:0x1][_0x11ac('0x6f')](_0x11ac('0x195'))[_0x11ac('0x196')](board[_0x11ac('0x197')]);}}function sendTimeout(){client[_0x11ac('0x198')]();board['pauseAllTimers']();}function setBoardConditions(){if(board['isPlayer']()){$(_0x11ac('0x199'))['addClass']('button-disabled');$(_0x11ac('0x19a'))[_0x11ac('0x83')]('disabled',![]);if(board[_0x11ac('0x187')]){kifuGrid['select'][_0x11ac('0x19b')](_0x11ac('0x34'));$(_0x11ac('0x19c'))[_0x11ac('0x6f')](_0x11ac('0xe2'))[_0x11ac('0x83')]('disabled',![]);$(_0x11ac('0x19d'))[_0x11ac('0x83')]('disabled',board['isHost']());$(_0x11ac('0x19e'))[_0x11ac('0x10d')](_0x11ac('0x70'));$('#clearArrowsButton,\x20#positionMenuButton,\x20#kifuMenuButton,\x20#rematchButton,\x20#closeGameButton')[_0x11ac('0x135')](_0x11ac('0x70'));$(_0x11ac('0x19f'))[_0x11ac('0x83')]({'disabled':!![],'checked':!![]});}else{kifuGrid['select'][_0x11ac('0x19b')]('api');$(_0x11ac('0x19c'))[_0x11ac('0x6f')]('button')[_0x11ac('0x83')]('disabled',!![]);$(_0x11ac('0x19d'))[_0x11ac('0x83')](_0x11ac('0xc9'),!![]);$(_0x11ac('0x19e'))[_0x11ac('0x135')](_0x11ac('0x70'));$(_0x11ac('0x1a0'))[_0x11ac('0x10d')](_0x11ac('0x70'));if(board[_0x11ac('0x8d')][_0x11ac('0x179')]!='r'){$(_0x11ac('0x19f'))[_0x11ac('0x83')]({'disabled':![],'checked':!![]});}else{$(_0x11ac('0x19f'))['prop']({'disabled':!![],'checked':![]});}}}else if(board[_0x11ac('0x1a1')]()){kifuGrid[_0x11ac('0x89')][_0x11ac('0x19b')]('single');$(_0x11ac('0x19c'))[_0x11ac('0x6f')](_0x11ac('0xe2'))[_0x11ac('0x83')](_0x11ac('0xc9'),![]);$(_0x11ac('0x19d'))[_0x11ac('0x83')](_0x11ac('0xc9'),board['isHost']());$(_0x11ac('0x19a'))[_0x11ac('0x83')](_0x11ac('0xc9'),_0x11ac('0x84'));$('#resignButton,\x20#rematchButton')[_0x11ac('0x10d')](_0x11ac('0x70'));$(_0x11ac('0x1a2'))[_0x11ac('0x135')](_0x11ac('0x70'));$(_0x11ac('0x19f'))[_0x11ac('0x83')]({'disabled':!![],'checked':!![]});}if(board[_0x11ac('0x8d')])$(_0x11ac('0x1a3'))[_0x11ac('0x135')](_0x11ac('0x70'));else $(_0x11ac('0x1a3'))[_0x11ac('0x10d')](_0x11ac('0x70'));if(board[_0x11ac('0x149')])$('input[name=kifuModeRadio]:eq(1)')['prop'](_0x11ac('0x7e'),!![]);else $(_0x11ac('0x180'))[_0x11ac('0x83')](_0x11ac('0x7e'),!![]);if(board[_0x11ac('0x14c')]())$(_0x11ac('0x1a4'))[_0x11ac('0xb0')](_0x11ac('0x108'),_0x11ac('0xb4'));else $(_0x11ac('0x1a4'))[_0x11ac('0xb0')](_0x11ac('0x108'),_0x11ac('0x133'));if(board[_0x11ac('0x14c')]()&&board[_0x11ac('0x9e')]())$(_0x11ac('0x1a5'))[_0x11ac('0x135')](_0x11ac('0x70'));else $(_0x11ac('0x1a5'))[_0x11ac('0x10d')](_0x11ac('0x70'));if(board[_0x11ac('0x8d')][_0x11ac('0x14d')]()&&board[_0x11ac('0x14c')]())$(_0x11ac('0x1a6'))[_0x11ac('0x135')]('submenu-button-disabled');else $(_0x11ac('0x1a6'))[_0x11ac('0x10d')](_0x11ac('0x1a7'));if(board[_0x11ac('0x187')])$(_0x11ac('0x1a8'))[_0x11ac('0x135')](_0x11ac('0x1a7'));else $(_0x11ac('0x1a8'))[_0x11ac('0x10d')](_0x11ac('0x1a7'));_allowWatcherChat=$(_0x11ac('0x19f'))['is'](_0x11ac('0x1a9'));_kifuModeRadioChange();}function _handleNewGame(){let _0x3a77aa=$(_0x11ac('0x1aa'))[_0x11ac('0x79')]();let _0x5be000='';let _0x2df7e3=$(_0x11ac('0x1ab'))[_0x11ac('0xb0')](_0x11ac('0x108'))==_0x11ac('0x1ac')?$(_0x11ac('0x1ad'))[_0x11ac('0x79')]():'';if(_0x3a77aa==0x1){client['wait']('r',0x384,0x3c);}else if(_0x3a77aa==0x2){client[_0x11ac('0x1ae')]('r',0x258,0x1e);}else if(_0x3a77aa==0x3){client[_0x11ac('0x1ae')]('r',0x12c,0x1e);}else if(_0x3a77aa==0x4){client[_0x11ac('0x1ae')]('r',0x0,0x1e);}else if(_0x3a77aa==0x5){let _0x6465a4=$(_0x11ac('0x1af'))[_0x11ac('0x79')]();client[_0x11ac('0x1ae')](_0x6465a4,0x3c*$(_0x11ac('0x1b0'))[_0x11ac('0x79')](),$(_0x11ac('0x1b1'))[_0x11ac('0x79')](),_0x6465a4[_0x11ac('0x14')](/^hc/)?-0x1:0x0,'',_0x5be000,_0x2df7e3);}else if(_0x3a77aa==0x6){let _0x29dd2e=$(_0x11ac('0x1b2'))[_0x11ac('0x79')]();if(tournaments[_0x29dd2e])tournaments[_0x29dd2e][_0x11ac('0x1ae')]();}else if(_0x3a77aa==0x7){client[_0x11ac('0x1b3')]();let _0xceec15=$('#newGameStudyRuleSelect\x20option:selected')[_0x11ac('0x79')]();let _0xdee8c=$(_0x11ac('0x1b4'))[_0x11ac('0x79')]();let _0x15f287=$('#newGameStudyWhite')['val']();client[_0x11ac('0x1b5')](_0xceec15,_0xdee8c,_0x15f287,_0x2df7e3);}else if(_0x3a77aa==0x8){client[_0x11ac('0x1b3')]();}$(_0x11ac('0x110'))[_0x11ac('0xdf')](_0x11ac('0xe6'));}function _handleAcceptChallenge(){client[_0x11ac('0x1b6')]();_gameAccepted=!![];}function _handleRejectChallenge(_0x51d7fd,_0x31b684=null){client[_0x11ac('0x1b7')](_0x31b684);writeUserMessage(EJ(_0x11ac('0x1b8')+_0x51d7fd['name']+'.',_0x51d7fd[_0x11ac('0x33')]+_0x11ac('0x1b9')),0x1,_0x11ac('0x12f'),!![]);}function _handleAcceptInvitation(_0x425855){_playerChallengeClick(_0x425855);}function _handleDeclineInvitation(_0x3df4c4,_0x518d2f=''){client['privateChat'](_0x3df4c4[_0x11ac('0x33')],_0x11ac('0x1ba')+_0x518d2f);writeUserMessage(EJ('Declined\x20the\x20invitation\x20from\x20'+_0x3df4c4[_0x11ac('0x33')]+'.',_0x3df4c4[_0x11ac('0x33')]+_0x11ac('0x1bb')),0x1,_0x11ac('0x12f'),!![]);}function _openPlayerInfo(_0x3bd58d,_0x4e5110=!![]){let _0x81feb0=$(_0x11ac('0x1bc')+_0x3bd58d[_0x11ac('0x33')]);if(!_0x81feb0[0x0]){_0x81feb0=$(_0x11ac('0x1bd'),{'id':_0x11ac('0x1be')+_0x3bd58d['name'],'title':_0x3bd58d[_0x11ac('0x33')]+'\x20\x20'+_0x3bd58d['titleName'](),'html':_0x11ac('0x1bf')+_0x3bd58d['name']+'\x22></div>'})['dialog']({'autoOpen':![],'width':_0x11ac('0x1c0'),'position':{'at':_0x11ac('0x1c1')+mouseX+'\x20top+'+mouseY},'close':function(_0x3caf2a){if(_0x81feb0[_0x11ac('0x6f')](_0x11ac('0x1c2'))[_0x11ac('0x136')]()=='')_0x81feb0[_0x11ac('0xdf')](_0x11ac('0x1c3'))['remove']();},'buttons':[{'text':'','class':_0x11ac('0x1c4'),'title':i18next['t'](_0x11ac('0x1c5')),'click':function(){_giveHostButtonClick(_0x3bd58d);}},{'text':'','class':_0x11ac('0x1c6'),'title':i18next['t'](_0x11ac('0x1c7')),'click':function(){_giveSubhostButtonClick(_0x3bd58d);}},{'text':i18next['t']('player_info.challenge'),'click':function(){_playerChallengeClick(_0x3bd58d);$(this)[_0x11ac('0xdf')](_0x11ac('0xe6'));}},{'text':'','class':_0x11ac('0x1c8'),'title':i18next['t']('player_info.detail'),'click':function(){_playerDetailClick(_0x3bd58d);}},{'text':'','class':_0x11ac('0x1c9'),'title':'PM','click':function(){_playerPMClick(this);}}]});if(!board['isHost']())_0x81feb0[_0x11ac('0x1ca')]('.ui-dialog-buttonpane')[_0x11ac('0x6f')](_0x11ac('0x1a4'))[_0x11ac('0xb0')](_0x11ac('0x108'),'none');if(_0x3bd58d[_0x11ac('0x10f')])_0x81feb0[_0x11ac('0x6f')]('#privateChatInput')[_0x11ac('0x83')]('disabled',!![]);_0x81feb0[_0x11ac('0x6f')](_0x11ac('0x1cb'))['on'](_0x11ac('0x9a'),function(_0x3d25fe){if(_0x3d25fe[_0x11ac('0x9c')]==0xd){if($(this)[_0x11ac('0x79')]()[_0x11ac('0x9b')]>0x0){if(board[_0x11ac('0x91')]()){showAlertDialog(_0x11ac('0x1cc'));}else{client['privateChat'](_0x3bd58d[_0x11ac('0x33')],$(this)['val']());let _0x35077d=_0x81feb0[_0x11ac('0x6f')]('#privateMessageArea');$(_0x11ac('0x127'),{})[_0x11ac('0xb0')](_0x11ac('0x1cd'),_0x11ac('0x1ce'))[_0x11ac('0xb')]($(this)[_0x11ac('0x79')]())['appendTo'](_0x35077d);_0x35077d[_0x11ac('0x12a')](_0x11ac('0x1cf'));_0x35077d[_0x11ac('0x12d')]({'scrollTop':_0x35077d[0x0][_0x11ac('0x12c')]},_0x11ac('0x77'));}$(this)[_0x11ac('0x79')]('');}}});}if(_0x4e5110){_0x81feb0[_0x11ac('0xdf')](_0x11ac('0x1c'));if(!_0x3bd58d[_0x11ac('0x10f')])apiClient['getPlayerDetail'](_0x3bd58d);if(_0x3bd58d[_0x11ac('0x1d0')]())apiClient['checkTournamentOpponent'](_0x3bd58d['waitingTournamentId'],_0x3bd58d[_0x11ac('0x33')]);if(getPremium()>=0x1)apiClient[_0x11ac('0x1d1')](_0x3bd58d['name']);}_0x81feb0[_0x11ac('0x6f')](_0x11ac('0x1d2'))[_0x11ac('0xd8')](_0x11ac('0x1d3'),_0x3bd58d['avatarURL']());_0x81feb0[_0x11ac('0x6f')](_0x11ac('0x1d4'))[_0x11ac('0x136')](_0x3bd58d[_0x11ac('0x3e')]['flagImgTag27']()+'\x20'+_0x3bd58d[_0x11ac('0x3e')][_0x11ac('0x1d5')]());_0x81feb0[_0x11ac('0x6f')](_0x11ac('0x1d6'))[_0x11ac('0x136')](_0x11ac('0x1d7')+_0x3bd58d[_0x11ac('0x40')]+'\x20('+makeRankFromRating(_0x3bd58d[_0x11ac('0x40')])+')\x20'+_0x3bd58d[_0x11ac('0x1d8')]()+_0x11ac('0x1d9')+_0x3bd58d[_0x11ac('0x33')]+'\x22>?</span>');return _0x81feb0;}function _playerChallengeClick(_0x46c72e){if(_0x46c72e==me)return;if(board[_0x11ac('0x9e')]()){writeUserMessage(i18next['t'](_0x11ac('0x1da')),0x1,_0x11ac('0x12f'));}else if(_challengeUser){writeUserMessage(i18next['t'](_0x11ac('0x1db')),0x1,_0x11ac('0x12f'));}else if(_0x46c72e[_0x11ac('0x1dc')]()){if(_0x46c72e[_0x11ac('0x1dd')]&&!_0x46c72e[_0x11ac('0x1d0')]()){writeUserMessage(EJ(_0x11ac('0x1de'),_0x11ac('0x1df')),0x1,_0x11ac('0x117'));}else if(_0x46c72e['waitingTournamentId']&&!tournaments[_0x46c72e[_0x11ac('0x1dd')]][_0x11ac('0x1e0')]()){writeUserMessage(EJ('It\x20is\x20outside\x20the\x20tournament\x20period\x20right\x20now.',_0x11ac('0x1e1')),0x1,'#ff0000');}else if(_0x46c72e[_0x11ac('0x40')]>=RANK_THRESHOLDS[0x2]&&me['provisional']&&_0x46c72e['waitingGameName'][_0x11ac('0x14')](/^r_/)){writeUserMessage(i18next['t'](_0x11ac('0x1e2')),0x1,_0x11ac('0x12f'));}else if(_checkGuestGamesExpired()){}else if(_0x46c72e[_0x11ac('0x1e3')][_0x11ac('0x14')](/_automatch\-/)){client['seek'](_0x46c72e);}else if(_0x46c72e[_0x11ac('0x1e3')][_0x11ac('0x14')](/^va/)){writeUserMessage(EJ(_0x11ac('0x1e4'),_0x11ac('0x1e5')),0x1,_0x11ac('0x117'));}else if(me[_0x11ac('0x10f')]&&_0x46c72e[_0x11ac('0x1e3')][_0x11ac('0x14')](/^r_/)){writeUserMessage(i18next['t'](_0x11ac('0x1e6')),0x1,_0x11ac('0x117'));}else{_challengeUser=_0x46c72e;client[_0x11ac('0x1e7')](_challengeUser);writeUserMessage(EJ('Challenging\x20'+_challengeUser[_0x11ac('0x33')]+_0x11ac('0x1e8'),_challengeUser[_0x11ac('0x33')]+_0x11ac('0x1e9')),0x1,_0x11ac('0x12f'),!![],![]);$(_0x11ac('0x1ea'))[_0x11ac('0x160')]();$(_0x11ac('0x11e'))[_0x11ac('0x12a')](_0x11ac('0x1eb')+i18next['t'](_0x11ac('0x1ec'))+_0x11ac('0x1ed'));if(getPremium()==0x1)setGeneralTimeout(_0x11ac('0x1ee'),0x2710,!![]);else if(getPremium()==0x2)setGeneralTimeout('SHOW_CHALLENGE_CANCELER',0x1388,!![]);else if(getPremium()>=0x3)$(_0x11ac('0x1ea'))['show']();setGeneralTimeout(_0x11ac('0xf9'),0x6d60);}}else if(me[_0x11ac('0x10f')]||_0x46c72e[_0x11ac('0x1ef')]){writeUserMessage(EJ('The\x20opponent\x20is\x20not\x20waiting\x20with\x20own\x20game\x20rule.',_0x11ac('0x1f0')),0x1,_0x11ac('0x12f'));}else if(!me['listAsWaiter']()){writeUserMessage(EJ(_0x11ac('0x1f1'),_0x11ac('0x1f2')),0x1,'#008800');}else if(_0x46c72e[_0x11ac('0x1f3')]){writeUserMessage(_0x46c72e[_0x11ac('0x33')]+EJ(_0x11ac('0x1f4'),_0x11ac('0x1f5')),0x1,'#008800',!![]);}else if(_0x46c72e[_0x11ac('0x1f6')]()){writeUserMessage(_0x46c72e[_0x11ac('0x33')]+EJ(_0x11ac('0x1f7'),_0x11ac('0x1f8')),0x1,_0x11ac('0x12f'),!![]);}else{me[_0x11ac('0x1e3')][_0x11ac('0x14')](/^([0-9a-z]+?)_(.*)-([0-9]*)-([0-9]*)/);client[_0x11ac('0x1f9')](_0x46c72e['name'],_0x11ac('0x1fa')+RegExp['$3']+','+RegExp['$4']+','+RegExp['$1']);writeUserMessage(EJ('The\x20opponent\x20is\x20not\x20waiting\x20with\x20own\x20game\x20rule.\x20Instead,\x20an\x20invitation\x20to\x20your\x20game\x20has\x20been\x20sent\x20to\x20him.','相手は対局待をしていません。代わりに自分の対局への招待メッセージを'+_0x46c72e[_0x11ac('0x33')]+_0x11ac('0x1fb')),0x1,_0x11ac('0x12f'));}}function _cancelChallenge(_0x5b8cee){clearGeneralTimeout('CHALLENGE');_0x5b8cee[_0x11ac('0x1fc')](_0x11ac('0x1fd')+i18next['t']('lobby.canceled')+_0x11ac('0x125'));_0x5b8cee[_0x11ac('0x160')]();if(_challengeUser){_challengeUser=null;client[_0x11ac('0x1b7')]('C031');}}function _playerDetailClick(_0x38cdf3){if(_0x38cdf3[_0x11ac('0x10f')])return;window[_0x11ac('0x1c')](_0x11ac('0x111')+EJ('en','ja')+_0x11ac('0x1fe')+_0x38cdf3['name']);}function _playerPMClick(_0x1be5cb,_0x6bf5de=![]){if(_0x6bf5de||$(_0x1be5cb)[_0x11ac('0x6f')](_0x11ac('0x1ff'))[_0x11ac('0xb0')](_0x11ac('0xc7'))==0x1){$(_0x1be5cb)[_0x11ac('0x6f')](_0x11ac('0x1ff'))[_0x11ac('0xb0')](_0x11ac('0xc7'),0x0);$(_0x1be5cb)[_0x11ac('0x6f')](_0x11ac('0x200'))[_0x11ac('0xb0')]('opacity',0x1);}else{$(_0x1be5cb)[_0x11ac('0x6f')](_0x11ac('0x1ff'))[_0x11ac('0xb0')](_0x11ac('0xc7'),0x1);$(_0x1be5cb)[_0x11ac('0x6f')](_0x11ac('0x200'))[_0x11ac('0xb0')]('opacity',0x0);}}function _handleImpasseDeclare(){$(_0x11ac('0x201'))[_0x11ac('0xdf')](_0x11ac('0xe6'));client[_0x11ac('0x202')]();}function sendGrab(_0x3a61a7,_0x52843e){client[_0x11ac('0x8e')](_0x11ac('0x203')+_0x3a61a7+','+_0x52843e);}function _handleGeneralResponse(_0x45a25d){console[_0x11ac('0x204')]('Event\x20received:\x20'+_0x45a25d);}function _handleLoggedIn(_0x32609c){sp[_0x11ac('0x205')]();$(_0x11ac('0xe9'))[_0x11ac('0xb')](i18next['t'](_0x11ac('0x206')));if($(_0x11ac('0xe5'))[_0x11ac('0x79')]()==0x0&&$(_0x11ac('0x7d'))[_0x11ac('0x83')](_0x11ac('0x7e'))){localStorage[_0x11ac('0x78')]=$(_0x11ac('0x207'))[_0x11ac('0x79')]();localStorage[_0x11ac('0x7a')]=caesar(caesar($(_0x11ac('0xee'))['val'](),0x3),0x51);localStorage['save']=$(_0x11ac('0x7d'))[_0x11ac('0x83')](_0x11ac('0x7e'));}$(_0x11ac('0x208'))[_0x11ac('0x12d')]({'opacity':0x0},testMode?0x0:0x3e8,function(){_switchLayer(0x1);_refreshLobby(!![]);$('div#layerLoginContents')[_0x11ac('0xb0')](_0x11ac('0xc7'),0x1);if(testMode)_testFunction(0x2);});$(_0x11ac('0x209'))[_0x11ac('0x83')](_0x11ac('0x1d3'),_0x11ac('0x20a')+client[_0x11ac('0x20b')]+'.png');$(_0x11ac('0x20c'))[_0x11ac('0xb')](client[_0x11ac('0x20b')]+_0x11ac('0x20d'));let _0x3fc341=_0x32609c[_0x11ac('0x8')](':');client['username']=_0x3fc341[0x0];users[client[_0x11ac('0x20e')]]=new User(client[_0x11ac('0x20e')]);me=users[client['username']];me[_0x11ac('0x20f')](_0x3fc341);mileage=parseInt(_0x3fc341[0xc]);premium=makePremiumNum(parseInt(_0x3fc341[0xd]),_0x3fc341[0xe]);hidden_prm=premium;_enforcePremium();if(_loginHistory[_0x11ac('0x210')](client['username'])>=0x0)_loginHistory[_0x11ac('0x211')](_loginHistory[_0x11ac('0x210')](client['username']),0x1);_loginHistory[_0x11ac('0x1a')](client[_0x11ac('0x20e')]);localStorage[_0x11ac('0x7c')]=caesar(caesar(_loginHistory[_0x11ac('0x170')](','),0x3),0x51);apiClient[_0x11ac('0x212')]();apiClient[_0x11ac('0x213')]();_updateLobbyHeader();_writeWelcomeMessage();_hourMileCount=0x0;setGeneralTimeout(_0x11ac('0x214'),0x36ee80);_refreshWorldClocks();$('#classSurveyButton')[_0x11ac('0xb0')](_0x11ac('0x108'),i18next['language']=='ja'?_0x11ac('0x1ac'):_0x11ac('0x133'));}function _writeWelcomeMessage(){writeUserMessage(i18next['t'](_0x11ac('0x215')),0x1,_0x11ac('0x12f'));if(getPremium())writeUserMessage(EJ(_0x11ac('0x216')+makePremiumName(getPremium())+_0x11ac('0x217'),makePremiumName(getPremium())+_0x11ac('0x218')+me[_0x11ac('0x33')]+'様、いつもご利用有難うございます。＜(_\x20_)＞'),0x1,_0x11ac('0x219'),!![]);}function _updateLobbyHeader(){$(_0x11ac('0x21a'))[_0x11ac('0xb')](me['name']+_0x11ac('0x20d'));$(_0x11ac('0x21b'))[_0x11ac('0xb')]('R'+me[_0x11ac('0x40')]+'\x20:\x20');$(_0x11ac('0x21c'))[_0x11ac('0xb')](mileage+EJ(_0x11ac('0x21d'),_0x11ac('0x21e')));$(_0x11ac('0x21f'))[_0x11ac('0xb')](makePremiumName(premium)+EJ('\x20class','\x20クラス'));}function _handleLoginFailed(_0x46e15d){$(_0x11ac('0xe9'))[_0x11ac('0xb')](i18next['t'](_0x11ac('0x12e')+_0x46e15d));$(_0x11ac('0xe8'))[_0x11ac('0xd8')](_0x11ac('0xc9'),![]);}function _handleWho(_0x574654){let _0x322218=_0x574654[_0x11ac('0x1b')]()[_0x11ac('0x8')]('\x0a');_0x322218[_0x11ac('0x9')](function(_0xf79cd){let _0x3baba6=_0xf79cd[_0x11ac('0x8')](',');let _0x4d2e37=_0x3baba6[_0x11ac('0x220')]();if(users[_0x4d2e37]==null)users[_0x4d2e37]=new User(_0x4d2e37);users[_0x4d2e37][_0x11ac('0x221')](_0x3baba6);});playerGrid[_0x11ac('0x37')]();waiterGrid[_0x11ac('0x37')]();Object['keys'](users)[_0x11ac('0x9')](function(_0x12bd97){playerGrid[_0x11ac('0x4b')]['add'](users[_0x12bd97][_0x11ac('0x192')]());if(users[_0x12bd97][_0x11ac('0x1dc')]())waiterGrid[_0x11ac('0x4b')][_0x11ac('0x222')](users[_0x12bd97][_0x11ac('0x192')]());});playerGrid[_0x11ac('0xca')]();playerGrid[_0x11ac('0x4b')]('#'+me[_0x11ac('0x33')])['select']();scrollGridToSelected(playerGrid);drawGridMaintainScroll(waiterGrid);_playerSelected(playerGrid,playerGrid[_0x11ac('0x4b')]({'selected':!![]})['index']());$(_0x11ac('0x85'))[_0x11ac('0x86')](_0x11ac('0xe0'),_0x11ac('0x223'),Object[_0x11ac('0x190')](users));}function _handleList(_0xf76dff){let _0x3ba71f=0x0;let _0x4bf757=_0xf76dff['trim']()['split']('\x0a');gameGrid[_0x11ac('0x37')]();let _0x145662=[];let _0x29e29c=null;_0x4bf757[_0x11ac('0x9')](function(_0x38fb7d){if(_0x38fb7d=='')return;_0x3ba71f+=0x1;let _0x3380d9=_0x38fb7d['split']('\x20');let _0x55c937=users[_0x3380d9[0x0][_0x11ac('0x8')]('+')[0x2]];if(!_0x55c937){_0x55c937=new User(_0x3380d9[0x0][_0x11ac('0x8')]('+')[0x2]);if(_0x3380d9[0x0]['match'](/^STUDY\+/))_0x55c937[_0x11ac('0x224')](!![]);else _0x55c937[_0x11ac('0x225')](_0x3380d9[0x2],parseInt(_0x3380d9[0x4]));}let _0x34e88d=users[_0x3380d9[0x0][_0x11ac('0x8')]('+')[0x3]];if(!_0x34e88d){_0x34e88d=new User(_0x3380d9[0x0][_0x11ac('0x8')]('+')[0x3]);if(_0x3380d9[0x0][_0x11ac('0x14')](/^STUDY\+/))_0x34e88d[_0x11ac('0x224')](![]);else _0x34e88d[_0x11ac('0x225')](_0x3380d9[0x3],parseInt(_0x3380d9[0x5]));}let _0x403587=new Game(_0x3ba71f,_0x3380d9[0x0],_0x55c937,_0x34e88d);_0x403587['setFromList'](parseInt(_0x3380d9[0x1]),_0x3380d9[0x6],_0x3380d9[0x7]==_0x11ac('0x84'),_0x3380d9[0x8]==_0x11ac('0x84'),parseInt(_0x3380d9[0x9]),_0x3380d9[0xa]);if(_0x403587[_0x11ac('0x226')]())_0x29e29c=_0x403587;_0x145662[_0x11ac('0x1a')](_0x403587);});gameGrid[_0x11ac('0xcd')][_0x11ac('0x222')](_0x145662);gameGrid[_0x11ac('0xca')]();if(_0x29e29c)_enterGame(_0x29e29c);}function _handleWatchers(_0x41b8a7){let _0x11c0dd=_0x41b8a7[_0x11ac('0x1b')]()[_0x11ac('0x8')]('\x0a');watcherGrid[_0x11ac('0x37')]();_0x11c0dd[_0x11ac('0x9')](function(_0x1b99d7){if(users[_0x1b99d7])watcherGrid['row'][_0x11ac('0x222')](users[_0x1b99d7][_0x11ac('0x192')]());});watcherGrid[_0x11ac('0xca')]();}function _handleLobbyIn(_0x455927){let _0x2bdff3=_0x455927[_0x11ac('0x8')](',');let _0x27d804='';let _0x5d107d=_0x2bdff3[0x0];if(_0x2bdff3[0x2]==_0x11ac('0x84')&&parseInt(_0x2bdff3[0x1])<RANK_THRESHOLDS[0x0]){_0x27d804=EJ('A\x20new\x20player',_0x11ac('0x227'));}else{_0x27d804=EJ('A\x20','')+makeRankFromRating(parseInt(_0x2bdff3[0x1]));}let _0x1a5593=_0x2bdff3[0xc]!=null&&_0x2bdff3[0xc][_0x11ac('0x14')](/81AR/);if(_isFavorite(_0x5d107d)||_isColleague(_0x5d107d)||parseInt(_0x2bdff3[0x1])>=RANK_THRESHOLDS[0x3]||parseInt(_0x2bdff3[0x6])>=0x7||users[_0x11ac('0x9b')]<0x28&&_0x5d107d!=me[_0x11ac('0x33')]){writeUserMessage(_0x11ac('0x228')+_name2link(_0x5d107d)+EJ(_0x11ac('0x229')+(_0x1a5593?_0x11ac('0x22a'):'')+'.\x20'+_0x27d804+_0x11ac('0x22b')+countries[parseInt(_0x2bdff3[0x3])]['name_en']+'.'+(parseInt(_0x2bdff3[0x6])>=0x3?_0x11ac('0x22c')+_0x2bdff3[0x6]+_0x11ac('0x22d'):''),'\x20さんが'+(_0x1a5593?_0x11ac('0x22e'):'')+_0x11ac('0x22f')+countries[parseInt(_0x2bdff3[0x3])][_0x11ac('0x230')]+',\x20'+_0x27d804+')'+(parseInt(_0x2bdff3[0x6])>=0x3?_0x11ac('0x231')+_0x2bdff3[0x6]+_0x11ac('0x232'):'')),0x1,_0x11ac('0x12f'),_isFavorite(_0x5d107d)||_isColleague(_0x5d107d));}if(_0x5d107d==me[_0x11ac('0x33')])return;if(!users[_0x5d107d]){users[_0x5d107d]=new User(_0x5d107d);$(_0x11ac('0x85'))[_0x11ac('0x86')](_0x11ac('0xe0'),_0x11ac('0x223'),Object[_0x11ac('0x190')](users));}else{}users[_0x5d107d][_0x11ac('0x233')](parseInt(_0x2bdff3[0x1]),_0x2bdff3[0x2],parseInt(_0x2bdff3[0x3]),_0x2bdff3[0xc]);playerGrid[_0x11ac('0x4b')]['add'](users[_0x5d107d]['gridObject']());drawGridMaintainScroll(playerGrid);}function _handleLobbyOut(_0x611ce){if(currentLayer==0x1){if(_isFavorite(_0x611ce)||_isColleague(_0x611ce)){writeUserMessage(_0x11ac('0x228')+_0x611ce+i18next['t']('code.G031'),0x1,_0x11ac('0x12f'));}}playerGrid[_0x11ac('0x4b')]('#'+_0x611ce)[_0x11ac('0x160')]();waiterGrid[_0x11ac('0x4b')]('#'+_0x611ce)[_0x11ac('0x160')]();drawGridMaintainScroll(playerGrid);drawGridMaintainScroll(waiterGrid);delete users[_0x611ce];}function _handleGame(_0x42e40a){let _0x19eaff='';if(_0x42e40a['match'](/^\[(.+)\]$/)){_0x19eaff=RegExp['$1'];if(users[_0x19eaff]){users[_0x19eaff][_0x11ac('0x234')]('*','*','');if(playerInfoWindows[_0x19eaff])playerInfoWindows[_0x19eaff]['disableChallenge']();}waiterGrid[_0x11ac('0x4b')]('#'+_0x19eaff)[_0x11ac('0x160')]();drawGridMaintainScroll(waiterGrid);}else{let _0x190712=_0x42e40a[_0x11ac('0x14')](/^([0-9a-z]+?)_(.*)-([0-9]*)-([0-9]*),/);if(_0x190712[0x2][_0x11ac('0x14')](/^@/))return;if(_0x190712[0x2][_0x11ac('0x14')](/\-\-/)){_0x19eaff=_0x190712[0x2][_0x11ac('0x8')]('--')[0x0];}else{_0x19eaff=_0x190712[0x2][_0x11ac('0x8')]('.')[0x0];}_0x190712=_0x42e40a[_0x11ac('0x14')](/(.+),(\+|\-|\*),(.+)$/);if(!users[_0x19eaff])return;users[_0x19eaff][_0x11ac('0x234')](_0x190712[0x1],_0x190712[0x2],_0x190712[0x3]=='*'?'':_0x190712[0x3]);waiterGrid[_0x11ac('0x4b')]('#'+_0x19eaff)[_0x11ac('0x160')]();waiterGrid[_0x11ac('0x4b')]['add'](users[_0x19eaff]['gridObject']());drawGridMaintainScroll(waiterGrid);}playerGrid['row']('#'+_0x19eaff)[_0x11ac('0x60')](users[_0x19eaff][_0x11ac('0x192')]());drawGridMaintainScroll(playerGrid);}function _handleChallenger(_0x153774){sp['play'](_0x11ac('0x235'));$('#modalChallenger')[_0x11ac('0xdf')](_0x11ac('0x1c'));_initModalChallenger(users[_0x153774]);if(me[_0x11ac('0x1dd')])apiClient[_0x11ac('0x236')](me[_0x11ac('0x1dd')],_0x153774);}function _handleAccept(_0x5b2b78){$(_0x11ac('0x1ea'))[_0x11ac('0x160')]();clearGeneralTimeout(_0x11ac('0xf9'));_gameAccepted=!![];_interpretCommunicationCode('',_0x11ac('0x237'),0x1,!![],![]);if(_challengeUser)client[_0x11ac('0x238')](_challengeUser);}function _handleDecline(_0x43ce35){$(_0x11ac('0x1ea'))[_0x11ac('0x160')]();clearGeneralTimeout(_0x11ac('0xf9'));if(_0x43ce35[_0x11ac('0x14')](/^([A-Z]\d{3})/)){_interpretCommunicationCode('',RegExp['$1'],0x1,!![],![]);}else{writeUserMessage(_0x43ce35,0x1,_0x11ac('0x12f'),!![]);}_challengeUser=null;_gameAccepted=![];$(_0x11ac('0x239'))[_0x11ac('0xdf')]('close');}function _handleGameSummary(_0x2f9c37){_gameAccepted=![];let _0x507b8f;let _0x327b48;let _0x52432c;let _0x14f235='';let _0x21fd77;let _0x150145;_0x2f9c37['split']('\x0a')[_0x11ac('0x9')](function(_0x2cf020){if(_0x2cf020[_0x11ac('0x14')](/^Name\+\:(.+)$/)){_0x507b8f=users[RegExp['$1']];}else if(_0x2cf020['match'](/^Name\-\:(.+)$/)){_0x327b48=users[RegExp['$1']];}else if(_0x2cf020[_0x11ac('0x14')](/^Your_Turn\:(.)$/)){_0x52432c=RegExp['$1']=='+';}else if(_0x2cf020['match'](/^To_Move\:(.)$/)){_0x14f235='P0'+RegExp['$1']+'\x0a';}else if(_0x2cf020[_0x11ac('0x14')](/^P[0-9\+\-]/)){_0x14f235+=_0x2cf020+'\x0a';}else if(_0x2cf020['match'](/^START:(.+):(\d+)$/)){_0x21fd77=RegExp['$1'];_0x150145=RegExp['$2'];}});_challengeUser=null;if(board[_0x11ac('0x8d')])_closeBoard();board[_0x11ac('0x118')](new Game(0x0,_0x21fd77,_0x507b8f,_0x327b48));board[_0x11ac('0x23a')](_0x14f235,_0x52432c?0x0:0x1);board[_0x11ac('0x23b')](_0x150145);_dialogOnBoardClose=![];$(_0x11ac('0x181'))[_0x11ac('0x6f')](_0x11ac('0xc3'))[_0x11ac('0x135')](_0x11ac('0x182'));setBoardConditions();_switchLayer(0x2);sp['gameStart']();_greetState=0x1;_writeGameStartMessage();}function _writeGameStartMessage(){writeUserMessage(i18next['t'](_0x11ac('0x23c'))+'\x0a',0x2,_0x11ac('0x23d'));if(board[_0x11ac('0x13c')]==0x0)writeUserMessage(EJ(_0x11ac('0x23e')+(board['game'][_0x11ac('0x23f')]()?_0x11ac('0x240'):_0x11ac('0x241')),_0x11ac('0x242')+(board[_0x11ac('0x8d')][_0x11ac('0x23f')]()?'は下手(したて)':_0x11ac('0x243'))+'です。'),0x2,_0x11ac('0x12f'),!![]);else writeUserMessage(EJ(_0x11ac('0x244')+(board[_0x11ac('0x8d')]['isHandicap']()?_0x11ac('0x245'):_0x11ac('0x246')),_0x11ac('0x242')+(board[_0x11ac('0x8d')][_0x11ac('0x23f')]()?_0x11ac('0x247'):_0x11ac('0x248'))+_0x11ac('0x249')),0x2,_0x11ac('0x12f'),!![]);if(board[_0x11ac('0x8d')][_0x11ac('0x179')]!='r')writeUserMessage(i18next['t']('msg.mute_chat'),0x2,_0x11ac('0x12f'));let _0x1fe285=board['getOpponent']();if(board['game'][_0x11ac('0x179')]=='r'&&!me[_0x11ac('0x17a')]){if(isBeforeUpgrade(me['rate'])&&!_0x1fe285[_0x11ac('0x17a')]&&_0x1fe285['rate']>me[_0x11ac('0x40')]-0xc8)_sendAutoChat(_0x11ac('0x24a'));else if(isBeforeDowngrade(me[_0x11ac('0x40')])&!_0x1fe285[_0x11ac('0x17a')]&&_0x1fe285[_0x11ac('0x40')]<me[_0x11ac('0x40')]+0xc8)_sendAutoChat(_0x11ac('0x24b'));}client[_0x11ac('0x1f9')](board[_0x11ac('0x178')]()[_0x11ac('0x33')],'[##FITNESS]'+options['postgame_study_level']+','+options[_0x11ac('0x24c')]);}function _handleMove(_0x11346f,_0x1c53bb){board['clearArrows'](!![]);if(board[_0x11ac('0x91')]()){let _0x13c0bf=_0x11346f[_0x11ac('0x24d')](0x0,0x1)=='+';board[_0x11ac('0x24e')](_0x13c0bf)[_0x11ac('0x24f')](_0x1c53bb);if(_0x13c0bf&&board[_0x11ac('0x13c')]==0x0||!_0x13c0bf&&board[_0x11ac('0x13c')]==0x1){board[_0x11ac('0x17f')][board[_0x11ac('0x17f')][_0x11ac('0x9b')]-0x1][_0x11ac('0x250')](_0x1c53bb,board);board[_0x11ac('0x251')](board[_0x11ac('0x17f')][board[_0x11ac('0x17f')][_0x11ac('0x9b')]-0x1]);}else{let _0x54a3ae=new Movement(board['getFinalMove']());_0x54a3ae[_0x11ac('0x252')](_0x11346f);_0x54a3ae[_0x11ac('0x250')](_0x1c53bb,board);board[_0x11ac('0x253')](_0x54a3ae);board[_0x11ac('0x254')]();}board[_0x11ac('0x255')]['run']();}}function _handleGameEnd(_0x5c30a2,_0x94363c=![]){board[_0x11ac('0x256')]();_checkLobbyButtonClick(!![]);let _0x19919a=_0x5c30a2[_0x11ac('0x8')]('\x0a')[0x0];board[_0x11ac('0x8d')][_0x11ac('0x257')]=_0x19919a;let _0x175239=_0x5c30a2[_0x11ac('0x8')]('\x0a')[0x1];clearInterval(_disconnectTimer);$(_0x11ac('0x258'))[_0x11ac('0x160')]();board[_0x11ac('0x187')]=!![];let _0x2eef91=new Movement(board['getFinalMove']());_0x2eef91[_0x11ac('0x259')](_0x19919a);board[_0x11ac('0x25a')]=moment();if(_0x19919a!='SUSPEND'){board[_0x11ac('0x17f')][_0x11ac('0x1a')](_0x2eef91);if(!kifuGrid[_0x11ac('0x4b')](_0x11ac('0x189'))[_0x11ac('0x60')]()[_0x11ac('0x188')])board[_0x11ac('0x251')](_0x2eef91);}if(_0x19919a==_0x11ac('0x25b')&&board[_0x11ac('0x9e')]()&&!_0x94363c)sp[_0x11ac('0x25c')]();writeUserMessage(_0x2eef91[_0x11ac('0x25d')](),0x2,_0x11ac('0x25e'));switch(_0x175239){case _0x11ac('0x25f'):board[_0x11ac('0x260')](0x1-board[_0x11ac('0x13c')]);board[_0x11ac('0x150')]=0x2;writeUserMessage(EJ(_0x11ac('0x261'),_0x11ac('0x262')),0x2,_0x11ac('0x25e'),!![]);sp[_0x11ac('0x263')](![]);openResult(-0x1);break;case _0x11ac('0x264'):board[_0x11ac('0x260')](board['myRoleType']);board[_0x11ac('0x150')]=0x1;writeUserMessage(EJ('###\x20You\x20Win\x20###\x0a',_0x11ac('0x265')),0x2,_0x11ac('0x25e'),!![]);sp[_0x11ac('0x263')](!![]);openResult(0x1);break;case _0x11ac('0x266'):board[_0x11ac('0x260')](-0x1);if(board[_0x11ac('0x13c')]==0x1)board[_0x11ac('0x150')]=0x1;else if(board[_0x11ac('0x13c')]==0x0)board['studyHostType']=0x2;writeUserMessage(EJ(_0x11ac('0x267'),'###\x20引き分け\x20###\x0a'),0x2,_0x11ac('0x25e'),!![]);sp[_0x11ac('0x263')](!![]);if(board[_0x11ac('0x9e')]()&&!_0x94363c)openResult(0x0);break;case _0x11ac('0x268'):board['setResult'](0x0);writeUserMessage(EJ(_0x11ac('0x269'),_0x11ac('0x26a')),0x2,'#DD0088',!![]);sp[_0x11ac('0x263')](!![]);break;case _0x11ac('0x26b'):board[_0x11ac('0x260')](0x1);writeUserMessage(EJ(_0x11ac('0x26c'),_0x11ac('0x26d')),0x2,_0x11ac('0x25e'),!![]);sp[_0x11ac('0x263')](!![]);break;}if(board['isPlayer']()&&board[_0x11ac('0x8d')][_0x11ac('0x179')][_0x11ac('0x14')](/^hc/)){if(board[_0x11ac('0x13c')]==0x0)board[_0x11ac('0x150')]=0x1;else board[_0x11ac('0x150')]=0x2;}if(_0x94363c)board[_0x11ac('0x150')]=0x1;else{if(board[_0x11ac('0x14c')]()){writeUserMessage(i18next['t'](_0x11ac('0x26e')),0x2,_0x11ac('0x12f'),!![]);sendStudy();}else if(board[_0x11ac('0x183')]())writeUserMessage(i18next['t'](_0x11ac('0x26f')),0x2,_0x11ac('0x12f'),!![]);}if(board[_0x11ac('0x9e')]()){if(!_0x94363c){_dialogOnBoardClose=!![];if(board[_0x11ac('0x8d')][_0x11ac('0x179')]=='r')client['mileage'](0xa,config[_0x11ac('0x270')]);else client[_0x11ac('0x271')](0x5,config['mileagePass']);let _0x540e1d=board[_0x11ac('0x8d')][_0x11ac('0x272')]();if(_0x540e1d){writeUserMessage(EJ(_0x11ac('0x273'),_0x11ac('0x274'))+_0x540e1d[_0x11ac('0x275')](),0x2,_0x11ac('0x17d'));}if(me[_0x11ac('0x10f')])_countGuestGame();}}board[_0x11ac('0x276')](0x0,'name-mouse-out',![]);board[_0x11ac('0x276')](0x1,'name-mouse-out',![]);setBoardConditions();board['updateTurnHighlight']();if(_greetState<=0x2)_greetState=_0x94363c?0x4:0x3;}function _handleResult(_0x813d76){let _0x87adb9=_0x813d76[_0x11ac('0x8')](',');loadResult(_0x87adb9[0x0],_0x87adb9[0x1],_0x87adb9[0x2],_0x87adb9[0x3]);me[_0x11ac('0x40')]=parseInt(_0x87adb9[0x1]);users[board['getOpponent']()[_0x11ac('0x33')]][_0x11ac('0x40')]=parseInt(_0x87adb9[0x3]);}function _handleMonitor(_0x15e096){let _0x15555d=null;let _0xfc1777=_0x15e096['split']('\x0a');let _0x13e992=[];let _0x4839fb=0x0;let _0x245bcc='';let _0x2e5b9d='';let _0x582483=![];board[_0x11ac('0x14a')](!![]);_0xfc1777[_0x11ac('0x9')](function(_0x4469ed){if(_0x4469ed[_0x11ac('0x14')](/^([-+][0-9]{4}[A-Z]{2}|%TORYO)$/)){_0x13e992[_0x11ac('0x1a')](RegExp['$1']);}else if(_0x4469ed[_0x11ac('0x14')](/^T(\d+)$/)){_0x13e992[_0x13e992[_0x11ac('0x9b')]-0x1]+=','+RegExp['$1'];}else if(_0x4469ed==_0x11ac('0x277')){_0x582483=!![];}else if(_0x4469ed[_0x11ac('0x14')](/^kifu_id:(.+)$/)){_0x15555d=RegExp['$1'];}else if(_0x4469ed[_0x11ac('0x14')](/^\$SINCE_LAST_MOVE:(\d+)$/)){_0x4839fb=parseInt(RegExp['$1']);}else if(_0x4469ed[_0x11ac('0x14')](/^To_Move:([\+\-])$/)){_0x245bcc+='P0'+RegExp['$1']+'\x0a';}else if(_0x4469ed['match'](/^P[0-9+-].*/)){_0x245bcc+=_0x4469ed+'\x0a';}else if(_0x4469ed[_0x11ac('0x14')](/^#(SENTE_WIN|GOTE_WIN|DRAW|RESIGN|TIME_UP|ILLEGAL_MOVE|SENNICHITE|OUTE_SENNICHITE|JISHOGI|DISCONNECT|SUSPEND|CATCH|TRY)/)){_0x2e5b9d+=RegExp['$1']+'\x0a';}else if(_0x4469ed[_0x11ac('0x14')](/^NOT_FOUND$/)){board[_0x11ac('0xe6')]();return;}});if(_0x15555d){if(_0x582483)forceKifuMode(0x1);board['startGame'](_0x245bcc,0x2,_0x13e992,_0x4839fb);board[_0x11ac('0x23b')](_0x15555d);setBoardConditions();_switchLayer(0x2);if(!board[_0x11ac('0x8d')][_0x11ac('0x14d')]()){writeUserMessage(board[_0x11ac('0x8d')][_0x11ac('0x179')]=='r'?i18next['t'](_0x11ac('0x278')):i18next['t'](_0x11ac('0x279')),0x2,_0x11ac('0x12f'));}let _0x4814b0=board[_0x11ac('0x8d')][_0x11ac('0x272')]();if(_0x4814b0){writeUserMessage(EJ(_0x11ac('0x27a'),'イベント対局:\x20「')+_0x4814b0[_0x11ac('0x33')]()+EJ('\x22\x20','」\x20')+_0x4814b0[_0x11ac('0x275')](),0x2,_0x11ac('0x17d'),!![]);}}else{_0x13e992[_0x11ac('0x9')](function(_0xcc34a8){if(_0xcc34a8[_0x11ac('0x14')](/^%TORYO/))return;let _0x4edd0d=new Movement(board[_0x11ac('0x27b')]());_0x4edd0d['setFromCSA'](_0xcc34a8[_0x11ac('0x8')](',')[0x0]);_0x4edd0d[_0x11ac('0x250')](parseInt(_0xcc34a8[_0x11ac('0x8')](',')[0x1]),board);board[_0x11ac('0x27c')](_0x4edd0d);});}if(_0x2e5b9d!=''){_handleGameEnd(_0x2e5b9d);if(_0x4839fb>0x0)board[_0x11ac('0x25a')][_0x11ac('0x222')](-0x1*_0x4839fb,_0x11ac('0x27d'));}}function _handleReconnect(_0xef6bb0){let _0x526157=null;let _0x93594=_0xef6bb0[_0x11ac('0x8')]('\x0a');let _0x2b94ad=[];let _0xf59629=0x0;let _0x2d874a='';let _0x1aeadd='';_0x93594[_0x11ac('0x9')](function(_0x2fb202){if(_0x2fb202[_0x11ac('0x14')](/^([-+][0-9]{4}[A-Z]{2}|%TORYO)$/)){_0x2b94ad[_0x11ac('0x1a')](RegExp['$1']);}else if(_0x2fb202['match'](/^T(\d+)$/)){_0x2b94ad[_0x2b94ad[_0x11ac('0x9b')]-0x1]+=','+RegExp['$1'];}else if(_0x2fb202[_0x11ac('0x14')](/^kifu_id:(.+)$/)){_0x526157=RegExp['$1'];}else if(_0x2fb202[_0x11ac('0x14')](/^\$SINCE_LAST_MOVE:(\d+)$/)){_0xf59629=parseInt(RegExp['$1']);}else if(_0x2fb202[_0x11ac('0x14')](/^To_Move:([\+\-])$/)){_0x2d874a+='P0'+RegExp['$1']+'\x0a';}else if(_0x2fb202[_0x11ac('0x14')](/^P[0-9+-].*/)){_0x2d874a+=_0x2fb202+'\x0a';}else if(_0x2fb202[_0x11ac('0x14')](/^#(SENTE_WIN|GOTE_WIN|DRAW|RESIGN|TIME_UP|ILLEGAL_MOVE|SENNICHITE|OUTE_SENNICHITE|JISHOGI|DISCONNECT|CATCH|TRY)/)){_0x1aeadd+=RegExp['$1']+'\x0a';}});board[_0x11ac('0x23a')](_0x2d874a,board[_0x11ac('0x119')](me[_0x11ac('0x33')]),_0x2b94ad,_0xf59629);if(_0x526157)board[_0x11ac('0x23b')](_0x526157);setBoardConditions();_switchLayer(0x2);_greetState=0x2;if(_0x1aeadd!=''){client['status']=0x0;_handleGameEnd(_0x1aeadd,!![]);}}function _handleEnter(_0x4d4869){if(board['getPlayerRoleFromName'](_0x4d4869)!=null){clearInterval(_disconnectTimer);$(_0x11ac('0x258'))['remove']();if(board['isPlaying']())board['reconnectTimer'](board[_0x11ac('0x119')](_0x4d4869));writeUserMessage(_name2link(_0x4d4869)+i18next['t']('code.G030'),0x2,board[_0x11ac('0x119')](_0x4d4869)==0x0?_0x11ac('0x27e'):_0x11ac('0x27f'),!![]);board[_0x11ac('0x276')](board[_0x11ac('0x119')](_0x4d4869),_0x11ac('0x280'),![]);sp['door'](!![]);if(board[_0x11ac('0x14c')]())client[_0x11ac('0x8e')]('[##SUBHOST_ON]'+_0x4d4869);}else{let _0x44c778=![];if(watcherGrid[_0x11ac('0xcd')]()[_0x11ac('0x191')]()<0xf||_0x44c778){writeUserMessage(_name2link(_0x4d4869)+i18next['t'](_0x11ac('0x281')),0x2,_0x11ac('0x12f'),_0x44c778);}if(users[_0x4d4869]){watcherGrid[_0x11ac('0x4b')][_0x11ac('0x222')](users[_0x4d4869][_0x11ac('0x192')]());drawGridMaintainScroll(watcherGrid);}}if(board[_0x11ac('0x14c')]())client['privateChat'](_0x4d4869,_0x11ac('0x282')+_generateStudyText(kifuGrid[_0x11ac('0x4b')]({'selected':!![]})[_0x11ac('0x60')]()['num']));if(board[_0x11ac('0x91')]()){if(board[_0x11ac('0x8d')][_0x11ac('0x179')]!='r'&&!_allowWatcherChat)client[_0x11ac('0x1f9')](_0x4d4869,'[auto-PM]\x20#G102');}}function _handleLeave(_0x799e7d){if(!board['game'])return;if(board[_0x11ac('0x119')](_0x799e7d)!=null){writeUserMessage(_0x799e7d+i18next['t']('code.G031'),0x2,board[_0x11ac('0x119')](_0x799e7d)==0x0?_0x11ac('0x27e'):_0x11ac('0x27f'),!![]);board['playerNameClassChange'](board['getPlayerRoleFromName'](_0x799e7d),_0x11ac('0x280'),!![]);sp[_0x11ac('0x283')](![]);}else{let _0x4dbb56=![];if(watcherGrid[_0x11ac('0xcd')]()[_0x11ac('0x191')]()<0xa||_0x4dbb56){writeUserMessage(_0x799e7d+i18next['t'](_0x11ac('0x284')),0x2,_0x11ac('0x12f'),_0x4dbb56);}watcherGrid[_0x11ac('0x4b')]('#'+_0x799e7d)[_0x11ac('0x160')]();drawGridMaintainScroll(watcherGrid);}}function _handleDisconnect(_0x4d86d7){if(!board[_0x11ac('0x8d')])return;if(board[_0x11ac('0x119')](_0x4d86d7)!=null){writeUserMessage(_0x4d86d7+EJ(_0x11ac('0x285'),_0x11ac('0x286')),0x2,board['getPlayerRoleFromName'](_0x4d86d7)==0x0?_0x11ac('0x27e'):'#666666',!![]);board[_0x11ac('0x276')](board[_0x11ac('0x119')](_0x4d86d7),'name-left',!![]);sp[_0x11ac('0x283')](![]);if(board[_0x11ac('0x91')]()&&_0x4d86d7!=me[_0x11ac('0x33')]){board['disconnectTimer'](board[_0x11ac('0x119')](_0x4d86d7));writeUserMessage(i18next['t'](_0x11ac('0x287')),0x2,_0x11ac('0x117'));_startDisconnectTimer();}}}function _startDisconnectTimer(){_opponentDisconnectCount+=0x1;$('p#disconnectTimer')[_0x11ac('0x160')]();let _0x546834=$(_0x11ac('0x288'),{'id':_0x11ac('0x289')});$(_0x11ac('0x11f'))[_0x11ac('0x12a')](_0x546834);_0x546834[_0x11ac('0x136')](i18next['t'](_0x11ac('0x28a'))+'<span\x20id=\x22disconnectCount\x22>0</span>&nbsp'+i18next['t'](_0x11ac('0x28b')));let _0x51cd1b=0x0;let _0x6db712=_opponentDisconnectCount>0x1?0x1:0x3c;_disconnectTimer=setInterval(function(){_0x51cd1b++;$(_0x11ac('0x28c'))[_0x11ac('0xb')](_0x51cd1b);if(_0x51cd1b==_0x6db712){$(_0x11ac('0x28d')+i18next['t']('declare')+_0x11ac('0x28e'))[_0x11ac('0x129')](_0x546834);$(_0x11ac('0x28f'))[_0x11ac('0x75')](function(){_handleDisconnectDeclare();});}else if(_0x51cd1b>=0x12c){_handleDisconnectDeclare();}},0x3e8);}function _handleDisconnectDeclare(){clearInterval(_disconnectTimer);client['declare']();$(_0x11ac('0x258'))[_0x11ac('0x160')]();}function _handleStart(_0x4c86be){let _0x418dfd=_0x4c86be[_0x11ac('0x8')]('+');let _0x44c73a=_0x418dfd[0x1][_0x11ac('0x14')](/^([0-9a-z]+?)_(.*)-([0-9]*)-([0-9]*)$/);let _0x1ecfb6;let _0x26a0c1;if(_0x418dfd[0x0]=='STUDY'){let _0x26a0c1=_0x44c73a[0x2]['split']('.')[0x0]+EJ(_0x11ac('0x290'),'さんが[');_0x26a0c1+=_game2link(EJ(_0x11ac('0x291'),_0x11ac('0x292')),_0x4c86be);_0x26a0c1+=EJ('].',_0x11ac('0x293'));writeUserMessage(_0x26a0c1,0x1,'#008800');sp[_0x11ac('0x294')]();let _0x620bd0=new User(_0x418dfd[0x2]);_0x620bd0[_0x11ac('0x224')](!![]);var _0xc5eb78=new User(_0x418dfd[0x3]);_0xc5eb78[_0x11ac('0x224')](![]);_0x1ecfb6=new Game(0x0,_0x4c86be,_0x620bd0,_0xc5eb78);if(_0x1ecfb6[_0x11ac('0x295')]()){board[_0x11ac('0x150')]=0x2;_enterGame(_0x1ecfb6);}}else{_0x26a0c1='['+_game2link(EJ(_0x11ac('0x296'),_0x11ac('0x297')),_0x4c86be)+']\x20';_0x26a0c1+='☗'+_0x418dfd[0x2]+EJ(_0x11ac('0x298'),_0x11ac('0x299'))+'☖'+_0x418dfd[0x3]+_0x11ac('0x29a')+EJ(HANDICAPS_EN[_0x44c73a[0x1]],HANDICAPS_JA[_0x44c73a[0x1]]);writeUserMessage(_0x26a0c1,0x1,_0x11ac('0x12f'));if(users[_0x418dfd[0x2]]){users[_0x418dfd[0x2]][_0x11ac('0x29b')](_0x418dfd[0x1],'+');playerGrid[_0x11ac('0x4b')]('#'+_0x418dfd[0x2])['remove']();playerGrid['row'][_0x11ac('0x222')](users[_0x418dfd[0x2]][_0x11ac('0x192')]());waiterGrid['row']('#'+_0x418dfd[0x2])[_0x11ac('0x160')]();}if(users[_0x418dfd[0x3]]){users[_0x418dfd[0x3]][_0x11ac('0x29b')](_0x418dfd[0x1],'-');playerGrid[_0x11ac('0x4b')]('#'+_0x418dfd[0x3])[_0x11ac('0x160')]();playerGrid[_0x11ac('0x4b')][_0x11ac('0x222')](users[_0x418dfd[0x3]][_0x11ac('0x192')]());waiterGrid[_0x11ac('0x4b')]('#'+_0x418dfd[0x3])[_0x11ac('0x160')]();}drawGridMaintainScroll(playerGrid);drawGridMaintainScroll(waiterGrid);_0x1ecfb6=new Game(0x0,_0x4c86be,users[_0x418dfd[0x2]],users[_0x418dfd[0x3]]);}gameGrid[_0x11ac('0x4b')][_0x11ac('0x222')](_0x1ecfb6);drawGridMaintainScroll(gameGrid);}function _handleChat(_0x28608e,_0x2f4836){if(_0x2f4836[_0x11ac('0x14')](/^\[##INFONEW\]/)){return;}else if(_0x2f4836[_0x11ac('0x14')](/^\[##BROADCAST\](.+)$/)){return;}else if(_0x2f4836[_0x11ac('0x14')](/^\[##WINS\](\d+)$/)){writeUserMessage(_name2link(_0x28608e)+EJ(_0x11ac('0x29c'),_0x11ac('0x29d'))+parseInt(RegExp['$1'])+EJ(_0x11ac('0x29e'),_0x11ac('0x29f')),0x1,_0x11ac('0x12f'),!![]);}else if(_0x2f4836[_0x11ac('0x14')](/^\[##EXP\](.+),(\d+)$/)){let _0x228201=RegExp['$1']=='nr'?EJ(_0x11ac('0x2a0'),_0x11ac('0x2a1')):getHandicapShort(RegExp['$1']);writeUserMessage(_name2link(_0x28608e)+EJ(_0x11ac('0x2a2')+makeRank34FromExp(parseInt(RegExp['$2']))+_0x11ac('0x2a3')+_0x228201+'!',_0x11ac('0x2a4')+_0x228201+'で\x20'+makeRank34FromExp(parseInt(RegExp['$2']))+_0x11ac('0x2a5')),0x1,_0x11ac('0x12f'),!![]);}else if(_0x2f4836[_0x11ac('0x14')](/^\[##.+\]/)){return;}else if(_isFavorite(_0x28608e)){writeUserMessage('['+_name2link(_0x28608e)+']\x20'+_0x2f4836,0x1,_0x11ac('0x2a6'));}else if(_isColleague(_0x28608e)){writeUserMessage('['+_name2link(_0x28608e)+']\x20'+_0x2f4836,0x1,_0x11ac('0x2a7'));}else if(_0x2f4836[_0x11ac('0x14')](/\[auto\-chat\]/)){writeUserMessage('['+_name2link(_0x28608e)+']\x20'+_0x2f4836,0x1,_0x11ac('0x2a8'));}else if(_0x28608e==me['name']){writeUserMessage('['+_name2link(_0x28608e)+']\x20'+_0x2f4836,0x1,_0x11ac('0x2a9'));}else{writeUserMessage('['+_name2link(_0x28608e)+']\x20'+_0x2f4836,0x1,'#000000');}if(currentLayer==0x1)sp['chatLobby']();}function _handleGameChat(_0x47f542,_0x14b990){if(!board[_0x11ac('0x8d')])return;if(board[_0x11ac('0x91')]()&&_0x14b990[_0x11ac('0x14')](/^\[comment\]/))return;if(_0x14b990[_0x11ac('0x14')](/\[\#\#HOVER\](\d+),(\d+)$/)){}else if(_0x14b990[_0x11ac('0x14')](/\[##GRAB\](\d+),(\d+)$/)){if(_0x47f542!=me[_0x11ac('0x33')]&&board[_0x11ac('0x149')])board[_0x11ac('0x2aa')](RegExp['$1'],RegExp['$2']);}else if(_0x14b990[_0x11ac('0x14')](/\[##TYPE\]$/)){if(_0x47f542!=me['name']){_runTypingIndicator(_0x47f542);}}else if(_0x14b990[_0x11ac('0x14')](/\[\#\#STUDY\](\d+)\/(.+)$/)){let _0x5aaaef=_updateStudyState(_0x47f542,parseInt(RegExp['$1']),RegExp['$2']);if(hostPlayerName==null)_updateHostPlayer(_0x47f542);board['clearArrows'](!![]);if(board[_0x11ac('0x14c')]()&&_0x47f542==me[_0x11ac('0x33')])return;if(!(board['isPostGame']&&board[_0x11ac('0x149')]))return;if(_0x47f542!=me[_0x11ac('0x33')])_handleStudy(_0x5aaaef);}else if(_0x14b990[_0x11ac('0x14')](/^\[##ARROW\]CLEAR$/)){if(_0x47f542!=me[_0x11ac('0x33')])board['clearArrows'](!![],_0x47f542);}else if(_0x14b990[_0x11ac('0x14')](/^\[##ARROW\](.+),(.+),(.+),(.+),(.+),(.+)$/)){if(!options['accept_arrow']==0x1||_0x47f542==me[_0x11ac('0x33')])return;if(board[_0x11ac('0x91')]())return;if(_0x47f542==me[_0x11ac('0x33')])_0x47f542='';board[_0x11ac('0x2ab')](parseInt(RegExp['$1']),Number(RegExp['$2']),Number(RegExp['$3']),Number(RegExp['$4']),Number(RegExp['$5']),parseInt(RegExp['$6'],0x10),!![],_0x47f542);}else if(_0x14b990[_0x11ac('0x14')](/^\[##M_(IN|OUT)\](\d+),(\d+)$/)){let _0x3f1ef7=RegExp['$1']==_0x11ac('0x2ac');let _0x37648a=board[_0x11ac('0x119')](_0x47f542);if(_0x37648a!=null)board['playerNameClassChange'](_0x37648a,'name-mouse-out',_0x3f1ef7);}else if(_0x14b990[_0x11ac('0x14')](/^\[##GIVEHOST\](.+)$/)){if(!board[_0x11ac('0x187')])return;let _0x3e7980=RegExp['$1'];if(_0x3e7980==me[_0x11ac('0x33')]){sendStudy();board[_0x11ac('0x150')]=0x2;$(_0x11ac('0x2ad'))[_0x11ac('0x83')](_0x11ac('0x7e'),!![]);_kifuModeRadioChange();setBoardConditions();writeUserMessage(i18next['t'](_0x11ac('0x26e')),0x2,_0x11ac('0x12f'),!![]);}else{writeUserMessage(EJ(_0x11ac('0x2ae')+_0x3e7980,_0x11ac('0x2af')+_0x3e7980+_0x11ac('0x2b0')),0x2,_0x11ac('0x12f'));}_updateHostPlayer(_0x3e7980);}else if(_0x14b990['match'](/^\[##SUBHOST_ON\](.+)$/)){if(RegExp['$1']==me[_0x11ac('0x33')]){writeUserMessage(i18next['t'](_0x11ac('0x2b1')),0x2,_0x11ac('0x12f'),!![]);board[_0x11ac('0x150')]=0x1;setBoardConditions();}else{writeUserMessage(EJ(_0x11ac('0x2b2')+_name2link(RegExp['$1']),_name2link(RegExp['$1'])+_0x11ac('0x2b3')),0x2,_0x11ac('0x12f'));}}else if(_0x14b990[_0x11ac('0x14')](/^\[##TEMPLATE\]([A-Z]\d{3})/)){_handleGameChat(_0x47f542,EJ(_0x11ac('0x2b4'),_0x11ac('0x2b5'))+i18next['t'](_0x11ac('0x12e')+RegExp['$1']));}else if(_0x14b990[_0x11ac('0x14')](/^\[##REMATCH\]$/)){board['rematch'](board[_0x11ac('0x119')](_0x47f542));_interpretCommunicationCode(_0x47f542,_0x11ac('0x2b6'),0x2,!![],!![]);if(board[_0x11ac('0x140')]()){writeUserMessage(i18next['t'](_0x11ac('0x2b7')),0x2,_0x11ac('0x12f'),!![]);if(board[_0x11ac('0x9e')]()){client[_0x11ac('0x175')]();client[_0x11ac('0x2b8')](board['game'],board[_0x11ac('0x13c')]);}else{$(_0x11ac('0x2b9'))[_0x11ac('0x135')](_0x11ac('0x70'));}}}else if(_0x14b990[_0x11ac('0x14')](/^\[##.+\]/)){}else if(_0x14b990[_0x11ac('0x14')](/^\[auto\-chat\]\s#([A-Z]\d{3})$/)){_interpretCommunicationCode(_0x47f542,RegExp['$1'],0x2,![],!![]);}else{if(_0x47f542==board[_0x11ac('0x8d')][_0x11ac('0x193')][_0x11ac('0x33')]){_stopTypingIndicator(0x0);writeUserMessage('['+_name2link(_0x47f542)+']\x20'+_0x14b990,0x2,_0x11ac('0x27e'));}else if(_0x47f542==board['game'][_0x11ac('0x14e')][_0x11ac('0x33')]){_stopTypingIndicator(0x1);writeUserMessage('['+_name2link(_0x47f542)+']\x20'+_0x14b990,0x2,_0x11ac('0x27f'));}else if(_0x47f542==me[_0x11ac('0x33')]){writeUserMessage('['+_name2link(_0x47f542)+']\x20'+_0x14b990,0x2,_0x11ac('0x2a9'));}else if(board[_0x11ac('0x91')]()&&!_allowWatcherChat){return;}else{writeUserMessage('['+_name2link(_0x47f542)+']\x20'+_0x14b990,0x2,_0x11ac('0x2ba'));}sp['chatBoard']();}}function _handlePrivateChat(_0x48d317,_0x3e5de8){if(_0x3e5de8['match'](/^\[\#\#STUDY\](\d+)\/(.+)$/)){_updateStudyState(_0x48d317,parseInt(RegExp['$1']),RegExp['$2']);if(!(board[_0x11ac('0x187')]&&board[_0x11ac('0x149')]))return;if(_0x48d317!=me[_0x11ac('0x33')])_handleStudy();_updateHostPlayer(_0x48d317);return;}else if(_0x3e5de8[_0x11ac('0x14')](/^\[\#\#FITNESS\](\d),(\d)$/)){let _0x2a70b6=EJ(_0x11ac('0x2bb'),_0x11ac('0x2bc'))+i18next['t'](_0x11ac('0x2bd'))+':\x20'+_fitnessLevelText(RegExp['$1']);if(!board[_0x11ac('0x8d')][_0x11ac('0x193')][_0x11ac('0x2be')]()||!board[_0x11ac('0x8d')][_0x11ac('0x14e')][_0x11ac('0x2be')]())_0x2a70b6+=_0x11ac('0x29a')+i18next['t'](_0x11ac('0x2bf'))+':\x20'+_fitnessLevelText(RegExp['$2']);writeUserMessage(_0x2a70b6,0x2,_0x11ac('0x2c0'));return;}else if(_0x3e5de8['match'](/^\[\#\#INVITE\](\d+),(\d+),(.+)$/)){_handleInvitation(_0x48d317);return;}else if(_0x3e5de8['match'](/^\[\#\#REJECT\]/)){if(_0x3e5de8[_0x11ac('0x14')](/^\[\#\#REJECT\]([A-Z]\d{3})/))_interpretCommunicationCode(_0x48d317,RegExp['$1'],0x1,!![],![]);else writeUserMessage(_0x48d317+EJ('\x20did\x20not\x20accept\x20your\x20invitation.',_0x11ac('0x2c1')),0x1,'#008800',!![]);return;}else if(_0x3e5de8[_0x11ac('0x14')](/^\[auto\-PM\]/)){if(_0x3e5de8[_0x11ac('0x14')](/^\[auto\-PM\]\s#([A-Z]\d{3})/))_interpretCommunicationCode(_0x48d317,RegExp['$1'],0x2,![],!![]);return;}if(me[_0x11ac('0x10f')])return;let _0x122aa0=$(_0x11ac('0x2c2')+_0x48d317);if(!_0x122aa0[0x0]&&users[_0x48d317])_0x122aa0=_openPlayerInfo(users[_0x48d317],![]);let _0x9c0b0c=_0x122aa0[_0x11ac('0x6f')](_0x11ac('0x1c2'));$(_0x11ac('0x127'),{})[_0x11ac('0xb0')]('color',_0x11ac('0x2c3'))[_0x11ac('0xb')](_0x3e5de8)[_0x11ac('0x129')](_0x9c0b0c);_0x9c0b0c['append']('<br>');_0x9c0b0c['animate']({'scrollTop':_0x9c0b0c[0x0][_0x11ac('0x12c')]},_0x11ac('0x77'));_playerPMClick(_0x122aa0,!![]);if(!_0x122aa0[_0x11ac('0xdf')](_0x11ac('0x2c4'))&&!board[_0x11ac('0x91')]()){writeUserMessage(_0x11ac('0x2c5')+_name2link(_0x48d317)+']\x20'+_0x3e5de8[_0x11ac('0x122')](/^\[\#\#URGENT\]/,''),0x1,_0x11ac('0x8b'));if(currentLayer==0x2)writeUserMessage('PM:\x20['+_name2link(_0x48d317)+']\x20'+_0x3e5de8['replace'](/^\[\#\#URGENT\]/,''),0x2,_0x11ac('0x8b'));}if(!board[_0x11ac('0x91')]())sp['chatPrivate']();}function _handleInvitation(_0xa1582d){let _0x5bbd58=users[_0xa1582d];if(!_0x5bbd58){client[_0x11ac('0x1f9')](_0xa1582d,_0x11ac('0x1ba'));return;}if(board[_0x11ac('0x9e')]()){client[_0x11ac('0x1f9')](_0xa1582d,_0x11ac('0x2c6'));return;}if($(_0x11ac('0x2c7'))['dialog'](_0x11ac('0x2c4'))||_challengeUser){client[_0x11ac('0x1f9')](_0xa1582d,_0x11ac('0x2c8'));return;}if(_0x5bbd58[_0x11ac('0x1dc')]()){sp[_0x11ac('0x2c9')](_0x11ac('0x2ca'));$('#modalInvitation')[_0x11ac('0xdf')](_0x11ac('0x1c'));_initModalInvitation(_0x5bbd58);}}function _handleMile(_0x47e484){if(me[_0x11ac('0x10f')])return;_0x47e484=parseInt(_0x47e484);if(_0x47e484==-0x1)return;let _0x549810=_0x47e484-mileage;if(_0x549810>0x0)writeUserMessage(EJ(_0x11ac('0x2cb')+_0x549810+_0x11ac('0x2cc')+(_0x549810==0x1?'!':'s!'),_0x549810+_0x11ac('0x2cd')),0x1,'#FF3388');else if(_0x549810<0x0)writeUserMessage(EJ(_0x11ac('0x2ce')+-_0x549810+_0x11ac('0x2cc')+(_0x549810==-0x1?'':'s'),-_0x549810+_0x11ac('0x2cf')),0x1,_0x11ac('0x17d'));mileage=_0x47e484;_updateLobbyHeader();}function _handleWins(_0x33dfa6){if(parseInt(_0x33dfa6)%0x64==0x0)client[_0x11ac('0x2d0')](_0x11ac('0x2d1')+_0x33dfa6);}function _handleExp(_0x552401){let _0x11aac3=parseInt(_0x552401[_0x11ac('0x8')](',')[0x0]);let _0xbe1d4f=parseInt(_0x552401[_0x11ac('0x8')](',')[0x1]);let _0x345417=makeRank34FromExp(_0xbe1d4f);if(_0x345417!=makeRank34FromExp(_0xbe1d4f-_0x11aac3)){client[_0x11ac('0x2d0')]('[##EXP]'+board[_0x11ac('0x8d')][_0x11ac('0x179')]+','+_0xbe1d4f);writeUserMessage(EJ(_0x11ac('0x2d2'),_0x11ac('0x2d3')),0x2,_0x11ac('0x25e'),!![]);}writeUserMessage(EJ(_0x11ac('0x2d4')+_0x11aac3+_0x11ac('0x2d5')+_0xbe1d4f+'\x20EXP)\x20You\x27re\x20in\x20\x22'+_0x345417+_0x11ac('0x2d6'),_0x11aac3+_0x11ac('0x2d7')+_0xbe1d4f+_0x11ac('0x2d8')+_0x345417+_0x11ac('0x2d9')),0x2,'#DD0088');}function _handleClosed(){_stopAllTimeouts();$('#loginAlert')[_0x11ac('0xb')](i18next['t']('login.closed'));$(_0x11ac('0x2da'))['remove']();if(currentLayer!=0x0)showAlertDialog('disconnect',_backToEntrance);}function _backToEntrance(){$(_0x11ac('0xc8'))[_0x11ac('0x83')](_0x11ac('0xc9'),!![]);$('input#reloginButton')[_0x11ac('0xb0')](_0x11ac('0x108'),_0x11ac('0xb4'));_switchLayer(0x0);_clearAllParams();}function _clearAllParams(){users=new Object();tournaments=new Object();playerGrid['clear']()[_0x11ac('0xca')]();waiterGrid[_0x11ac('0x37')]()[_0x11ac('0xca')]();gameGrid['clear']()[_0x11ac('0xca')]();board[_0x11ac('0xe6')]();_checkLobbyButtonClick(!![]);$('#lobbyMessageArea')['empty']();_loadDefaultOptions();}function _updateStudyState(_0x1a2cea,_0x53b9f0,_0x541514='*'){let _0x21c35b=![];_studyBase=_0x53b9f0;_studySender=_0x1a2cea;if(_0x541514=='*'){_studyBranchMoves=null;}else{let _0x1e47c9=_0x541514[_0x11ac('0x8')]('/');if(_studyBranchMoves==null){writeUserMessage(_0x1a2cea+':\x20'+EJ(_0x11ac('0x2db')+_0x53b9f0,_0x53b9f0+_0x11ac('0x2dc')),0x2,'#008800');if(_0x1e47c9[_0x11ac('0x9b')]==0x1)_0x21c35b=!![];}else{if(_0x1e47c9[_0x11ac('0x9b')]==_studyBranchMoves[_0x11ac('0x9b')]+0x1)_0x21c35b=!![];}_studyBranchMoves=_0x541514[_0x11ac('0x8')]('/');}return _0x21c35b;}function _handleStudy(_0x510995=![]){_sendStudyBuffer=null;if(_studyBase==null)return;if(_studyBranchMoves==null){if(kifuGrid[_0x11ac('0x4b')](_0x11ac('0x189'))['data']()[_0x11ac('0x188')])_restorePublicKifu();kifuGrid[_0x11ac('0xcd')]()[_0x11ac('0x113')]();kifuGrid[_0x11ac('0x4b')](_studyBase)[_0x11ac('0x89')]();scrollGridToSelected(kifuGrid);board[_0x11ac('0x18a')](kifuGrid[_0x11ac('0xcd')](Array['from'](Array(_studyBase+0x1)[_0x11ac('0x190')]()))[_0x11ac('0x60')]());}else{kifuGrid[_0x11ac('0x37')]();kifuGrid[_0x11ac('0xcd')][_0x11ac('0x222')](board[_0x11ac('0x17f')][_0x11ac('0x2dd')](0x0,_studyBase+0x1));board[_0x11ac('0x18a')](kifuGrid[_0x11ac('0xcd')](Array['from'](Array(_studyBase+0x1)[_0x11ac('0x190')]()))[_0x11ac('0x60')]());let _0x75e7ad=board[_0x11ac('0x17f')][_studyBase];_studyBranchMoves[_0x11ac('0x9')](function(_0x517475,_0x118f7f){let _0x1b3e7c=new Movement(_0x75e7ad);_0x1b3e7c[_0x11ac('0x252')](_0x517475);_0x1b3e7c[_0x11ac('0x188')]=!![];_0x75e7ad=board[_0x11ac('0x2de')](_0x1b3e7c,_0x510995&&_0x118f7f==_studyBranchMoves[_0x11ac('0x9b')]-0x1);kifuGrid[_0x11ac('0xcd')]['add']([_0x75e7ad]);});board[_0x11ac('0x2df')]();if(_0x510995)board[_0x11ac('0x2e0')](_0x75e7ad[_0x11ac('0x2e1')],_0x75e7ad[_0x11ac('0x2e2')],_studySender,0xcc00);kifuGrid['draw']();kifuGrid[_0x11ac('0x4b')](_0x11ac('0x189'))[_0x11ac('0x89')]();scrollGridToSelected(kifuGrid);}}function _generateStudyText(_0x100184){let _0x1dcc80='';for(let _0x482f49=0x0;_0x482f49<=_0x100184;_0x482f49++){let _0x442d58=kifuGrid[_0x11ac('0x4b')](_0x482f49)['data']();if(!_0x442d58['branch']){_0x1dcc80=_0x442d58[_0x11ac('0x2e3')][_0x11ac('0x1d5')]();}else{_0x1dcc80+='/'+_0x442d58[_0x11ac('0x2e4')]();}}if(!_0x1dcc80[_0x11ac('0x14')](/\//))_0x1dcc80+='/*';return _0x1dcc80;}function sendStudy(_0x102c68=kifuGrid[_0x11ac('0x4b')]({'selected':!![]})['data']()['num']){_sendStudyBuffer=_generateStudyText(_0x102c68);if(timeouts['SEND_STUDY'])return;_sendStudyExecute();}function _sendStudyExecute(){if(_sendStudyBuffer==null)return;client[_0x11ac('0x8e')]('[##STUDY]'+_sendStudyBuffer);_sendStudyBuffer=null;setGeneralTimeout(_0x11ac('0x2e5'),0x2bc);}function _sendAutoChat(_0x5a6596){if(board[_0x11ac('0x8d')]){client['gameChat'](_0x11ac('0x2e6')+_0x5a6596);}else{client[_0x11ac('0x2d0')]('[auto-chat]\x20'+_0x5a6596);}}function _runTypingIndicator(_0x430a5a){let _0x1b624a=board[_0x11ac('0x119')](_0x430a5a);if(_0x1b624a==null)return;let _0xdb2c0d=_0x11ac('0x2e7')+_0x1b624a;let _0xddc825=$('#'+_0xdb2c0d);if(!_0xddc825[_0x11ac('0x9b')]){_0xddc825=$(_0x11ac('0x288'),{'id':_0xdb2c0d,'class':'typingIndicator'});let _0x49b86e=$(_0x11ac('0x11f'));_0x49b86e[_0x11ac('0x12a')](_0xddc825);_0xddc825[_0x11ac('0xb')]('['+_0x430a5a+']\x20'+i18next['t'](_0x11ac('0x2e8')));_0x49b86e[_0x11ac('0x12d')]({'scrollTop':_0x49b86e[0x0][_0x11ac('0x12c')]},_0x11ac('0x77'));}setGeneralTimeout('TYPE_'+_0x1b624a,0x1388,!![]);}function _stopTypingIndicator(_0x548d5d,_0xdf2db9=![]){if(_0xdf2db9){$(_0x11ac('0x2e9')+_0x548d5d)[_0x11ac('0x2ea')](_0x11ac('0x77'),function(){$(_0x11ac('0x2e9')+_0x548d5d)[_0x11ac('0x160')]();});}else{$(_0x11ac('0x2e9')+_0x548d5d)['remove']();}clearGeneralTimeout(_0x11ac('0x2eb')+_0x548d5d);}function _handleServers(_0xaf2f53){_0xaf2f53[0x0][_0x11ac('0x31')]=restoreIdleConnections(_0xaf2f53[0x0][_0x11ac('0x31')]);serverGrid[_0x11ac('0xcd')][_0x11ac('0x222')](_0xaf2f53);serverGrid[_0x11ac('0xca')]();serverGrid[_0x11ac('0x4b')](0x0)[_0x11ac('0x89')]();$(_0x11ac('0xc8'))[_0x11ac('0x83')](_0x11ac('0xc9'),![]);_loginTypeChange();if(testMode)_testFunction(0x1);}function _handleOptions(_0x3dc8e6){options=Object[_0x11ac('0x2ec')](options,_0x3dc8e6);_enforceOptions();_loadOptionsToDialog();}function _handleTournaments(_0x3c390c){tournaments=new Object();_0x3c390c[_0x11ac('0x9')](function(_0x2f4cbc){tournaments[_0x2f4cbc['id']]=new Tournament(_0x2f4cbc);});$(_0x11ac('0x2ed'))['empty']();Object['keys'](tournaments)[_0x11ac('0x9')](function(_0x5617b7){if(tournaments[_0x5617b7][_0x11ac('0x2ee')]())$(_0x11ac('0x2ed'))[_0x11ac('0x12a')]($(_0x11ac('0x2ef'))[_0x11ac('0x79')](_0x5617b7)[_0x11ac('0xb')](tournaments[_0x5617b7][_0x11ac('0x33')]()));});}function _handleCheckOpponent(_0x3425aa,_0x5a34c7){if(_0x3425aa[_0x11ac('0x2f0')]==null)return;let _0x33c3be=$('[id=check-game-'+_0x5a34c7+']')[_0x11ac('0xb0')]('display',_0x11ac('0x1ac'));if(_0x3425aa[_0x11ac('0x2f0')]){_0x33c3be[_0x11ac('0xb')](i18next['t'](_0x11ac('0x2f1')));}else{_0x33c3be['text'](i18next['t']('challenger.tournament_played'));}}function _handleEvaluation(_0x414fff){let _0x33c9a2=$(_0x11ac('0x2f2')+_0x414fff['name']+']');let _0xb70721=Math[_0x11ac('0x2f3')](_0x414fff[_0x11ac('0x2f4')]-_0x414fff[_0x11ac('0x2f5')],0x0);if(_0x33c9a2[_0x11ac('0x9b')])_0x33c9a2[_0x11ac('0xb')](_0xb70721);}function _handlePlayerDetail(_0xc4c2ef,_0x4de1f5){let _0x29deea=$('#player-info-window-'+_0x4de1f5);if(_0x29deea[0x0]){let _0x5bcfd2=0x0;if(_0xc4c2ef[_0x11ac('0x2f6')]+_0xc4c2ef[_0x11ac('0x2f7')]>0x0)_0x5bcfd2=0x64*_0xc4c2ef[_0x11ac('0x2f6')]/(_0xc4c2ef[_0x11ac('0x2f6')]+_0xc4c2ef[_0x11ac('0x2f7')]);_0x29deea[_0x11ac('0x6f')](_0x11ac('0x2f8'))[_0x11ac('0x136')](playingStyleName(_0xc4c2ef[_0x11ac('0x2f9')]));_0x29deea[_0x11ac('0x6f')](_0x11ac('0x2fa'))[_0x11ac('0x136')](_0xc4c2ef['wins']+'\x20'+i18next['t'](_0x11ac('0x2fb'))+'\x20'+_0xc4c2ef[_0x11ac('0x2f7')]+'\x20'+i18next['t'](_0x11ac('0x2fc'))+'\x20('+_0x5bcfd2[_0x11ac('0x2fd')](0x1)+'%)');_0x29deea[_0x11ac('0x6f')](_0x11ac('0x2fe'))['html'](i18next['t'](_0x11ac('0x2ff'))+':\x20'+_0xc4c2ef['streak_best']+'\x20('+i18next['t'](_0x11ac('0x300'))+':\x20'+Math[_0x11ac('0x2f3')](0x0,_0xc4c2ef[_0x11ac('0x301')])+')');}}function _switchLayer(_0x12dad5){$(_0x11ac('0x302'))[_0x11ac('0xb0')]({'z-index':_0x12dad5==0x0?0x2:0x1,'opacity':_0x12dad5==0x0?0x1:0x0});$(_0x11ac('0x303'))[_0x11ac('0xb0')]({'z-index':_0x12dad5==0x1?0x2:0x1,'opacity':_0x12dad5==0x1||_0x12dad5==0x2?0x1:0x0});$(_0x11ac('0x304'))[_0x11ac('0xb0')]({'z-index':_0x12dad5==0x2?0x2:0x1,'opacity':_0x12dad5==0x2?0x1:0x0});currentLayer=_0x12dad5;}function setGeneralTimeout(_0x3a26bf,_0x443f21,_0x202e2d=![]){if(timeouts[_0x3a26bf]){if(_0x202e2d)clearGeneralTimeout(_0x3a26bf);else return;}timeouts[_0x3a26bf]=setTimeout(_handleGeneralTimeout,_0x443f21,_0x3a26bf);}function clearGeneralTimeout(_0x34a7ee){if(timeouts[_0x34a7ee]){clearTimeout(timeouts[_0x34a7ee]);timeouts[_0x34a7ee]=![];}}function _enforceOptions(){sp[_0x11ac('0x305')](options['timer_sound_type']);sp[_0x11ac('0x306')]=options[_0x11ac('0x307')]==0x1;sp[_0x11ac('0x308')]=options[_0x11ac('0x309')]==0x1;sp[_0x11ac('0x30a')]=options['gamechat_sound_play']==0x1;sp[_0x11ac('0x30b')]=options[_0x11ac('0x30c')]==0x1;board[_0x11ac('0x30d')](options['piece_type']);let _0x2a24e9=[0x1,1.5,0x2][options[_0x11ac('0x30e')]];if(board[_0x11ac('0x30f')](_0x2a24e9)){$('#boardLeftBottomHBox')['width'](_0x2a24e9*board[_0x11ac('0x310')][_0x11ac('0x72')]());_resize();}kifuGrid['rows']()[_0x11ac('0xce')]();}function _handleGeneralTimeout(_0x36d9d1){timeouts[_0x36d9d1]=![];switch(_0x36d9d1){case _0x11ac('0xf9'):$(_0x11ac('0x1ea'))[_0x11ac('0x160')]();if(_challengeUser){_challengeUser=null;writeUserMessage(i18next['t'](_0x11ac('0x311')),0x1,'#008800',!![]);client[_0x11ac('0x1b7')](_0x11ac('0x312'));}break;case _0x11ac('0x1ee'):$(_0x11ac('0x1ea'))[_0x11ac('0x313')]();case'REFRESH':$(_0x11ac('0x10c'))[_0x11ac('0x135')](_0x11ac('0x70'));break;case _0x11ac('0x314'):if(currentLayer==0x1)_refreshLobby();break;case _0x11ac('0x214'):if(client[_0x11ac('0x20b')]=='EARTH'){client[_0x11ac('0x271')]([0x5,0x8,0xa,0xa,0xc,0xc,0xc,0xc][_hourMileCount],config[_0x11ac('0x270')]);if(_hourMileCount<0x7){_hourMileCount++;setGeneralTimeout(_0x11ac('0x214'),0x36ee80);}}break;case _0x11ac('0x2e5'):_sendStudyExecute();break;case'SEND_TYPE':client[_0x11ac('0x8e')](_0x11ac('0x315'));break;case _0x11ac('0x316'):_stopTypingIndicator(0x0,!![]);break;case'TYPE_1':_stopTypingIndicator(0x1,!![]);break;case _0x11ac('0x317'):_refreshWorldClocks();break;}}function _stopAllTimeouts(){Object['keys'](timeouts)[_0x11ac('0x9')](function(_0x26c95a){clearGeneralTimeout(_0x26c95a);});}function _name2link(_0x3aba51){return _0x11ac('0x318')+_0x3aba51+_0x11ac('0x319')+_0x3aba51+'</SpaN>';}function _game2link(_0x3726e3,_0x146aaf){return _0x11ac('0x31a')+_0x146aaf+_0x11ac('0x31b')+_0x3726e3+'</SpaN>';}function _isFavorite(_0x3504cb){return![];}function _isColleague(_0x247d81){return![];}function getPremium(){if(premium==hidden_prm)return premium;else return 0x0;}function _enforcePremium(){_DisableOptionsByPremium();}function _refreshLobby(_0x492cde=![]){client[_0x11ac('0x31c')](_0x492cde);client[_0x11ac('0x31d')]();setGeneralTimeout(_0x11ac('0x314'),0x2bf20,!![]);}function _askEvaluation(_0x558df6){if(me[_0x11ac('0x10f')]||_0x558df6['match'](/^GUEST_/))return;$(_0x11ac('0x2da'))[_0x11ac('0x160')]();let _0x4d8b15=$(_0x11ac('0x288'),{'id':'userEvaluationDialog'});_0x4d8b15[_0x11ac('0x136')](EJ(_0x11ac('0x31e'),_0x11ac('0x31f'))+_0x558df6+EJ(_0x11ac('0x320'),_0x11ac('0x321')));$(_0x11ac('0x322'),{'href':'#','data-answer':'1'})[_0x11ac('0xb')](EJ(_0x11ac('0x323'),_0x11ac('0x324')))[_0x11ac('0x129')](_0x4d8b15);$(_0x11ac('0x322'),{'href':'#','data-answer':'-1'})['text'](EJ(_0x11ac('0x325'),_0x11ac('0x326')))[_0x11ac('0x129')](_0x4d8b15);_0x4d8b15['find']('a')['click'](function(){$('#userEvaluationDialog')[_0x11ac('0x160')]();apiClient[_0x11ac('0x327')](_0x558df6,parseInt($(this)[_0x11ac('0x60')](_0x11ac('0x328')))>0x0);});let _0x18315e=$(_0x11ac('0x11e'));_0x18315e['append'](_0x4d8b15);_0x18315e[_0x11ac('0x12d')]({'scrollTop':_0x18315e[0x0][_0x11ac('0x12c')]},'fast');}function _generateKIF(){let _0x576f7c=gameTypeToKIF(board['game'][_0x11ac('0x179')]);if(_0x576f7c==null)return'';let _0x54ece2=[];_0x54ece2['push'](_0x11ac('0x329'));let _0x4ec79c=board[_0x11ac('0x8d')][_0x11ac('0x5e')][_0x11ac('0x8')]('+')[0x4];_0x54ece2[_0x11ac('0x1a')](_0x11ac('0x32a')+_0x4ec79c[_0x11ac('0x24d')](0x0,0x4)+'/'+_0x4ec79c[_0x11ac('0x24d')](0x4,0x2)+'/'+_0x4ec79c['substr'](0x6,0x2));_0x54ece2[_0x11ac('0x1a')](_0x11ac('0x32b'));_0x54ece2[_0x11ac('0x1a')]('持ち時間：'+Math[_0x11ac('0x32c')](board[_0x11ac('0x8d')][_0x11ac('0x32d')]/0x3c)+'分+'+board[_0x11ac('0x8d')]['byoyomi']+'秒');_0x54ece2['push'](_0x11ac('0x32e')+_0x576f7c);_0x54ece2[_0x11ac('0x1a')](_0x11ac('0x32f')+board[_0x11ac('0x8d')][_0x11ac('0x193')][_0x11ac('0x33')]);_0x54ece2[_0x11ac('0x1a')](_0x11ac('0x330')+board[_0x11ac('0x8d')]['white'][_0x11ac('0x33')]);_0x54ece2[_0x11ac('0x1a')](_0x11ac('0x331'));board['moves'][_0x11ac('0x9')](function(_0x2a4318){let _0x42cabf=_0x2a4318[_0x11ac('0x332')]();if(_0x42cabf!=null)_0x54ece2[_0x11ac('0x1a')](_0x42cabf);});let _0x1ba2a5=![];kifuGrid[_0x11ac('0xcd')]()[_0x11ac('0x60')]()[_0x11ac('0xc2')](function(_0xf5c75a,_0x2bb48){if(_0xf5c75a[_0x11ac('0x188')]){if(!_0x1ba2a5){_0x1ba2a5=!![];_0x54ece2[_0x11ac('0x1a')]('');_0x54ece2['push'](_0x11ac('0x333')+_0xf5c75a[_0x11ac('0x2e3')]+'手');}_0x54ece2['push'](_0xf5c75a[_0x11ac('0x332')]());}});return _0x54ece2[_0x11ac('0x170')]('\x0d\x0a');}function generateKifuNoteObject(){if(!board[_0x11ac('0x8d')])return null;if(board[_0x11ac('0x8d')][_0x11ac('0x14d')]()||!board[_0x11ac('0x8d')][_0x11ac('0x257')])return null;let _0x553952=board[_0x11ac('0x8d')]['gameId'][_0x11ac('0x8')]('+')[0x4];let _0xed4be8='';if(board[_0x11ac('0x16e')]!=null){if(board[_0x11ac('0x16e')]==-0x1)_0xed4be8=_0x11ac('0x334');else if(board[_0x11ac('0x16e')]==0x0)_0xed4be8=(board[_0x11ac('0x8d')][_0x11ac('0x179')][_0x11ac('0x14')](/^hc/)?'下手':'先手')+'勝ち';else if(board[_0x11ac('0x16e')]==0x1)_0xed4be8=(board[_0x11ac('0x8d')][_0x11ac('0x179')][_0x11ac('0x14')](/^hc/)?'上手':'後手')+'勝ち';if(board['game'][_0x11ac('0x257')]&&board['game'][_0x11ac('0x257')]!=_0x11ac('0x335'))_0xed4be8+='('+Movement['CONST'][_0x11ac('0x336')][board[_0x11ac('0x8d')][_0x11ac('0x257')]]+')';}let _0x50b7ee=[];let _0x467124=[];let _0x145540=0x0;board['moves'][_0x11ac('0x9')](function(_0x136b58){if(_0x136b58[_0x11ac('0x2e3')]==0x1&&_0x136b58[_0x11ac('0x337')]==Position[_0x11ac('0x338')][_0x11ac('0x339')])_0x467124[_0x11ac('0x1a')](',');if(_0x136b58['num']!=0x0&&!_0x136b58['endTypeKey']){_0x467124[_0x11ac('0x1a')](_0x136b58[_0x11ac('0x33a')]());_0x145540+=0x1;}if(_0x467124['length']==0x96){_0x50b7ee[_0x11ac('0x1a')](_0x467124);_0x467124=[];}});if(_0x467124[_0x11ac('0x9b')]>0x0)_0x50b7ee[_0x11ac('0x1a')](_0x467124);let _0x1a64d6={'rule':HANDICAPS_JA[board['game'][_0x11ac('0x179')]]||'','startedAt':_0x553952[_0x11ac('0x24d')](0x0,0x4)+'/'+_0x553952[_0x11ac('0x24d')](0x4,0x2)+'/'+_0x553952[_0x11ac('0x24d')](0x6,0x2)+'\u3000'+_0x553952[_0x11ac('0x24d')](0x8,0x2)+':'+_0x553952[_0x11ac('0x24d')](0xa,0x2),'endedAt':board[_0x11ac('0x25a')]['tz']('Asia/Tokyo')['format'](_0x11ac('0x33b')),'place':_0x11ac('0x33c')+client[_0x11ac('0x20b')]+'サーバ','thinkingTime':'各\x20'+Math[_0x11ac('0x32c')](board[_0x11ac('0x8d')][_0x11ac('0x32d')]/0x3c)+'分\x20(切れたら1手'+board[_0x11ac('0x8d')][_0x11ac('0x33d')]+'秒)','blackName':board[_0x11ac('0x8d')]['black'][_0x11ac('0x33')]+_0x11ac('0x33e')+board['game'][_0x11ac('0x193')][_0x11ac('0x33f')](),'whiteName':board[_0x11ac('0x8d')][_0x11ac('0x14e')][_0x11ac('0x33')]+_0x11ac('0x33e')+board[_0x11ac('0x8d')][_0x11ac('0x14e')][_0x11ac('0x33f')](),'blackRank':(board['game'][_0x11ac('0x193')][_0x11ac('0x17a')]?'(':'')+makeRankFromRating(board[_0x11ac('0x8d')][_0x11ac('0x193')]['rate'],!![])+(board[_0x11ac('0x8d')][_0x11ac('0x193')][_0x11ac('0x17a')]?')':''),'whiteRank':(board[_0x11ac('0x8d')][_0x11ac('0x14e')][_0x11ac('0x17a')]?'(':'')+makeRankFromRating(board[_0x11ac('0x8d')][_0x11ac('0x14e')]['rate'],!![])+(board[_0x11ac('0x8d')][_0x11ac('0x14e')][_0x11ac('0x17a')]?')':''),'moveSets':_0x50b7ee,'movesCount':_0x145540[_0x11ac('0x1d5')]()+'手','result':_0xed4be8,'opening':board[_0x11ac('0x8d')][_0x11ac('0x340')]!='*'?openingTypeObject(board['game']['opening'],!![])[_0x11ac('0x341')]:'','tournament':board[_0x11ac('0x8d')]['getTournament']()?board[_0x11ac('0x8d')][_0x11ac('0x272')]()[_0x11ac('0x33')]():'','usedTime':'☗\x20'+sec2minsec(board[_0x11ac('0x342')][0x0])+_0x11ac('0x343')+sec2minsec(board[_0x11ac('0x342')][0x1])};return _0x1a64d6;}function _countGuestGame(){let _0x435212=new Date();if(localStorage[_0x11ac('0x344')]&&localStorage[_0x11ac('0x344')]==_0x435212[_0x11ac('0x345')]())localStorage['status']=parseInt(localStorage[_0x11ac('0x11a')])+0x1;else{localStorage[_0x11ac('0x344')]=_0x435212[_0x11ac('0x345')]();localStorage[_0x11ac('0x11a')]=0x1;}}function _checkGuestGamesExpired(){if(client[_0x11ac('0x20b')]==_0x11ac('0x346'))return![];if(!me['isGuest'])return![];let _0x4864b9=new Date();if(localStorage['period']&&localStorage[_0x11ac('0x344')]==_0x4864b9[_0x11ac('0x345')]()&&localStorage[_0x11ac('0x11a')]>=0x3){showAlertDialog(_0x11ac('0x347'));return!![];}else{return![];}}function _loadDefaultOptions(){options={'timer_sound_type':0x2,'piece_type':0x0,'piece_type_34':0x1,'button_sound_play':0x1,'lobbychat_sound_play':0x1,'gamechat_sound_play':0x1,'end_sound_play':0x1,'hold_piece':0x1,'highlight_movable':0x0,'notation_style':0x1,'pm_auto_open':0x0,'accept_arrow':0x1,'arrow_color':0xcc00,'history_length':0x32,'postgame_study_level':0x0,'english_level':0x0,'receive_kifu_comment':0x0,'board_size':0x0,'favorites':[],'members':[],'opponents':[],'show_accumulated_time':0x0};_enforceOptions();_loadOptionsToDialog();}function _generateWorldClocks(){WorldClock['CONST'][_0x11ac('0x348')][_0x11ac('0x9')](function(_0x2f6be9){let _0x35ef8f=new WorldClock(_0x2f6be9[_0x11ac('0x349')],_0x2f6be9[_0x11ac('0x34a')]);$(_0x11ac('0x34b'))['append'](_0x35ef8f[_0x11ac('0x310')]);_worldClocks['push'](_0x35ef8f);});}function _refreshWorldClocks(){let _0x18c405=moment();_worldClocks['forEach'](function(_0x2d624f){_0x2d624f[_0x11ac('0xca')](_0x18c405);});setGeneralTimeout(_0x11ac('0x317'),0x2710);}function _fitnessLevelText(_0x28f623){let _0x1ea60c=parseInt(_0x28f623);if(_0x1ea60c==0x0)return i18next['t'](_0x11ac('0x34c'));else return i18next['t'](_0x11ac('0x34d'))+(_0x1ea60c-0x1)[_0x11ac('0x1d5')]();}function _findGameByUser(_0x4498fd){let _0x33face=null;gameGrid['rows']()[_0x11ac('0x60')]()[_0x11ac('0x34e')]()[_0x11ac('0x34f')](function(_0x249c89){if(_0x249c89[_0x11ac('0x350')](_0x4498fd)){_0x33face=_0x249c89;return!![];}});return _0x33face;}