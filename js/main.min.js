var _0x36cd=['typingIndicator-','<p></p>','typingIndicator','msg.typing','TYPE_','fadeOut','#typingIndicator-','assign','amJoined','#newGameTournamentSelect','<option/>','to_play','challenger.tournament_not_yet','[id=get-evaluation-','max','good','bad','wins','losses','p#p3','style_id','player_info.win','toFixed','p#p5','streak_best','player_info.current','streak','div#layerLogin','div#layerLobby','div#layerBoard','setByoyomiType','timer_sound_type','gameStartEndEnabled','gamechat_sound_play','lobbychat_sound_play','setPieceDesignType','piece_type','board_size','setScale','msg.no_answer','C031','AUTO_REFRESH','EARTH','[##TYPE]','TYPE_0','TYPE_1','WORLD_CLOCK','<sPAn\x20onclick=\x22_openPlayerInfo(users[\x27','\x27])\x22\x20class=\x22name-link\x22>','</SpaN>','<sPAn\x20onclick=\x22_enterGameById(\x27','who','list','Evaluate\x20','対局相手','\x27s\x20game\x20manner\x20->\x20','さんの対局マナーを評価して下さい\x20→\x20','<a></a>','[Good]','[良い]','[Bad]','[悪い]','postEvaluation','answer','#KIF\x20version=2.0\x20encoding=UTF-8','開始日時：','場所：81Dojo','持ち時間：','floor','byoyomi','手合割：','先手：','手数----指手---------消費時間','toKIF','join','gameEndType','引き分け','RESIGN','CONST','special_notations_ja','owner','GOTE','endTypeKey','toKifuNote','Asia/Tokyo','format','81道場\x20','サーバ','total','分\x20(切れたら1手','&nbsp;','opening','tip','&emsp;☖\x20','accumulatedTimes','period','getDay','MOON','guest_expire','SEEDS','key','timezone','#worldClocks','div','option.not_defined','option.level','toArray','some','isUserIn','http://81dojo.com/dojo/images/','loadNewPosition','test','テスト','shogihub.com','search','substring','p#versionText','text','ver.\x20','#boardBox','addEventListener','load','split','get','dat/countries.txt','responseText','forEach','TITLE_HOLDERS','titleNames','titleNameTips','titleAvatars','banned','push','trim','http://81dojo.com/dojo/infoData.html?','getJSON','dat/config.json?','allowConsole','language','locale','use','init','locales/{{lng}}.json?','languageChanged','dataTableExt','oSort','rate-str-asc','rateStrToRate','rate-str-desc','name','35%','dt-body-left','<img\x20class=\x22inline\x22\x20src=\x22img/','.png\x22>\x20','description_en','description_ja','population','single','Loading...','読込中','#playerGrid','10%','title','14%','rank','nameStr','40%','country','12%','rate','dt-body-right','rate-str','desc','clear','#playerGrid\x20tbody','dblclick','row','user-select','hasClass','selected','preventDefault','index','#waiterGrid','DataTable','waiter','50%','ruleStr','27%','13%','#waiterGrid\x20tbody','node','senteStr','29%','ruleShort','16%','movesStr','openingStr','maxRate','#gameGrid\x20tbody','data','#watcherGrid','#watcherGrid\x20tbody','#kifuGrid','numStr','15%','moveStr','timeStr','25%','parent','.subMenu','.menuBar\x20>\x20ul\x20>\x20li','hover','find','button-disabled','min-width','width','slideUp','fast','login','#usernameInput','val','dat','#passwordInput','#hiddenPass','dat2','save','#loginSave','checked','true','#languageSelector','openingMusic','#openingMusicCheckBox','prop','muteOpening','autocomplete','item','value','select','lobby.player_not_found','#FF0000','isPlaying','isRated','gameChat','onfocus','game','[##M_IN]0,0','beforeunload','You\x20are\x20player.','You\x20are\x20player.\x20Exit\x20the\x20room\x20before\x20closing\x20the\x20browser.','unload','isHost','getElementById','layerBoard','ondragstart','#lobbyChatInput','keyup','keyCode','length','chat','#boardChatInput','SEND_TYPE','onmousemove','clientX','clientY','focus','setCallbackFunctions','SERVERS','OPTIONS','PLAYER','CHECK_OPPONENT','EVALUATION','onresize','#layerLobby','div.menuBar','a.button','css','innerWidth','#layerBoard','#lobbyChatBox','insertAfter','#playerListBox','flex','initial','#gameGridWrapper','11\x2011\x201px','actualWidth','actualHeight','#boardChatBox','insertBefore','#boardRightBottomHBox','#watcherBox','#kifuBox','#boardLeftBottomHBox','#playerGridWrapper,\x20#waiterGridWrapper,\x20#gameGridWrapper,\x20#watcherGridWrapper,\x20#kifuGridWrapper','each','.dataTables_scrollBody','height','thead','#layerLoginContents','animate','startOpening','input[name=loginType],\x20input#usernameInput,\x20input#passwordInput,\x20input#loginSave,\x20input#loginButton','disabled','draw','p#loginAlert','changeLanguage','rows','invalidate','oLanguage','sEmptyTable','loading','settings','board.no_watchers','span#languageFlag','html','#languageSelector\x20option:selected','code','flagImgTag16','[data-i18n]','attr','[data-i18n-value]','data-i18n-value','#newGameRuleSelect,\x20#newGameStudyRuleSelect','keys','append','<option\x20/>','#modalNewGame,\x20#modalChallenger,\x20#modalInvitation,\x20#modalImpasse,\x20#modalOption,\x20#modalChatTemplate','dialog','data-i18n-title','[id^=i18n-]','button','option','label','#usernameInput,\x20#passwordInput','input[name=loginType]:checked','tooltip','close','Please\x20select\x20a\x20server.','#loginButton,\x20#passwordInput,\x20#usernameInput','login.connecting','port','guest','dojo_guest','LOGGED_IN','LOGIN_FAILED','LOBBY_IN','LOBBY_OUT','GAMECHAT','PRIVATECHAT','MOVE','GAME_END','ERROR','CLOSED','LIST','WATCHERS','CHALLENGE','ACCEPT','DECLINE','GAME_SUMMARY','START','RESULT','MONITOR','MILE','EXP','WINS','ENTER','LEAVE','DISCONNECT','connect','input#reloginButton','display','none','img#entrance-img','img/entrance_ja.jpg','src','img/81Dojo_bye.jpg','#refreshButton','addClass','REFRESH','isGuest','#modalNewGame','open','http://system.81dojo.com/','deselect','gameId','lockedOut','lobby.require_pass','enterPass','isVariant','This\x20game\x20rule\x20is\x20not\x20supported\x20by\x20HTML\x20client\x20yet.','#ff0000','setGame','match','status','msg.reconnect_while_game','#008800','reconnect','watchers','monitor','#lobbyMessageArea','#boardMessageArea','p#disconnectTimer,\x20p#typingIndicator-0,\x20p#typingIndicator-1','detach','replace','&lt;','<span','</span>','<br>&emsp;','<span></span>','bold','appendTo','scrollTop','scrollHeight','code.','#boardContents','pointer-events','#checkLobbyButton','100%','border-bottom','removeClass','<i\x20class=\x22fa\x20fa-eye\x20fa-2x\x22></i>','5px\x20ridge\x20orange','40px','myRoleType','turn','position','<(_\x20_)>\x20負けました。(Makemashita.)','resign','isPlayer','rematchAgreed','[##REMATCH]','empty','msg.rematch_ended','<(_\x20_)>\x20有難うございました。(Arigatou-gozaimashita.)','#modalChatTemplate','[##TEMPLATE]','flipBoard','#modalImpasse','calcImpasse','onListen','clearArrows','[##ARROW]CLEAR','white','isPlayerPresent','black','[##GIVEHOST]','studyHostType','[##SUBHOST_ON]','canCalculateMaterialBalance','Material\x20balance\x20(move\x20#','駒割計算結果(','):\u3000','手まで):\u3000','getMaterialBalance','This\x20function\x20is\x20only\x20for\x20even\x20games.','平手以外では使えません','http://kyokumen.jp/positions/','toSFEN','_blank','gameType','This\x20board\x20cannot\x20be\x20shared.','この盤面はシェアできません','<textarea></textarea>','clip-board-area','body','#clip-board-area','execCommand','copy','now','81Dojo-','.kif','This\x20game\x20cannot\x20be\x20exported.','この対局は出力できません','./kifu_note.html','New\x20window\x20could\x20not\x20be\x20opened','ウインドウ作成に失敗しました','toKifuURL','This\x20board\x20does\x20not\x20have\x20a\x20kifu\x20URL.','この盤面には棋譜URLの設定がありません','isStudy','createElement','input','type','file','change','target','files','onload','result','readAsText','click','#modalOption',':checked','#G101','#G100','closeGame','isWatcher','msg.last_kifu_url','getOpponent','provisional','msg.before_downgrade','#FF3388','move','moves','input[name=kifuModeRadio]:eq(0)','#kifuGridWrapper','local-kifu','isSubHost','#G000','isPostGame','count',':last','branch','replayMoves','redrawAllArrows','setBoardConditions','input[name=kifuModeRadio]:eq(','#G003','from','add','hostMark','gridObject','playerInfos','#player-info-rate','timeout','pauseAllTimers','#flipButton','style','#replayButtons','input[name=kifuModeRadio]','#resignButton','#clearArrowsButton,\x20#positionMenuButton,\x20#kifuMenuButton,\x20#rematchButton,\x20#closeGameButton','#receiveWatcherChatCheckBox','api','#greetButton','#clearArrowsButton,\x20#flipButton,\x20#positionMenuButton,\x20#kifuMenuButton','#logoutButton','input[name=kifuModeRadio]:eq(1)','.buttons-for-host','#giveHostButton','#uploadKifuButton','submenu-button-disabled','#kifuNoteButton,\x20#shareKifuTwitterButton,\x20#shareKifuFacebookButton','input[name=\x22newGameType\x22]:checked','block','#newGamePasswordInput','wait','#newGameTotalSelect\x20option:selected','#newGameByoyomiSelect\x20option:selected','stopWaiting','#newGameStudyRuleSelect\x20option:selected','#newGameStudyBlack','#newGameStudyWhite','accept','decline','Rejected\x20the\x20challenge\x20from\x20','さんからの挑戦をパスしました。','privateChat','Declined\x20the\x20invitation\x20from\x20','#player-info-window-','<div></div>','player-info-window-','titleName','<div\x20id=\x22player-info-layer-1\x22\x20class=\x22hbox\x22\x20style=\x22pointer-events:none\x22>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22avatar-wrapper\x22><img\x20class=\x22avatar\x22/></div>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex:1;margin-left:10px\x22><p\x20id=\x22p1\x22></p><p\x20id=\x22p2\x22></p><p\x20id=\x22p3\x22></p><p\x20id=\x22p4\x22></p><p\x20id=\x22p5\x22></p></div>\x20\x20\x20\x20\x20\x20\x20\x20</div>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22player-info-layer-2\x22\x20style=\x22margin-top:-128px;opacity:0\x22>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22privateMessageArea\x22></div>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22hbox\x22\x20style=\x22margin-top:5px\x22><span\x20style=\x22margin-right:5px;white-space:nowrap\x22>PM:</span><input\x20id=\x22privateChatInput\x22\x20style=\x22flex:1\x22></div>\x20\x20\x20\x20\x20\x20\x20\x20</div>\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22check-game\x22\x20id=\x22check-game-','\x22></div>','auto','left+','\x20top+','#privateMessageArea','remove','fa\x20fa-graduation-cap\x20font-fa\x20buttons-for-host\x20connected-button-left','fa\x20fa-user-plus\x20font-fa\x20buttons-for-host\x20connected-button-right','board.give_subhost','player_info.challenge','fa\x20fa-info-circle\x20font-fa','fa\x20fa-comment\x20font-fa','.ui-dialog-buttonpane','#privateChatInput','color','#33f','<br>','getPlayerDetail','waitingChallengeableTournament','checkTournamentOpponent','getEvaluation','avatarURL','flagImgTag27','toString','p#p2','R:\x20','mobileIconTag','<img\x20class=\x22icon-evaluation\x22\x20src=\x22img/icon_like.png\x22><span\x20class=\x22get-evaluation\x22\x20id=\x22get-evaluation-','\x22>?</span>','msg.still_in_game','msg.challenge_only_one','listAsWaiter','waitingTournamentId','You\x20are\x20not\x20registered\x20to\x20this\x20tournament.','msg.no_challenge_6dan','waitingGameName','seek','This\x20game\x20rule\x20is\x20not\x20supported\x20yet.','HTML版は特殊ルールには未対応です。','msg.no_guest_rating','isMobile','The\x20opponent\x20is\x20not\x20waiting\x20with\x20own\x20game\x20rule.','相手は対局待をしていません。','The\x20opponent\x20is\x20not\x20waiting\x20with\x20own\x20game\x20rule.\x20You\x20can\x20invite\x20him\x20if\x20you\x20wait\x20with\x20your\x20own\x20game\x20rule.','相手は対局待をしていません。自分が対局待にすることで招待メッセージを送ることが可能です。','idle','\x20is\x20not\x20accepting\x20challenge\x20or\x20invitations\x20right\x20now.','inGameRoom','\x20is\x20in\x20another\x20game\x20right\x20now.','[##INVITE]','さんに送信しました。(拒否された場合は連続送信しないで下さい)','div#player-info-layer-1','opacity','div#player-info-layer-2','kachi','[##GRAB]','log','Event\x20received:\x20','stopOpening','#loginAlert','login.successfull','div#layerLoginContents','#serverLogo','img/','serverName','.png','#header-serverName','\x20:\x20','username','indexOf','splice','getTournaments','HOUR_MILE','#classSurveyButton','You\x20have\x20','クラス','様、いつもご利用有難うございます。＜(_\x20_)＞','#FFBB00','#header-playerName','\x20D-Miles\x20:\x20','\x20Dマイル\x20:\x20','#header-premium','\x20class','shift','#findUser','source','setFromStudy','setFromList','isMyDisconnectedGame','新鋭棋士','\x20\x20-\x20\x20','\x20logged\x20in','\x20via\x20mobile','\x20from\x20','name_en','\u3000Now\x20on\x20','-win\x20streak!','\x20さんが','モバイルから','ログインしました。\x20(','連勝中!','setFromLobbyIn','setFromGame','disableChallenge','play','CHALLENGER','C005','#modalChallenger','startGame','setKifuId','gameStart','#444444','You\x20are\x20Black\x20','isHandicap','(Handicap\x20taker).','(Sente).','あなた','は下手(したて)','が先手','です。','You\x20are\x20White\x20','(Handicap\x20giver).','(Gote).\x0a','が上手(うわて)','は後手','msg.mute_chat','#G020','#G021','[##FITNESS]','english_level','substr','getPlayersTimer','useTime','addMoveToKifuGrid','setTime','runningTimer','run','p#disconnectTimer','getFinalMove','setGameEnd','SUSPEND','TIME_UP','sayTimeUp','toGameEndMessage','#DD0088','LOSE','###\x20You\x20Lose\x20###','gameEnd','WIN','setResult','###\x20You\x20Win\x20###\x0a','###\x20あなたの勝ちです\x20###\x0a','DRAW','###\x20Draw\x20###\x0a','###\x20引き分け\x20###\x0a','SENTE_WIN','###\x20Sente\x20(or\x20Shitate)\x20Wins\x20###\x0a','###\x20先手(または下手)の勝ち\x20###\x0a','GOTE_WIN','###\x20後手(または上手)の勝ち\x20###\x0a','msg.subhost','mileage','mileagePass','getTournament','Tournament\x20status:\x20','イベント対局結果の確認:\x20','url','name-mouse-out','playerNameClassChange','updateTurnHighlight','msg.rated','msg.nonrated','This\x20game\x20belongs\x20to:\x20\x22','setFromCSA','endTime','seconds','getPlayerRoleFromName','code.G030','#000000','name-left','door','[##STUDY]','num','[auto-PM]\x20#G102','code.G031','#666666','さんの接続が切れました。','disconnectTimer','since_disconnect','<span\x20id=\x22disconnectCount\x22>0</span>&nbsp','sec','declare','\x22\x20style=\x22height:20px;margin-left:5px\x22>','#disconnectDeclareButton','STUDY','\x20CREATED\x20[','さんが[','STUDY\x20ROOM',']を作成しました。','chatLobby','isMyRoom','GAME\x20STARTED','新規対局','\x20vs\x20','\x20対\x20','setFromStart','\x20has\x20won\x20','さんが通算','\x20games!','勝を達成しました!','10-sec\x20Shogi','\x20is\x20promoted\x20to\x20','\x20class\x20in\x20','さん、','\x20に昇格!!','#DD7700','#550066','#888888','#0033DD','handleGrab','addArrow','OUT','msg.host','Study\x20Host\x20status\x20given\x20to\x20','感想戦ホストは、','さんに引き継がれました。','Study\x20Sub-host\x20status\x20given\x20to\x20','さんに、感想戦サブ・ホスト権限が付与されました。','<Template>\x20','<定型>\x20','G050','#rematchButton','#660000','chatBoard','Opponent\x27s\x20','対局相手の','isFromJapan','\x20/\x20','option.english_level','#0000AA','\x20did\x20not\x20accept\x20your\x20invitation.','さんに招待メッセージが送信出来ませんでした。','div#player-info-window-','#f35','PM:\x20[','[##REJECT]','[##REJECT]C011','#modalInvitation','isOpen','INVITATION','You\x27ve\x20earned\x20','\x20D-Mile','\x20Dマイル獲得しました!','\x20Dマイルを消費しました。(通算マイル・期間マイルは減少しません)','[##WINS]','[##EXP]','You\x27re\x20promoted\x20to\x20a\x20new\x20rank!!','クラス昇格!!','You\x27ve\x20gained\x20','\x20EXP!!\x20(Total:\x20','\x20EXP)\x20You\x27re\x20in\x20\x22','\x22\x20level.','EXPを獲得!!\x20(トータル\x20','login.closed','#userEvaluationDialog','Studying\x20a\x20branch\x20from\x20move\x20#','slice','handleBranchMove','refreshPosition','popupName','toX','toY','toCSA','SEND_STUDY','[auto-chat]\x20'];(function(_0x2a60e3,_0x110486){var _0x50bd22=function(_0x4f5587){while(--_0x4f5587){_0x2a60e3['push'](_0x2a60e3['shift']());}};_0x50bd22(++_0x110486);}(_0x36cd,0x6d));var _0x40d9=function(_0x54ebe1,_0x3f6cf0){_0x54ebe1=_0x54ebe1-0x0;var _0x1bc084=_0x36cd[_0x54ebe1];return _0x1bc084;};'use strict';var testMode=![];const IMAGE_DIRECTORY=_0x40d9('0x0');var args=new Object();var client=null;var apiClient=null;var sp;var currentLayer=0x0;var mileage;var serverGrid;var playerGrid;var waiterGrid;var gameGrid;var watcherGrid;var kifuGrid;var users=new Object();var tournaments=new Object();var playerInfoWindows=new Object();var timeouts=new Object();var _disconnectTimer;var me;var _challengeUser=null;var _gameAccepted=![];var _allowWatcherChat=![];var _greetState=0x0;var premium=0x0;var countries=new Object();var board;var hidden_prm=0x0;var _hourMileCount;var mouseX;var mouseY;var config=null;var infoFetcher=new Object();var options=new Object();var _studyBase=null;var _studyBranchMoves=null;var _studySender=null;var _sendStudyBuffer=null;var _opponentDisconnectCount=0x0;var _dialogOnBoardClose=![];var _worldClocks=[];var _loginHistory=[];var hostPlayerName=null;function _testFunction(_0x1dd0a1){if(_0x1dd0a1==0x0){if(!![]){board[_0x40d9('0x1')]();_switchLayer(0x2);return;}_handleServers([{'id':0x1,'name':'MERCURY','description_en':_0x40d9('0x2'),'description_ja':_0x40d9('0x3'),'enabled':!![],'population':0x0,'host':_0x40d9('0x4'),'port':0xff4}]);}else if(_0x1dd0a1==0x1){_loginButtonClick();}else if(_0x1dd0a1==0x2){}}$(function(){if(location['search']!=''){location[_0x40d9('0x5')][_0x40d9('0x6')](0x1)['split']('&')['forEach'](function(_0x4d9eb2){let _0xae5842=_0x4d9eb2['split']('=');args[_0xae5842[0x0]]=_0xae5842[0x1];});}$(_0x40d9('0x7'))[_0x40d9('0x8')](_0x40d9('0x9')+version);board=new Board($(_0x40d9('0xa')));let _0x3c3272=new XMLHttpRequest();_0x3c3272[_0x40d9('0xb')](_0x40d9('0xc'),function(){_0x3c3272['responseText'][_0x40d9('0xd')]('\x0a')['forEach'](function(_0x2394e7){let _0x8f1a05=_0x2394e7[_0x40d9('0xd')]('\x09');countries[_0x8f1a05[0x0]]=new Country(parseInt(_0x8f1a05[0x0]),_0x8f1a05[0x1],_0x8f1a05[0x4],_0x8f1a05[0x2]);});});_0x3c3272['open'](_0x40d9('0xe'),_0x40d9('0xf'));_0x3c3272['send']();infoFetcher={'titleNames':new Object(),'titleNameTips':new Object(),'titleAvatars':new Object(),'banned':[]};let _0x499290=new XMLHttpRequest();_0x499290[_0x40d9('0xb')](_0x40d9('0xc'),function(){let _0x270802='';_0x499290[_0x40d9('0x10')]['split']('\x0a')[_0x40d9('0x11')](function(_0x3b153f){if(_0x3b153f['match'](/^###(.+)$/)){_0x270802=RegExp['$1'];}else{switch(_0x270802){case _0x40d9('0x12'):let _0x504efe=_0x3b153f[_0x40d9('0xd')]('\x09');infoFetcher[_0x40d9('0x13')][_0x504efe[0x0]]=_0x504efe[0x1];infoFetcher[_0x40d9('0x14')][_0x504efe[0x0]]=_0x504efe[0x2];infoFetcher[_0x40d9('0x15')][_0x504efe[0x0]]=_0x504efe[0x3];break;case'BANNED':infoFetcher[_0x40d9('0x16')][_0x40d9('0x17')](_0x3b153f[_0x40d9('0x18')]());}}});});_0x499290['open']('get',_0x40d9('0x19')+version);_0x499290['send']();sp=new SoundPlayer();$[_0x40d9('0x1a')](_0x40d9('0x1b')+new Date()['getTime'](),function(_0x15935b){config=_0x15935b;if(config[_0x40d9('0x1c')]==![])debugLoop();});i18next[_0x40d9('0x1d')]=localStorage[_0x40d9('0x1e')]||args[_0x40d9('0x1e')]||'ja';i18next[_0x40d9('0x1f')](i18nextXHRBackend)[_0x40d9('0x20')]({'lng':localStorage['locale']||args[_0x40d9('0x1e')]||'ja','fallbackLng':args['locale']||'ja','debug':!![],'backend':{'loadPath':_0x40d9('0x21')+version}},function(_0x3ff8de,_0x299cc1){_updateLanguage();});i18next['on'](_0x40d9('0x22'),()=>{_updateLanguage();});$['fn'][_0x40d9('0x23')][_0x40d9('0x24')][_0x40d9('0x25')]=function(_0x4139a1,_0x203ba7){_0x4139a1=User[_0x40d9('0x26')](_0x4139a1);_0x203ba7=User[_0x40d9('0x26')](_0x203ba7);return _0x4139a1<_0x203ba7?-0x1:_0x4139a1>_0x203ba7?0x1:0x0;};$['fn'][_0x40d9('0x23')]['oSort'][_0x40d9('0x27')]=function(_0x435e90,_0x58590c){_0x435e90=User[_0x40d9('0x26')](_0x435e90);_0x58590c=User[_0x40d9('0x26')](_0x58590c);return _0x435e90<_0x58590c?0x1:_0x435e90>_0x58590c?-0x1:0x0;};serverGrid=$('#serverGrid')['DataTable']({'data':[],'columns':[{'data':_0x40d9('0x28'),'width':_0x40d9('0x29'),'className':_0x40d9('0x2a'),'bSortable':![],'render':function(_0x4c68bf){return _0x40d9('0x2b')+_0x4c68bf+_0x40d9('0x2c')+_0x4c68bf;}},{'width':_0x40d9('0x29'),'bSortable':![],'render':function(_0x20fc86,_0x225b85,_0x3ba6ea){return EJ(_0x3ba6ea[_0x40d9('0x2d')],_0x3ba6ea[_0x40d9('0x2e')]);}},{'data':_0x40d9('0x2f'),'width':_0x40d9('0x29'),'bSortable':![]}],'rowId':_0x40d9('0x28'),'searching':![],'paging':![],'info':![],'order':![],'select':_0x40d9('0x30'),'oLanguage':{'sEmptyTable':EJ(_0x40d9('0x31'),_0x40d9('0x32'))}});serverGrid['clear']();playerGrid=$(_0x40d9('0x33'))['DataTable']({'data':[],'columns':[{'data':'statStr','width':_0x40d9('0x34')},{'data':_0x40d9('0x35'),'width':_0x40d9('0x36')},{'data':_0x40d9('0x37'),'width':_0x40d9('0x36'),'bSortable':![]},{'data':_0x40d9('0x38'),'width':_0x40d9('0x39'),'className':_0x40d9('0x2a')},{'data':_0x40d9('0x3a'),'width':_0x40d9('0x3b'),'className':'dt-body-left'},{'data':_0x40d9('0x3c'),'width':'10%','className':_0x40d9('0x3d'),'type':_0x40d9('0x3e')}],'rowId':'name','searching':![],'paging':![],'info':![],'select':_0x40d9('0x30'),'order':[[0x5,_0x40d9('0x3f')]],'scrollY':!![]});playerGrid[_0x40d9('0x40')]();$(_0x40d9('0x41'))['on'](_0x40d9('0x42'),'tr',function(){_openPlayerInfo(users[playerGrid[_0x40d9('0x43')](this)['id']()]);});playerGrid['on'](_0x40d9('0x44'),function(_0x5ab762,_0x41a0e5,_0x4ad451,_0x1b29a5,_0x4a3b5f){if($(_0x1b29a5['node']())['parent']()[_0x40d9('0x45')](_0x40d9('0x46'))){_0x5ab762[_0x40d9('0x47')]();}else{_playerSelected(playerGrid,_0x1b29a5[_0x40d9('0x48')]()['row']);}});waiterGrid=$(_0x40d9('0x49'))[_0x40d9('0x4a')]({'data':[],'columns':[{'data':_0x40d9('0x4b'),'width':_0x40d9('0x4c'),'className':_0x40d9('0x2a')},{'data':_0x40d9('0x3c'),'width':_0x40d9('0x34'),'className':_0x40d9('0x3d'),'type':_0x40d9('0x3e')},{'data':_0x40d9('0x4d'),'width':_0x40d9('0x4e')},{'data':'timeStr','width':_0x40d9('0x4f')}],'rowId':_0x40d9('0x28'),'searching':![],'paging':![],'info':![],'select':'single','order':[[0x1,_0x40d9('0x3f')]],'scrollY':!![]});waiterGrid['clear']();$(_0x40d9('0x50'))['on'](_0x40d9('0x42'),'tr',function(){_openPlayerInfo(users[waiterGrid[_0x40d9('0x43')](this)['id']()]);});waiterGrid['on'](_0x40d9('0x44'),function(_0x51d1d2,_0x2b6842,_0x59b731,_0x46d14e,_0x51c6c3){if($(_0x46d14e[_0x40d9('0x51')]())['parent']()[_0x40d9('0x45')](_0x40d9('0x46'))){_0x51d1d2[_0x40d9('0x47')]();}else{_playerSelected(waiterGrid,_0x46d14e[_0x40d9('0x48')]()[_0x40d9('0x43')]);}});gameGrid=$('#gameGrid')[_0x40d9('0x4a')]({'data':[],'columns':[{'data':_0x40d9('0x52'),'width':_0x40d9('0x53'),'className':_0x40d9('0x2a'),'bSortable':![]},{'data':'goteStr','width':_0x40d9('0x53'),'className':_0x40d9('0x3d'),'bSortable':![]},{'data':_0x40d9('0x54'),'width':_0x40d9('0x55'),'bSortable':![]},{'data':_0x40d9('0x56'),'width':'7%','bSortable':![]},{'data':'watchersStr','width':'7%','bSortable':![]},{'data':_0x40d9('0x57'),'width':_0x40d9('0x3b'),'bSortable':![]},{'data':_0x40d9('0x58'),'width':'0%','visible':![]}],'rowId':'gameId','searching':![],'paging':![],'info':![],'select':_0x40d9('0x30'),'order':[[0x6,_0x40d9('0x3f')]],'scrollY':!![]});gameGrid[_0x40d9('0x40')]();$(_0x40d9('0x59'))['on'](_0x40d9('0x42'),'tr',function(){_enterGame(gameGrid[_0x40d9('0x43')](this)[_0x40d9('0x5a')]());});watcherGrid=$(_0x40d9('0x5b'))[_0x40d9('0x4a')]({'data':[],'columns':[{'name':'name_column','data':'watcher','width':'55%','className':_0x40d9('0x2a')},{'data':_0x40d9('0x3a'),'width':'25%','className':_0x40d9('0x2a')},{'data':'rate','width':'20%','className':_0x40d9('0x3d'),'type':_0x40d9('0x3e')}],'rowId':_0x40d9('0x28'),'searching':![],'paging':![],'info':![],'select':_0x40d9('0x30'),'order':[[0x2,_0x40d9('0x3f')]],'scrollY':!![]});watcherGrid[_0x40d9('0x40')]();$(_0x40d9('0x5c'))['on'](_0x40d9('0x42'),'tr',function(){_openPlayerInfo(users[watcherGrid[_0x40d9('0x43')](this)['id']()]);});kifuGrid=$(_0x40d9('0x5d'))[_0x40d9('0x4a')]({'data':[],'columns':[{'data':_0x40d9('0x5e'),'width':_0x40d9('0x5f'),'bSortable':![]},{'data':_0x40d9('0x60'),'width':'60%','className':'dt-body-left','bSortable':![]},{'data':_0x40d9('0x61'),'width':_0x40d9('0x62'),'className':'dt-body-right','bSortable':![]}],'searching':![],'paging':![],'info':![],'select':'api','scrollY':!![],'order':![]});kifuGrid[_0x40d9('0x40')]();kifuGrid['on'](_0x40d9('0x44'),function(_0x2793ec,_0x261eb6,_0xe2b01b,_0x53da7f,_0x372496){if($(_0x53da7f[_0x40d9('0x51')]())[_0x40d9('0x63')]()['hasClass'](_0x40d9('0x46'))){_0x2793ec[_0x40d9('0x47')]();}else{_kifuSelected(_0x53da7f[_0x40d9('0x48')]()[_0x40d9('0x43')]);}});$(_0x40d9('0x64'))['hide']();$(_0x40d9('0x65'))[_0x40d9('0x66')](function(){if($(this)[_0x40d9('0x67')]('a')[_0x40d9('0x45')](_0x40d9('0x68')))return;$('ul:not(:animated)',this)['css'](_0x40d9('0x69'),$(this)[_0x40d9('0x6a')]())['slideDown']();},function(){$('ul',this)[_0x40d9('0x6b')]();});$(_0x40d9('0x64'))[_0x40d9('0x67')]('a')['click'](function(){$(this)['closest']('ul')[_0x40d9('0x6b')](_0x40d9('0x6c'));});_generateWorldClocks();_switchLayer(0x0);_fadeInLoginView();if(localStorage[_0x40d9('0x6d')])$(_0x40d9('0x6e'))[_0x40d9('0x6f')](localStorage['login']);if(localStorage[_0x40d9('0x70')]){$(_0x40d9('0x71'))[_0x40d9('0x6f')](decaesar(decaesar(localStorage[_0x40d9('0x70')],0x51),0x3));$(_0x40d9('0x72'))[_0x40d9('0x6f')](decaesar(decaesar(localStorage[_0x40d9('0x70')],0x51),0x3));maskPass();}if(localStorage[_0x40d9('0x73')])_loginHistory=decaesar(decaesar(localStorage['dat2'],0x51),0x3)['split'](',');if(localStorage[_0x40d9('0x74')])$(_0x40d9('0x75'))['prop'](_0x40d9('0x76'),localStorage[_0x40d9('0x74')]==_0x40d9('0x77'));$(_0x40d9('0x78'))['val'](localStorage[_0x40d9('0x1e')]||args['locale']||'ja');if(localStorage[_0x40d9('0x79')]){$(_0x40d9('0x7a'))[_0x40d9('0x7b')](_0x40d9('0x76'),localStorage[_0x40d9('0x79')]==_0x40d9('0x77'));sp[_0x40d9('0x7c')](!(localStorage['openingMusic']==_0x40d9('0x77')));}$('#findUser')[_0x40d9('0x7d')]({'autoFocus':!![],'minLength':0x2,'delay':0x0,'select':function(_0x31ec57,_0x3b36aa){let _0x515145=_0x3b36aa[_0x40d9('0x7e')][_0x40d9('0x7f')];if(users[_0x515145]){playerGrid['row']('#'+_0x515145)[_0x40d9('0x80')]();scrollGridToSelected(playerGrid);_playerSelected(playerGrid,playerGrid[_0x40d9('0x43')]({'selected':!![]})[_0x40d9('0x48')]());}else{writeUserMessage(i18next['t'](_0x40d9('0x81')),0x1,_0x40d9('0x82'));}}});window['onblur']=function(){if(board[_0x40d9('0x83')]()&&!testMode&&board['game'][_0x40d9('0x84')]())client[_0x40d9('0x85')]('[##M_OUT]0,0');};window[_0x40d9('0x86')]=function(){if(board[_0x40d9('0x83')]()&&!testMode&&board[_0x40d9('0x87')]['isRated']())client[_0x40d9('0x85')](_0x40d9('0x88'));};$(window)['on'](_0x40d9('0x89'),function(_0x23734d){if(board[_0x40d9('0x83')]()){writeUserMessage(_0x40d9('0x8a'),0x2,_0x40d9('0x82'));return _0x40d9('0x8b');}});$(window)[_0x40d9('0x8c')](function(){if(board[_0x40d9('0x8d')]())_giveHostButtonClick();});document[_0x40d9('0x8e')](_0x40d9('0x8f'))[_0x40d9('0x90')]=function(){return![];};$(_0x40d9('0x91'))['on'](_0x40d9('0x92'),function(_0x40ed60){if(_0x40ed60[_0x40d9('0x93')]==0xd){if($(this)[_0x40d9('0x6f')]()[_0x40d9('0x94')]>0x0){client[_0x40d9('0x95')]($(this)[_0x40d9('0x6f')]());$(this)[_0x40d9('0x6f')]('');}}});$(_0x40d9('0x96'))['on'](_0x40d9('0x92'),function(_0x1c3fe7){if(_0x1c3fe7[_0x40d9('0x93')]==0xd){if($(this)[_0x40d9('0x6f')]()[_0x40d9('0x94')]>0x0){clearGeneralTimeout(_0x40d9('0x97'));client[_0x40d9('0x85')]($(this)[_0x40d9('0x6f')]());$(this)[_0x40d9('0x6f')]('');}}else if(board['isPlayer']()){if(_0x1c3fe7[_0x40d9('0x93')]==0x8){if($(this)[_0x40d9('0x6f')]()=='')clearGeneralTimeout('SEND_TYPE');}else{if($(this)['val']()['length']>0x0)setGeneralTimeout(_0x40d9('0x97'),0x9c4);}}});$(_0x40d9('0x71'))['tooltip']();window[_0x40d9('0x98')]=function(_0x33be31){_0x33be31=_0x33be31||window['event'];mouseX=_0x33be31[_0x40d9('0x99')];mouseY=_0x33be31[_0x40d9('0x9a')];};$('#findUser')['on'](_0x40d9('0x9b'),function(){$(this)['val']('');});_resize();_loadDefaultOptions();apiClient=new WebSystemApiClient('system.81dojo.com',0x50);apiClient[_0x40d9('0x9c')](_0x40d9('0x9d'),_handleServers);apiClient[_0x40d9('0x9c')](_0x40d9('0x9e'),_handleOptions);apiClient[_0x40d9('0x9c')](_0x40d9('0x9f'),_handlePlayerDetail);apiClient[_0x40d9('0x9c')]('TOURNAMENTS',_handleTournaments);apiClient[_0x40d9('0x9c')](_0x40d9('0xa0'),_handleCheckOpponent);apiClient[_0x40d9('0x9c')](_0x40d9('0xa1'),_handleEvaluation);if(testMode){_testFunction(0x0);}else{_prepareForLogin();}});window[_0x40d9('0xa2')]=function(){_resize();};function _resize(){$(_0x40d9('0xa3'))['find'](_0x40d9('0xa4'))[_0x40d9('0x67')](_0x40d9('0xa5'))[_0x40d9('0xa6')]('min-width',window[_0x40d9('0xa7')]/9.5);$(_0x40d9('0xa8'))[_0x40d9('0x67')](_0x40d9('0xa4'))[_0x40d9('0x67')](_0x40d9('0xa5'))[_0x40d9('0xa6')](_0x40d9('0x69'),window[_0x40d9('0xa7')]/12.5);if(window[_0x40d9('0xa7')]>0x60e){$(_0x40d9('0xa9'))[_0x40d9('0xaa')]($(_0x40d9('0xab')))['css'](_0x40d9('0xac'),_0x40d9('0xad'));}else{$(_0x40d9('0xa9'))[_0x40d9('0xaa')]($(_0x40d9('0xae')))[_0x40d9('0xa6')](_0x40d9('0xac'),_0x40d9('0xaf'));}if(window[_0x40d9('0xa7')]>=board[_0x40d9('0xb0')]()+0x190&&window['innerHeight']<board[_0x40d9('0xb1')]()+0xe6){$(_0x40d9('0xb2'))[_0x40d9('0xb3')]($(_0x40d9('0xb4')));$(_0x40d9('0xb5'))[_0x40d9('0xaa')]($(_0x40d9('0xb6')));}else{$(_0x40d9('0xb5'))['prependTo']($(_0x40d9('0xb7')));$(_0x40d9('0xb2'))[_0x40d9('0xaa')]($(_0x40d9('0xb5')));}$(_0x40d9('0xb8'))[_0x40d9('0xb9')](function(){$(this)[_0x40d9('0x67')](_0x40d9('0xba'))['css'](_0x40d9('0xbb'),$(this)[_0x40d9('0xbb')]()-$(this)[_0x40d9('0x67')]($(_0x40d9('0xbc')))['height']());});}function _fadeInLoginView(){$(_0x40d9('0xbd'))['css']('opacity',0x0)[_0x40d9('0xbe')]({'opacity':0x1},testMode?0x0:0xbb8);}function _prepareForLogin(){sp[_0x40d9('0xbf')]();$(_0x40d9('0xc0'))[_0x40d9('0x7b')](_0x40d9('0xc1'),!![]);serverGrid['clear']()[_0x40d9('0xc2')]();$(_0x40d9('0xc3'))[_0x40d9('0x8')]('');apiClient['getServers']();}function _languageSelected(){i18next[_0x40d9('0xc4')]($(_0x40d9('0x78'))[_0x40d9('0x6f')]());localStorage[_0x40d9('0x1e')]=$(_0x40d9('0x78'))[_0x40d9('0x6f')]();}function _updateLanguage(){serverGrid[_0x40d9('0xc5')]()[_0x40d9('0xc6')]();playerGrid['settings']()[0x0][_0x40d9('0xc7')][_0x40d9('0xc8')]=i18next['t'](_0x40d9('0xc9'));playerGrid['draw']();waiterGrid['settings']()[0x0][_0x40d9('0xc7')][_0x40d9('0xc8')]=i18next['t'](_0x40d9('0xc9'));waiterGrid[_0x40d9('0xc2')]();gameGrid[_0x40d9('0xca')]()[0x0]['oLanguage']['sEmptyTable']=i18next['t'](_0x40d9('0xc9'));gameGrid[_0x40d9('0xc2')]();watcherGrid[_0x40d9('0xca')]()[0x0][_0x40d9('0xc7')][_0x40d9('0xc8')]=i18next['t'](_0x40d9('0xcb'));watcherGrid[_0x40d9('0xc2')]();$(_0x40d9('0xcc'))[_0x40d9('0xcd')](countries[$(_0x40d9('0xce'))['data'](_0x40d9('0xcf'))][_0x40d9('0xd0')]());$('p#loginAlert')['text']('');$(_0x40d9('0xd1'))[_0x40d9('0xb9')](function(){$(this)[_0x40d9('0x8')](i18next['t']($(this)[_0x40d9('0xd2')]('data-i18n')));});$(_0x40d9('0xd3'))['each'](function(){$(this)[_0x40d9('0x6f')](i18next['t']($(this)[_0x40d9('0xd2')](_0x40d9('0xd4'))));});$('[data-i18n-title]')[_0x40d9('0xb9')](function(){$(this)[_0x40d9('0xd2')](_0x40d9('0x35'),i18next['t']($(this)[_0x40d9('0xd2')]('data-i18n-title')));});$(_0x40d9('0xd5'))['empty']();let _0xc7accf=i18next[_0x40d9('0x1d')]=='ja'?HANDICAPS_JA:HANDICAPS_EN;Object[_0x40d9('0xd6')](_0xc7accf)[_0x40d9('0x11')](function(_0x5c17d1){if(_0x5c17d1=='r'||_0x5c17d1['match'](/^va/))return!![];$(_0x40d9('0xd5'))[_0x40d9('0xd7')]($(_0x40d9('0xd8'))[_0x40d9('0x6f')](_0x5c17d1)[_0x40d9('0x8')](_0xc7accf[_0x5c17d1]));});$(_0x40d9('0xd9'))[_0x40d9('0xb9')](function(){$(this)[_0x40d9('0xda')]('option',_0x40d9('0x35'),i18next['t']($(this)[_0x40d9('0xd2')](_0x40d9('0xdb'))));$(this)[_0x40d9('0x7b')](_0x40d9('0x35'),'');});$(_0x40d9('0xdc'))[_0x40d9('0xb9')](function(){$(this)[_0x40d9('0xdd')](_0x40d9('0xde'),_0x40d9('0xdf'),i18next['t']($(this)['attr']('id')[_0x40d9('0xd')]('-')[0x1]));});$(_0x40d9('0x71'))['tooltip']();}function _openingMusicCheckBoxClick(){localStorage[_0x40d9('0x79')]=$(_0x40d9('0x7a'))['prop'](_0x40d9('0x76'));sp[_0x40d9('0x7c')](!$('#openingMusicCheckBox')[_0x40d9('0x7b')](_0x40d9('0x76')));}function _loginTypeChange(){$(_0x40d9('0xe0'))[_0x40d9('0xd2')](_0x40d9('0xc1'),$(_0x40d9('0xe1'))[_0x40d9('0x6f')]()==0x1);}function _loginButtonClick(){$('#passwordInput')[_0x40d9('0xe2')](_0x40d9('0xe3'));let _0x8f9362=serverGrid[_0x40d9('0x43')]({'selected':!![]})[_0x40d9('0x5a')]();if(_0x8f9362==null){alert(_0x40d9('0xe4'));return;}if(_bannedLoginInHistory())return;$(_0x40d9('0xe5'))[_0x40d9('0xd2')](_0x40d9('0xc1'),!![]);if(client!=null)client[_0x40d9('0xe3')]();$('#loginAlert')[_0x40d9('0x8')](i18next['t'](_0x40d9('0xe6')));let _0x417680=$(_0x40d9('0xe1'))[_0x40d9('0x6f')]()==0x1;client=new WebSocketClient(_0x8f9362['name'],_0x8f9362['host'],_0x8f9362[_0x40d9('0xe7')],_0x417680?_0x40d9('0xe8'):$(_0x40d9('0x6e'))[_0x40d9('0x6f')](),_0x417680?_0x40d9('0xe9'):$('#hiddenPass')['val']());client['setCallbackFunctions'](_0x40d9('0xea'),_handleLoggedIn);client[_0x40d9('0x9c')](_0x40d9('0xeb'),_handleLoginFailed);client[_0x40d9('0x9c')](_0x40d9('0xec'),_handleLobbyIn);client[_0x40d9('0x9c')](_0x40d9('0xed'),_handleLobbyOut);client[_0x40d9('0x9c')]('CHAT',_handleChat);client['setCallbackFunctions'](_0x40d9('0xee'),_handleGameChat);client[_0x40d9('0x9c')](_0x40d9('0xef'),_handlePrivateChat);client[_0x40d9('0x9c')](_0x40d9('0xf0'),_handleMove);client[_0x40d9('0x9c')](_0x40d9('0xf1'),_handleGameEnd);client[_0x40d9('0x9c')](_0x40d9('0xf2'),_handleGeneralResponse);client[_0x40d9('0x9c')](_0x40d9('0xf3'),_handleClosed);client[_0x40d9('0x9c')]('WHO',_handleWho);client['setCallbackFunctions'](_0x40d9('0xf4'),_handleList);client['setCallbackFunctions'](_0x40d9('0xf5'),_handleWatchers);client[_0x40d9('0x9c')]('GAME',_handleGame);client[_0x40d9('0x9c')](_0x40d9('0xf6'),_handleChallenger);client[_0x40d9('0x9c')](_0x40d9('0xf7'),_handleAccept);client[_0x40d9('0x9c')](_0x40d9('0xf8'),_handleDecline);client[_0x40d9('0x9c')](_0x40d9('0xf9'),_handleGameSummary);client[_0x40d9('0x9c')](_0x40d9('0xfa'),_handleStart);client[_0x40d9('0x9c')](_0x40d9('0xfb'),_handleResult);client['setCallbackFunctions'](_0x40d9('0xfc'),_handleMonitor);client[_0x40d9('0x9c')]('RECONNECT',_handleReconnect);client['setCallbackFunctions'](_0x40d9('0xfd'),_handleMile);client[_0x40d9('0x9c')](_0x40d9('0xfe'),_handleExp);client[_0x40d9('0x9c')](_0x40d9('0xff'),_handleWins);client['setCallbackFunctions'](_0x40d9('0x100'),_handleEnter);client[_0x40d9('0x9c')](_0x40d9('0x101'),_handleLeave);client[_0x40d9('0x9c')](_0x40d9('0x102'),_handleDisconnect);client[_0x40d9('0x103')]();}function _reloginButtonClick(){$(_0x40d9('0x104'))[_0x40d9('0xa6')](_0x40d9('0x105'),_0x40d9('0x106'));$(_0x40d9('0x107'))[_0x40d9('0x7b')]('src',_0x40d9('0x108'));_prepareForLogin();_fadeInLoginView();}function _bannedLoginInHistory(){for(let _0x17745d=0x0;_0x17745d<_loginHistory[_0x40d9('0x94')];_0x17745d++){if(infoFetcher['banned']['includes'](_loginHistory[_0x17745d]))return!![];}return![];}function _logoutButtonClick(){$(_0x40d9('0x107'))['prop'](_0x40d9('0x109'),_0x40d9('0x10a'));_backToEntrance();client[_0x40d9('0xe3')]();}function _refreshButtonClick(){_refreshLobby();$(_0x40d9('0x10b'))[_0x40d9('0x10c')](_0x40d9('0x68'));setGeneralTimeout(_0x40d9('0x10d'),0x2710);}function _waitButtonClick(){_disableNewGameOptions(me[_0x40d9('0x10e')]);$(_0x40d9('0x10f'))[_0x40d9('0xda')](_0x40d9('0x110'));}function _navigateToWebSystem(_0x3f5498){window[_0x40d9('0x110')](_0x40d9('0x111')+EJ('en','ja')+'/'+_0x3f5498,'_blank');}function _playerSelected(_0x1537a9,_0x2befef){let _0xd9dcc0=_0x1537a9==playerGrid?waiterGrid:playerGrid;let _0x590279=_0x1537a9['row'](_0x2befef)[_0x40d9('0x5a')]()[_0x40d9('0x28')];_0xd9dcc0['rows']()[_0x40d9('0x112')]();_0xd9dcc0[_0x40d9('0x43')]('#'+_0x590279)[_0x40d9('0x80')]();scrollGridToSelected(_0xd9dcc0);gameGrid[_0x40d9('0xc5')]()[_0x40d9('0x112')]();let _0x7f845f=_findGameByUser(users[_0x590279]);if(_0x7f845f){gameGrid[_0x40d9('0x43')]('#'+_0x7f845f[_0x40d9('0x113')])[_0x40d9('0x80')]();scrollGridToSelected(gameGrid);}$('#findUser')[_0x40d9('0x6f')]('');}function _enterGame(_0x592d8d){if(_0x592d8d[_0x40d9('0x114')]()){let _0xc33053=prompt(i18next['t'](_0x40d9('0x115')));if(_0xc33053!=null&&_0xc33053!=''){_0x592d8d[_0x40d9('0x116')](_0xc33053);_enterGame(_0x592d8d);}return;}if(board[_0x40d9('0x87')])return;if(_0x592d8d[_0x40d9('0x117')]()){writeUserMessage(EJ(_0x40d9('0x118'),'この対局ルールはHTML版アプリでは未対応です。'),0x1,_0x40d9('0x119'));return;}board[_0x40d9('0x11a')](_0x592d8d);if(!_0x592d8d[_0x40d9('0x113')][_0x40d9('0x11b')](/^STUDY/)&&board['getPlayerRoleFromName'](me[_0x40d9('0x28')])!=null){if(me[_0x40d9('0x11c')]==0x1){writeUserMessage(i18next['t'](_0x40d9('0x11d')),0x1,_0x40d9('0x11e'),!![]);board['close']();}else{client['watchers'](_0x592d8d[_0x40d9('0x113')]);client[_0x40d9('0x11f')](_0x592d8d[_0x40d9('0x113')]);}}else{client[_0x40d9('0x120')](_0x592d8d[_0x40d9('0x113')]);client[_0x40d9('0x121')](_0x592d8d[_0x40d9('0x113')],!![]);}}function _enterGameById(_0x2e9bd1){let _0x1dbc7c=gameGrid[_0x40d9('0x43')]('#'+_0x2e9bd1);if(_0x1dbc7c!=null)_enterGame(_0x1dbc7c[_0x40d9('0x5a')]());}function writeUserMessage(_0x5544cd,_0x5badcd,_0x3ee214=null,_0x2afc50=![],_0x2a06ab=!![]){let _0x2019de;let _0x2b1c10;if(_0x5badcd==0x1){_0x2019de=$(_0x40d9('0x122'));}else if(_0x5badcd==0x2){_0x2019de=$(_0x40d9('0x123'));_0x2b1c10=$(_0x40d9('0x124'));if(_0x2b1c10[_0x40d9('0x94')])_0x2b1c10[_0x40d9('0x125')]();}_0x5544cd=_0x5544cd[_0x40d9('0x126')](/</g,_0x40d9('0x127'));_0x5544cd=_0x5544cd[_0x40d9('0x126')](/&lt;sPAn/g,_0x40d9('0x128'));_0x5544cd=_0x5544cd[_0x40d9('0x126')](/&lt;\/SpaN>/g,_0x40d9('0x129'));_0x5544cd=_0x5544cd[_0x40d9('0x126')](/(https?\:\/\/[^\"^\s^\\^\)^\(]+)/g,'<a\x20href=\x22$1\x22\x20target=\x22_blank\x22>$1</a>');_0x5544cd=_0x5544cd[_0x40d9('0x126')](/\n/g,_0x40d9('0x12a'));$(_0x40d9('0x12b'),{})[_0x40d9('0xa6')]({'color':_0x3ee214?_0x3ee214:'','font-weight':_0x2afc50?_0x40d9('0x12c'):''})[_0x40d9('0xcd')](_0x5544cd)[_0x40d9('0x12d')](_0x2019de);if(_0x2a06ab)_0x2019de[_0x40d9('0xd7')]('<br>');if(_0x2b1c10&&_0x2b1c10[_0x40d9('0x94')])_0x2b1c10[_0x40d9('0x12d')](_0x2019de);if(_0x2019de[_0x40d9('0x12e')]()+_0x2019de[_0x40d9('0xbb')]()>_0x2019de[0x0][_0x40d9('0x12f')]-0x50)_0x2019de[_0x40d9('0xbe')]({'scrollTop':_0x2019de[0x0][_0x40d9('0x12f')]},_0x40d9('0x6c'));}function _interpretCommunicationCode(_0x4ce161,_0x1f7b60,_0x59c314,_0x1357be,_0x404601){writeUserMessage(_0x4ce161+i18next['t'](_0x40d9('0x130')+_0x1f7b60),_0x59c314,_0x40d9('0x11e'),_0x1357be);if(_0x404601)sp['chatBoard']();}function _checkLobbyButtonClick(_0x27f838=![]){if($(_0x40d9('0x131'))[_0x40d9('0xa6')](_0x40d9('0x132'))==_0x40d9('0x106')){$(_0x40d9('0x133'))[_0x40d9('0x10c')](_0x40d9('0x68'));$(_0x40d9('0x131'))[_0x40d9('0xa6')](_0x40d9('0x132'),'initial')[_0x40d9('0xbe')]({'opacity':0x1},_0x27f838?0x0:0x4b0);$('#layerBoard')[_0x40d9('0xbe')]({'height':_0x40d9('0x134')},_0x27f838?0x0:0x4b0,function(){$(_0x40d9('0xa8'))[_0x40d9('0xa6')](_0x40d9('0x135'),'none');$('#checkLobbyButton')[_0x40d9('0x136')](_0x40d9('0x68'));$('#checkLobbyButton')['html'](_0x40d9('0x137'));});}else if(!_0x27f838){$(_0x40d9('0x133'))[_0x40d9('0x10c')]('button-disabled');$(_0x40d9('0x131'))[_0x40d9('0xa6')](_0x40d9('0x132'),_0x40d9('0x106'))[_0x40d9('0xbe')]({'opacity':0x0},0x4b0);$(_0x40d9('0xa8'))[_0x40d9('0xa6')](_0x40d9('0x135'),_0x40d9('0x138'))[_0x40d9('0xbe')]({'height':_0x40d9('0x139')},0x4b0,function(){_refreshLobby();$('#checkLobbyButton')['removeClass'](_0x40d9('0x68'));$('#checkLobbyButton')[_0x40d9('0xcd')]('<i\x20class=\x22fa\x20fa-eye-slash\x20fa-2x\x22></i>');});}}function _resignButtonClick(){if(board[_0x40d9('0x13a')]==0x0&&board['position'][_0x40d9('0x13b')]==!![]||board[_0x40d9('0x13a')]==0x1&&board[_0x40d9('0x13c')][_0x40d9('0x13b')]==![]){client[_0x40d9('0x85')](_0x40d9('0x13d'));client[_0x40d9('0x13e')]();_greetState=0x3;_greetButtonClick();}}function _rematchButtonClick(){if(board[_0x40d9('0x13f')]()){if(!board[_0x40d9('0x140')]()){client[_0x40d9('0x85')](_0x40d9('0x141'));if(_checkGuestGamesExpired())return;}}else{let _0x7faa98='';if(board[_0x40d9('0x87')][_0x40d9('0x113')][_0x40d9('0xd')]('+')[0x1][_0x40d9('0x11b')](/^([0-9a-z]+?)_(.*)$/)){_0x7faa98=RegExp['$1']+'_@'+RegExp['$2'];}else return;let _0x552603=gameGrid[_0x40d9('0xc5')](function(_0x436bc2,_0x1ffb96,_0x17b44d){return _0x1ffb96[_0x40d9('0x113')][_0x40d9('0xd')]('+')[0x1]==_0x7faa98;});if(_0x552603){client[_0x40d9('0x121')](board[_0x40d9('0x87')][_0x40d9('0x113')],![]);board[_0x40d9('0xe3')]();$(_0x40d9('0x123'))[_0x40d9('0x142')]();watcherGrid[_0x40d9('0x40')]()[_0x40d9('0xc2')]();board[_0x40d9('0x11a')](_0x552603[_0x40d9('0x5a')]()[0x0]);client[_0x40d9('0x120')](board[_0x40d9('0x87')]['gameId']);client['monitor'](board[_0x40d9('0x87')][_0x40d9('0x113')],!![]);}else{writeUserMessage(i18next['t'](_0x40d9('0x143')),0x2,_0x40d9('0x11e'));}}}function _greetButtonClick(){switch(_greetState){case 0x1:client[_0x40d9('0x85')]('<(_\x20_)>\x20お願いします。(Onegai-shimasu.)');_greetState=0x2;break;case 0x3:client[_0x40d9('0x85')](_0x40d9('0x144'));_greetState=0x4;break;case 0x4:$(_0x40d9('0x145'))[_0x40d9('0xda')](_0x40d9('0x110'));break;}}function _sendChatTemplate(_0x4df112){client[_0x40d9('0x85')](_0x40d9('0x146')+_0x4df112);}function _flipButtonClick(){board[_0x40d9('0x147')]();}function _impasseButtonClick(){if(board[_0x40d9('0x87')][_0x40d9('0x117')]())return;$(_0x40d9('0x148'))[_0x40d9('0xda')](_0x40d9('0x110'));board[_0x40d9('0x149')]();}function _clearArrowsButtonClick(){if(board[_0x40d9('0x14a')]){if(board[_0x40d9('0x14b')](!![],me[_0x40d9('0x28')])){client[_0x40d9('0x85')](_0x40d9('0x14c'));}}else{board['clearArrows'](![]);}}function _giveHostButtonClick(_0x5f09ac=null){if(!board[_0x40d9('0x8d')]())return;if(_0x5f09ac==null){if(!board[_0x40d9('0x87')]['isStudy']()){if(board[_0x40d9('0x87')][_0x40d9('0x14d')][_0x40d9('0x28')]!=me[_0x40d9('0x28')]&&board[_0x40d9('0x14e')](0x1)){_0x5f09ac=board[_0x40d9('0x87')][_0x40d9('0x14d')];}else if(board[_0x40d9('0x87')][_0x40d9('0x14f')][_0x40d9('0x28')]!=me['name']&&board[_0x40d9('0x14e')](0x0)){_0x5f09ac=board[_0x40d9('0x87')][_0x40d9('0x14f')];}}}if(_0x5f09ac){client[_0x40d9('0x85')](_0x40d9('0x150')+_0x5f09ac['name']);board[_0x40d9('0x151')]=0x1;setBoardConditions();}}function _giveSubhostButtonClick(_0x2d5dac){if(_0x2d5dac[_0x40d9('0x28')]==me[_0x40d9('0x28')])return;client[_0x40d9('0x85')](_0x40d9('0x152')+_0x2d5dac[_0x40d9('0x28')]);}function _materialBalanceButtonClick(){let _0x596cd6=kifuGrid[_0x40d9('0x43')]({'selected':!![]})[_0x40d9('0x48')]();if(board[_0x40d9('0x87')][_0x40d9('0x153')]())writeUserMessage(EJ(_0x40d9('0x154'),_0x40d9('0x155'))+_0x596cd6+EJ(_0x40d9('0x156'),_0x40d9('0x157'))+board[_0x40d9('0x158')](_0x596cd6<=0x28),0x2,_0x40d9('0x11e'));else writeUserMessage(EJ(_0x40d9('0x159'),_0x40d9('0x15a')),0x2,'#008800');}function _KyokumenpediaClick(){window[_0x40d9('0x110')](_0x40d9('0x15b')+board[_0x40d9('0x13c')][_0x40d9('0x15c')](),_0x40d9('0x15d'));}function _sharePositionButtonClick(_0x1f0b60){if(!board[_0x40d9('0x87')][_0x40d9('0x15e')][_0x40d9('0x11b')](/^va/))sharePosition(_0x1f0b60);else writeUserMessage(EJ(_0x40d9('0x15f'),_0x40d9('0x160')),0x2,'#FF0000');}function _kifuCopyButtonClick(){let _0x7bf05b=$(_0x40d9('0x161'),{'id':_0x40d9('0x162')})['text'](_generateKIF())[_0x40d9('0x12d')]($(_0x40d9('0x163')));$(_0x40d9('0x164'))[_0x40d9('0x80')]();document[_0x40d9('0x165')](_0x40d9('0x166'));$(_0x40d9('0x164'))['remove']();}function _kifuDownloadButtonClick(){let _0x540a78=Date[_0x40d9('0x167')]();downloadToFile(_generateKIF(),_0x40d9('0x168')+formatDateToText(new Date())+'-'+board[_0x40d9('0x87')][_0x40d9('0x14f')][_0x40d9('0x28')]+'-'+board[_0x40d9('0x87')][_0x40d9('0x14d')][_0x40d9('0x28')]+_0x40d9('0x169'));}function _kifuNoteButtonClick(){if(board[_0x40d9('0x87')]['isStudy']()){writeUserMessage(EJ(_0x40d9('0x16a'),_0x40d9('0x16b')),0x2,'#FF0000');return;}let _0x3f10bb=window['open'](_0x40d9('0x16c'),'kifu_note');if(!_0x3f10bb)alert(EJ(_0x40d9('0x16d'),_0x40d9('0x16e')));}function _shareKifuButtonClick(_0x253c84){if(board[_0x40d9('0x16f')]()!='')shareKifu(_0x253c84);else writeUserMessage(EJ(_0x40d9('0x170'),_0x40d9('0x171')),0x2,_0x40d9('0x82'));}function _uploadKifuButtonClick(){if(board[_0x40d9('0x87')][_0x40d9('0x172')]()&&board[_0x40d9('0x8d')]()){let _0x54898b=document[_0x40d9('0x173')](_0x40d9('0x174'));_0x54898b[_0x40d9('0x175')]=_0x40d9('0x176');_0x54898b['addEventListener'](_0x40d9('0x177'),function(_0x24d6ba){let _0xcaebed=_0x24d6ba[_0x40d9('0x178')][_0x40d9('0x179')][0x0];let _0x4d9d54=new FileReader();_0x4d9d54[_0x40d9('0x17a')]=function(_0x4012fb){let _0x70044b=[];if(_0xcaebed[_0x40d9('0x28')][_0x40d9('0x11b')](/\.bod$/))_0x70044b=CSALinesFromBOD(_0x4012fb[_0x40d9('0x178')][_0x40d9('0x17b')]);else if(_0xcaebed[_0x40d9('0x28')]['match'](/\.kif$/))_0x70044b=CSALinesFromKIF(_0x4012fb[_0x40d9('0x178')][_0x40d9('0x17b')]);if(_0x70044b['length']>0x0)client['resetStudyPosition'](_0x70044b['join']('/'));};_0x4d9d54[_0x40d9('0x17c')](_0xcaebed);},![]);_0x54898b[_0x40d9('0x17d')]();}}function _optionButtonClick(){$(_0x40d9('0x17e'))['dialog'](_0x40d9('0x110'));}function _handleOptionClose(){$(_0x40d9('0x17e'))[_0x40d9('0xda')](_0x40d9('0xe3'));_setOptionsFromDialog();_enforceOptions();}function _playerNameDblClick(_0x11d239){_openPlayerInfo(users[_0x11d239]);}function _allowWatcherChatClick(){_allowWatcherChat=$('#receiveWatcherChatCheckBox')['is'](_0x40d9('0x17f'));if(_allowWatcherChat)_sendAutoChat(_0x40d9('0x180'));else _sendAutoChat(_0x40d9('0x181'));}function _closeBoard(){if(board['isHost']())_giveHostButtonClick();if(board['isPlayer']()){client[_0x40d9('0x182')]();_writeAfterCloseBoardMessage();}else if(board[_0x40d9('0x183')]())client[_0x40d9('0x121')](board['game'][_0x40d9('0x113')],![]);_checkLobbyButtonClick(!![]);_refreshLobby();board['close']();_switchLayer(0x1);$('#boardMessageArea')[_0x40d9('0x142')]();watcherGrid['clear']()[_0x40d9('0xc2')]();kifuGrid[_0x40d9('0x40')]()['draw']();_greetState=0x0;_studyBase=null;_studyBranchMoves=null;_opponentDisconnectCount=0x0;_updateHostPlayer(null);forceKifuMode(0x1);_kifuModeRadioChange();}function _writeAfterCloseBoardMessage(){if(_dialogOnBoardClose){_dialogOnBoardClose=![];writeUserMessage(i18next['t'](_0x40d9('0x184'))+board[_0x40d9('0x16f')](),0x1,_0x40d9('0x11e'));_askEvaluation(board[_0x40d9('0x185')]()[_0x40d9('0x28')]);if(board['game'][_0x40d9('0x15e')]=='r'){if(!me[_0x40d9('0x186')]&&isBeforeUpgrade(me[_0x40d9('0x3c')]))writeUserMessage(i18next['t']('msg.before_upgrade'),0x1,'#FF3388');else if(!me[_0x40d9('0x186')]&&isBeforeDowngrade(me[_0x40d9('0x3c')]))writeUserMessage(i18next['t'](_0x40d9('0x187')),0x1,_0x40d9('0x188'));}}}function sendMoveAsPlayer(_0x189692){client[_0x40d9('0x189')](_0x189692);board[_0x40d9('0x18a')]['push'](_0x189692);}function _kifuModeRadioChange(){if($(_0x40d9('0x18b'))[_0x40d9('0x7b')](_0x40d9('0x76'))){if(board['onListen']){board[_0x40d9('0x14a')]=![];$(_0x40d9('0x18c'))[_0x40d9('0x67')](_0x40d9('0xba'))[_0x40d9('0x10c')](_0x40d9('0x18d'));if(board[_0x40d9('0x18e')]())_sendAutoChat(_0x40d9('0x18f'));board['clearCanvas']();}}else{if(!board['onListen']){board[_0x40d9('0x14a')]=!![];$(_0x40d9('0x18c'))[_0x40d9('0x67')](_0x40d9('0xba'))[_0x40d9('0x136')](_0x40d9('0x18d'));if(board[_0x40d9('0x18e')]())_sendAutoChat('#G001');board[_0x40d9('0x14b')](![]);if(board[_0x40d9('0x190')]&&_studyBase!=null)_handleStudy();if(!board[_0x40d9('0x190')]){if(kifuGrid[_0x40d9('0xc5')]()[_0x40d9('0x191')]()>0x0&&kifuGrid[_0x40d9('0x43')](_0x40d9('0x192'))[_0x40d9('0x5a')]()[_0x40d9('0x193')])_restorePublicKifu();kifuGrid[_0x40d9('0x43')](_0x40d9('0x192'))[_0x40d9('0x80')]();scrollGridToSelected(kifuGrid);board[_0x40d9('0x194')](board[_0x40d9('0x18a')]);}board[_0x40d9('0x195')](!![],!![]);}}board[_0x40d9('0x196')]();}function forceKifuMode(_0x1f24f4){if($(_0x40d9('0x197')+_0x1f24f4+')')[_0x40d9('0x7b')](_0x40d9('0x76'))==![]){$(_0x40d9('0x197')+_0x1f24f4+')')['prop'](_0x40d9('0x76'),!![]);_kifuModeRadioChange();}}function _kifuSelected(_0xac35c1){if(kifuGrid[_0x40d9('0x43')](':last')[_0x40d9('0x5a')]()[_0x40d9('0x193')]&&!kifuGrid[_0x40d9('0x43')](_0xac35c1)['data']()['branch']){_restorePublicKifu();if(board[_0x40d9('0x8d')]())_sendAutoChat(_0x40d9('0x198'));}board[_0x40d9('0x194')](kifuGrid[_0x40d9('0xc5')](Array[_0x40d9('0x199')](Array(_0xac35c1+0x1)[_0x40d9('0xd6')]()))[_0x40d9('0x5a')]());if(board[_0x40d9('0x8d')]()){sendStudy(_0xac35c1);}else{forceKifuMode(0x0);}}function _replayButtonClick(_0xd803f3){let _0xcd7919=kifuGrid['row']({'selected':!![]})['index']();if(_0xd803f3<0x0&&_0xcd7919<=0x0)return;if(_0xd803f3>0x0&&_0xcd7919>=kifuGrid[_0x40d9('0xc5')]()['count']()-0x1){if(!board[_0x40d9('0x190')]&&!board[_0x40d9('0x14a')]){forceKifuMode(0x1);_kifuModeRadioChange();}return;}switch(_0xd803f3){case-0x2:_0xcd7919=0x0;break;case-0x1:_0xcd7919--;break;case 0x1:_0xcd7919++;break;case 0x2:_0xcd7919=kifuGrid[_0x40d9('0xc5')]()[_0x40d9('0x191')]()-0x1;break;}kifuGrid['row'](_0xcd7919)[_0x40d9('0x80')]();scrollGridToSelected(kifuGrid);_kifuSelected(_0xcd7919);}function _restorePublicKifu(){let _0x18ad1c=kifuGrid[_0x40d9('0x43')]({'selected':!![]})[_0x40d9('0x48')]();if(board[_0x40d9('0x18a')][_0x40d9('0x94')]<=0x1)return;kifuGrid[_0x40d9('0x40')]();kifuGrid['rows'][_0x40d9('0x19a')](board[_0x40d9('0x18a')]);kifuGrid[_0x40d9('0x43')](_0x18ad1c)[_0x40d9('0x80')]();drawGridMaintainScroll(kifuGrid);}function _updateHostPlayer(_0x4162f8){if(!board[_0x40d9('0x87')])return;if(_0x4162f8==hostPlayerName)return;let _0x490bac=hostPlayerName;hostPlayerName=_0x4162f8;board[_0x40d9('0x19b')]['detach']();if(watcherGrid[_0x40d9('0x43')]('#'+_0x490bac)[_0x40d9('0x5a')]()){watcherGrid[_0x40d9('0x43')]('#'+_0x490bac)[_0x40d9('0x5a')](users[_0x490bac][_0x40d9('0x19c')]());}if(watcherGrid[_0x40d9('0x43')]('#'+hostPlayerName)['data']()){watcherGrid[_0x40d9('0x43')]('#'+hostPlayerName)[_0x40d9('0x5a')](users[hostPlayerName][_0x40d9('0x19c')]());}else if(hostPlayerName==board['game']['black'][_0x40d9('0x28')]||hostPlayerName==board[_0x40d9('0x87')][_0x40d9('0x14d')]['name']){board[_0x40d9('0x19d')][hostPlayerName==board['game'][_0x40d9('0x14f')][_0x40d9('0x28')]?0x0:0x1][_0x40d9('0x67')](_0x40d9('0x19e'))['prepend'](board['hostMark']);}}function sendTimeout(){client[_0x40d9('0x19f')]();board[_0x40d9('0x1a0')]();}function setBoardConditions(){if(board['isPlayer']()){$(_0x40d9('0x1a1'))[_0x40d9('0x10c')](_0x40d9('0x68'));$('#greetButton')[_0x40d9('0x7b')](_0x40d9('0xc1'),![]);if(board[_0x40d9('0x190')]){kifuGrid[_0x40d9('0x80')][_0x40d9('0x1a2')](_0x40d9('0x30'));$(_0x40d9('0x1a3'))[_0x40d9('0x67')](_0x40d9('0xdd'))[_0x40d9('0x7b')](_0x40d9('0xc1'),![]);$(_0x40d9('0x1a4'))[_0x40d9('0x7b')](_0x40d9('0xc1'),board[_0x40d9('0x8d')]());$(_0x40d9('0x1a5'))['addClass'](_0x40d9('0x68'));$(_0x40d9('0x1a6'))[_0x40d9('0x136')](_0x40d9('0x68'));$(_0x40d9('0x1a7'))[_0x40d9('0x7b')]({'disabled':!![],'checked':!![]});}else{kifuGrid['select'][_0x40d9('0x1a2')](_0x40d9('0x1a8'));$('#replayButtons')[_0x40d9('0x67')](_0x40d9('0xdd'))['prop'](_0x40d9('0xc1'),!![]);$(_0x40d9('0x1a4'))[_0x40d9('0x7b')]('disabled',!![]);$(_0x40d9('0x1a5'))[_0x40d9('0x136')](_0x40d9('0x68'));$(_0x40d9('0x1a6'))['addClass']('button-disabled');if(board[_0x40d9('0x87')][_0x40d9('0x15e')]!='r'){$(_0x40d9('0x1a7'))[_0x40d9('0x7b')]({'disabled':![],'checked':!![]});}else{$(_0x40d9('0x1a7'))['prop']({'disabled':!![],'checked':![]});}}}else if(board[_0x40d9('0x183')]()){kifuGrid[_0x40d9('0x80')][_0x40d9('0x1a2')](_0x40d9('0x30'));$(_0x40d9('0x1a3'))[_0x40d9('0x67')](_0x40d9('0xdd'))[_0x40d9('0x7b')](_0x40d9('0xc1'),![]);$(_0x40d9('0x1a4'))[_0x40d9('0x7b')](_0x40d9('0xc1'),board['isHost']());$(_0x40d9('0x1a9'))[_0x40d9('0x7b')](_0x40d9('0xc1'),_0x40d9('0x77'));$('#resignButton,\x20#rematchButton')[_0x40d9('0x10c')]('button-disabled');$(_0x40d9('0x1aa'))[_0x40d9('0x136')]('button-disabled');$('#receiveWatcherChatCheckBox')[_0x40d9('0x7b')]({'disabled':!![],'checked':!![]});}if(board[_0x40d9('0x87')])$(_0x40d9('0x1ab'))[_0x40d9('0x136')](_0x40d9('0x68'));else $(_0x40d9('0x1ab'))[_0x40d9('0x10c')](_0x40d9('0x68'));if(board[_0x40d9('0x14a')])$(_0x40d9('0x1ac'))['prop'](_0x40d9('0x76'),!![]);else $(_0x40d9('0x18b'))['prop'](_0x40d9('0x76'),!![]);if(board['isHost']())$(_0x40d9('0x1ad'))[_0x40d9('0xa6')](_0x40d9('0x105'),_0x40d9('0xad'));else $(_0x40d9('0x1ad'))['css']('display','none');if(board[_0x40d9('0x8d')]()&&board['isPlayer']())$(_0x40d9('0x1ae'))[_0x40d9('0x136')](_0x40d9('0x68'));else $(_0x40d9('0x1ae'))['addClass']('button-disabled');if(board[_0x40d9('0x87')][_0x40d9('0x172')]()&&board['isHost']())$(_0x40d9('0x1af'))[_0x40d9('0x136')](_0x40d9('0x1b0'));else $(_0x40d9('0x1af'))[_0x40d9('0x10c')](_0x40d9('0x1b0'));if(board[_0x40d9('0x190')])$(_0x40d9('0x1b1'))[_0x40d9('0x136')](_0x40d9('0x1b0'));else $(_0x40d9('0x1b1'))[_0x40d9('0x10c')]('submenu-button-disabled');_allowWatcherChat=$('#receiveWatcherChatCheckBox')['is'](_0x40d9('0x17f'));_kifuModeRadioChange();}function _handleNewGame(){let _0x1260cc=$(_0x40d9('0x1b2'))['val']();let _0x44d0d0='';let _0x200082=$('#privateRoomPass')[_0x40d9('0xa6')](_0x40d9('0x105'))==_0x40d9('0x1b3')?$(_0x40d9('0x1b4'))[_0x40d9('0x6f')]():'';if(_0x1260cc==0x1){client[_0x40d9('0x1b5')]('r',0x384,0x3c);}else if(_0x1260cc==0x2){client['wait']('r',0x258,0x1e);}else if(_0x1260cc==0x3){client['wait']('r',0x12c,0x1e);}else if(_0x1260cc==0x4){client[_0x40d9('0x1b5')]('r',0x0,0x1e);}else if(_0x1260cc==0x5){let _0x544257=$('#newGameRuleSelect\x20option:selected')[_0x40d9('0x6f')]();client[_0x40d9('0x1b5')](_0x544257,0x3c*$(_0x40d9('0x1b6'))[_0x40d9('0x6f')](),$(_0x40d9('0x1b7'))[_0x40d9('0x6f')](),_0x544257[_0x40d9('0x11b')](/^hc/)?-0x1:0x0,'',_0x44d0d0,_0x200082);}else if(_0x1260cc==0x6){let _0x94cdbb=$('#newGameTournamentSelect\x20option:selected')['val']();if(tournaments[_0x94cdbb])tournaments[_0x94cdbb][_0x40d9('0x1b5')]();}else if(_0x1260cc==0x7){client[_0x40d9('0x1b8')]();let _0x18656f=$(_0x40d9('0x1b9'))[_0x40d9('0x6f')]();let _0x527e2b=$(_0x40d9('0x1ba'))[_0x40d9('0x6f')]();let _0x2d0ff0=$(_0x40d9('0x1bb'))[_0x40d9('0x6f')]();client['study'](_0x18656f,_0x527e2b,_0x2d0ff0,_0x200082);}else if(_0x1260cc==0x8){client[_0x40d9('0x1b8')]();}$(_0x40d9('0x10f'))[_0x40d9('0xda')](_0x40d9('0xe3'));}function _handleAcceptChallenge(){client[_0x40d9('0x1bc')]();_gameAccepted=!![];}function _handleRejectChallenge(_0x30cbdb,_0x1c8cb4=null){client[_0x40d9('0x1bd')](_0x1c8cb4);writeUserMessage(EJ(_0x40d9('0x1be')+_0x30cbdb[_0x40d9('0x28')]+'.',_0x30cbdb[_0x40d9('0x28')]+_0x40d9('0x1bf')),0x1,_0x40d9('0x11e'),!![]);}function _handleAcceptInvitation(_0x201066){_playerChallengeClick(_0x201066);}function _handleDeclineInvitation(_0xaebd4f,_0x1bf5f4=''){client[_0x40d9('0x1c0')](_0xaebd4f[_0x40d9('0x28')],'[##REJECT]'+_0x1bf5f4);writeUserMessage(EJ(_0x40d9('0x1c1')+_0xaebd4f[_0x40d9('0x28')]+'.',_0xaebd4f[_0x40d9('0x28')]+'さんからの招待をパスしました。'),0x1,_0x40d9('0x11e'),!![]);}function _openPlayerInfo(_0x59d7a7,_0xe6e9c6=!![]){let _0x274bd2=$(_0x40d9('0x1c2')+_0x59d7a7[_0x40d9('0x28')]);if(!_0x274bd2[0x0]){_0x274bd2=$(_0x40d9('0x1c3'),{'id':_0x40d9('0x1c4')+_0x59d7a7[_0x40d9('0x28')],'title':_0x59d7a7[_0x40d9('0x28')]+'\x20\x20'+_0x59d7a7[_0x40d9('0x1c5')](),'html':_0x40d9('0x1c6')+_0x59d7a7['name']+_0x40d9('0x1c7')})['dialog']({'autoOpen':![],'width':_0x40d9('0x1c8'),'position':{'at':_0x40d9('0x1c9')+mouseX+_0x40d9('0x1ca')+mouseY},'close':function(_0x17bc7b){if(_0x274bd2['find'](_0x40d9('0x1cb'))[_0x40d9('0xcd')]()=='')_0x274bd2[_0x40d9('0xda')]('destroy')[_0x40d9('0x1cc')]();},'buttons':[{'text':'','class':_0x40d9('0x1cd'),'title':i18next['t']('board.give_host'),'click':function(){_giveHostButtonClick(_0x59d7a7);}},{'text':'','class':_0x40d9('0x1ce'),'title':i18next['t'](_0x40d9('0x1cf')),'click':function(){_giveSubhostButtonClick(_0x59d7a7);}},{'text':i18next['t'](_0x40d9('0x1d0')),'click':function(){_playerChallengeClick(_0x59d7a7);$(this)['dialog'](_0x40d9('0xe3'));}},{'text':'','class':_0x40d9('0x1d1'),'title':i18next['t']('player_info.detail'),'click':function(){_playerDetailClick(_0x59d7a7);}},{'text':'','class':_0x40d9('0x1d2'),'title':'PM','click':function(){_playerPMClick(this);}}]});if(!board[_0x40d9('0x8d')]())_0x274bd2['siblings'](_0x40d9('0x1d3'))['find'](_0x40d9('0x1ad'))[_0x40d9('0xa6')](_0x40d9('0x105'),'none');if(_0x59d7a7[_0x40d9('0x10e')])_0x274bd2[_0x40d9('0x67')](_0x40d9('0x1d4'))[_0x40d9('0x7b')](_0x40d9('0xc1'),!![]);_0x274bd2[_0x40d9('0x67')](_0x40d9('0x1d4'))['on'](_0x40d9('0x92'),function(_0x5945ab){if(_0x5945ab[_0x40d9('0x93')]==0xd){if($(this)[_0x40d9('0x6f')]()[_0x40d9('0x94')]>0x0){if(board['isPlaying']()){showAlertDialog('pm_while_playing');}else{client[_0x40d9('0x1c0')](_0x59d7a7[_0x40d9('0x28')],$(this)['val']());let _0xd42429=_0x274bd2[_0x40d9('0x67')](_0x40d9('0x1cb'));$(_0x40d9('0x12b'),{})['css'](_0x40d9('0x1d5'),_0x40d9('0x1d6'))[_0x40d9('0x8')]($(this)[_0x40d9('0x6f')]())['appendTo'](_0xd42429);_0xd42429[_0x40d9('0xd7')](_0x40d9('0x1d7'));_0xd42429[_0x40d9('0xbe')]({'scrollTop':_0xd42429[0x0]['scrollHeight']},_0x40d9('0x6c'));}$(this)['val']('');}}});}if(_0xe6e9c6){_0x274bd2[_0x40d9('0xda')](_0x40d9('0x110'));if(!_0x59d7a7[_0x40d9('0x10e')])apiClient[_0x40d9('0x1d8')](_0x59d7a7);if(_0x59d7a7[_0x40d9('0x1d9')]())apiClient[_0x40d9('0x1da')](_0x59d7a7['waitingTournamentId'],_0x59d7a7[_0x40d9('0x28')]);if(getPremium()>=0x1)apiClient[_0x40d9('0x1db')](_0x59d7a7['name']);}_0x274bd2[_0x40d9('0x67')]('img.avatar')[_0x40d9('0xd2')](_0x40d9('0x109'),_0x59d7a7[_0x40d9('0x1dc')]());_0x274bd2[_0x40d9('0x67')]('p#p1')[_0x40d9('0xcd')](_0x59d7a7[_0x40d9('0x3a')][_0x40d9('0x1dd')]()+'\x20'+_0x59d7a7[_0x40d9('0x3a')][_0x40d9('0x1de')]());_0x274bd2[_0x40d9('0x67')](_0x40d9('0x1df'))[_0x40d9('0xcd')](_0x40d9('0x1e0')+_0x59d7a7[_0x40d9('0x3c')]+'\x20('+makeRankFromRating(_0x59d7a7[_0x40d9('0x3c')])+')\x20'+_0x59d7a7[_0x40d9('0x1e1')]()+_0x40d9('0x1e2')+_0x59d7a7[_0x40d9('0x28')]+_0x40d9('0x1e3'));return _0x274bd2;}function _playerChallengeClick(_0x45378b){if(_0x45378b==me)return;if(board[_0x40d9('0x13f')]()){writeUserMessage(i18next(_0x40d9('0x1e4')),0x1,_0x40d9('0x11e'));}else if(_challengeUser){writeUserMessage(i18next(_0x40d9('0x1e5')),0x1,'#008800');}else if(_0x45378b[_0x40d9('0x1e6')]()){if(_0x45378b[_0x40d9('0x1e7')]&&!_0x45378b[_0x40d9('0x1d9')]()){writeUserMessage(EJ(_0x40d9('0x1e8'),'この大会には参加していません。'),0x1,_0x40d9('0x119'));}else if(_0x45378b[_0x40d9('0x3c')]>=RANK_THRESHOLDS[0x2]&&me['provisional']&&_0x45378b['waitingGameName'][_0x40d9('0x11b')](/^r_/)){writeUserMessage(i18next['t'](_0x40d9('0x1e9')),0x1,_0x40d9('0x11e'));}else if(_checkGuestGamesExpired()){}else if(_0x45378b[_0x40d9('0x1ea')][_0x40d9('0x11b')](/_automatch\-/)){client[_0x40d9('0x1eb')](_0x45378b);}else if(_0x45378b['waitingGameName'][_0x40d9('0x11b')](/^va/)){writeUserMessage(EJ(_0x40d9('0x1ec'),_0x40d9('0x1ed')),0x1,'#ff0000');}else if(me[_0x40d9('0x10e')]&&_0x45378b[_0x40d9('0x1ea')]['match'](/^r_/)){writeUserMessage(i18next['t'](_0x40d9('0x1ee')),0x1,_0x40d9('0x119'));}else{_challengeUser=_0x45378b;writeUserMessage(EJ('Challenging\x20'+_challengeUser[_0x40d9('0x28')]+'.....\x20(Must\x20wait\x20for\x2020\x20seconds\x20max)',_challengeUser[_0x40d9('0x28')]+'さんに挑戦中.....\x20(待ち時間\x20最大で20秒)'),0x1,_0x40d9('0x11e'),!![]);client['challenge'](_challengeUser);setGeneralTimeout(_0x40d9('0xf6'),0x6d60);}}else if(me[_0x40d9('0x10e')]||_0x45378b[_0x40d9('0x1ef')]){writeUserMessage(EJ(_0x40d9('0x1f0'),_0x40d9('0x1f1')),0x1,_0x40d9('0x11e'));}else if(!me[_0x40d9('0x1e6')]()){writeUserMessage(EJ(_0x40d9('0x1f2'),_0x40d9('0x1f3')),0x1,_0x40d9('0x11e'));}else if(_0x45378b[_0x40d9('0x1f4')]){writeUserMessage(_0x45378b[_0x40d9('0x28')]+EJ(_0x40d9('0x1f5'),'さんは現在\x20挑戦・招待を受け付けていません。'),0x1,_0x40d9('0x11e'),!![]);}else if(_0x45378b[_0x40d9('0x1f6')]()){writeUserMessage(_0x45378b[_0x40d9('0x28')]+EJ(_0x40d9('0x1f7'),'さんは対局中です。'),0x1,_0x40d9('0x11e'),!![]);}else{me[_0x40d9('0x1ea')][_0x40d9('0x11b')](/^([0-9a-z]+?)_(.*)-([0-9]*)-([0-9]*)/);client[_0x40d9('0x1c0')](_0x45378b[_0x40d9('0x28')],_0x40d9('0x1f8')+RegExp['$3']+','+RegExp['$4']+','+RegExp['$1']);writeUserMessage(EJ('The\x20opponent\x20is\x20not\x20waiting\x20with\x20own\x20game\x20rule.\x20Instead,\x20an\x20invitation\x20to\x20your\x20game\x20has\x20been\x20sent\x20to\x20him.','相手は対局待をしていません。代わりに自分の対局への招待メッセージを'+_0x45378b[_0x40d9('0x28')]+_0x40d9('0x1f9')),0x1,'#008800');}}function _playerDetailClick(_0xaab109){if(_0xaab109['isGuest'])return;window['open']('http://system.81dojo.com/'+EJ('en','ja')+'/players/show/'+_0xaab109[_0x40d9('0x28')]);}function _playerPMClick(_0x2ba703,_0x4d4201=![]){if(_0x4d4201||$(_0x2ba703)['find'](_0x40d9('0x1fa'))['css'](_0x40d9('0x1fb'))==0x1){$(_0x2ba703)[_0x40d9('0x67')]('div#player-info-layer-1')['css'](_0x40d9('0x1fb'),0x0);$(_0x2ba703)[_0x40d9('0x67')](_0x40d9('0x1fc'))[_0x40d9('0xa6')](_0x40d9('0x1fb'),0x1);}else{$(_0x2ba703)[_0x40d9('0x67')](_0x40d9('0x1fa'))[_0x40d9('0xa6')](_0x40d9('0x1fb'),0x1);$(_0x2ba703)[_0x40d9('0x67')](_0x40d9('0x1fc'))['css'](_0x40d9('0x1fb'),0x0);}}function _handleImpasseDeclare(){$(_0x40d9('0x148'))[_0x40d9('0xda')](_0x40d9('0xe3'));client[_0x40d9('0x1fd')]();}function sendGrab(_0x42a249,_0x13dff0){client[_0x40d9('0x85')](_0x40d9('0x1fe')+_0x42a249+','+_0x13dff0);}function _handleGeneralResponse(_0x30fa8c){console[_0x40d9('0x1ff')](_0x40d9('0x200')+_0x30fa8c);}function _handleLoggedIn(_0xb77694){sp[_0x40d9('0x201')]();$(_0x40d9('0x202'))[_0x40d9('0x8')](i18next['t'](_0x40d9('0x203')));if($(_0x40d9('0xe1'))[_0x40d9('0x6f')]()==0x0&&$(_0x40d9('0x75'))[_0x40d9('0x7b')]('checked')){localStorage[_0x40d9('0x6d')]=$(_0x40d9('0x6e'))[_0x40d9('0x6f')]();localStorage['dat']=caesar(caesar($(_0x40d9('0x72'))['val'](),0x3),0x51);localStorage[_0x40d9('0x74')]=$(_0x40d9('0x75'))[_0x40d9('0x7b')](_0x40d9('0x76'));}$(_0x40d9('0x204'))[_0x40d9('0xbe')]({'opacity':0x0},testMode?0x0:0x3e8,function(){_switchLayer(0x1);_refreshLobby(!![]);$(_0x40d9('0x204'))['css']('opacity',0x1);if(testMode)_testFunction(0x2);});$(_0x40d9('0x205'))[_0x40d9('0x7b')](_0x40d9('0x109'),_0x40d9('0x206')+client[_0x40d9('0x207')]+_0x40d9('0x208'));$(_0x40d9('0x209'))[_0x40d9('0x8')](client['serverName']+_0x40d9('0x20a'));let _0x53154c=_0xb77694[_0x40d9('0xd')](':');client['username']=_0x53154c[0x0];users[client[_0x40d9('0x20b')]]=new User(client[_0x40d9('0x20b')]);me=users[client[_0x40d9('0x20b')]];me['setFromLogin'](_0x53154c);mileage=parseInt(_0x53154c[0xc]);premium=makePremiumNum(parseInt(_0x53154c[0xd]),_0x53154c[0xe]);hidden_prm=premium;_enforcePremium();if(_loginHistory[_0x40d9('0x20c')](client[_0x40d9('0x20b')])>=0x0)_loginHistory[_0x40d9('0x20d')](_loginHistory[_0x40d9('0x20c')](client['username']),0x1);_loginHistory[_0x40d9('0x17')](client[_0x40d9('0x20b')]);localStorage[_0x40d9('0x73')]=caesar(caesar(_loginHistory['join'](','),0x3),0x51);apiClient['getOptions']();apiClient[_0x40d9('0x20e')]();_updateLobbyHeader();_writeWelcomeMessage();_hourMileCount=0x0;setGeneralTimeout(_0x40d9('0x20f'),0x36ee80);_refreshWorldClocks();$(_0x40d9('0x210'))[_0x40d9('0xa6')]('display',i18next[_0x40d9('0x1d')]=='ja'?_0x40d9('0x1b3'):_0x40d9('0x106'));}function _writeWelcomeMessage(){writeUserMessage(i18next['t']('msg.html5_initial'),0x1,_0x40d9('0x11e'));if(getPremium())writeUserMessage(EJ(_0x40d9('0x211')+makePremiumName(getPremium())+'\x20status.\x20Thank\x20you\x20for\x20choosing\x2081Dojo.',makePremiumName(getPremium())+_0x40d9('0x212')+me[_0x40d9('0x28')]+_0x40d9('0x213')),0x1,_0x40d9('0x214'),!![]);}function _updateLobbyHeader(){$(_0x40d9('0x215'))[_0x40d9('0x8')](me[_0x40d9('0x28')]+_0x40d9('0x20a'));$('#header-rate')['text']('R'+me['rate']+_0x40d9('0x20a'));$('#header-mile')[_0x40d9('0x8')](mileage+EJ(_0x40d9('0x216'),_0x40d9('0x217')));$(_0x40d9('0x218'))[_0x40d9('0x8')](makePremiumName(premium)+EJ(_0x40d9('0x219'),'\x20クラス'));}function _handleLoginFailed(_0x415042){$(_0x40d9('0x202'))[_0x40d9('0x8')](i18next['t']('code.'+_0x415042));$(_0x40d9('0xe5'))[_0x40d9('0xd2')](_0x40d9('0xc1'),![]);}function _handleWho(_0x3a8161){let _0x5b638d=_0x3a8161['trim']()[_0x40d9('0xd')]('\x0a');_0x5b638d[_0x40d9('0x11')](function(_0x2e759b){let _0x1e171b=_0x2e759b[_0x40d9('0xd')](',');let _0x197355=_0x1e171b[_0x40d9('0x21a')]();if(users[_0x197355]==null)users[_0x197355]=new User(_0x197355);users[_0x197355]['setFromWho'](_0x1e171b);});playerGrid[_0x40d9('0x40')]();waiterGrid[_0x40d9('0x40')]();Object[_0x40d9('0xd6')](users)[_0x40d9('0x11')](function(_0x43f118){playerGrid[_0x40d9('0x43')][_0x40d9('0x19a')](users[_0x43f118][_0x40d9('0x19c')]());if(users[_0x43f118][_0x40d9('0x1e6')]())waiterGrid[_0x40d9('0x43')]['add'](users[_0x43f118][_0x40d9('0x19c')]());});playerGrid[_0x40d9('0xc2')]();playerGrid['row']('#'+me[_0x40d9('0x28')])[_0x40d9('0x80')]();scrollGridToSelected(playerGrid);drawGridMaintainScroll(waiterGrid);_playerSelected(playerGrid,playerGrid[_0x40d9('0x43')]({'selected':!![]})[_0x40d9('0x48')]());$(_0x40d9('0x21b'))[_0x40d9('0x7d')](_0x40d9('0xde'),_0x40d9('0x21c'),Object[_0x40d9('0xd6')](users));}function _handleList(_0x5b5832){let _0x2da126=0x0;let _0x3cea71=_0x5b5832[_0x40d9('0x18')]()[_0x40d9('0xd')]('\x0a');gameGrid[_0x40d9('0x40')]();let _0x3e5629=[];let _0x3d9661=null;_0x3cea71[_0x40d9('0x11')](function(_0x193d2d){if(_0x193d2d=='')return;_0x2da126+=0x1;let _0x40fa90=_0x193d2d[_0x40d9('0xd')]('\x20');let _0xd050da=users[_0x40fa90[0x0][_0x40d9('0xd')]('+')[0x2]];if(!_0xd050da){_0xd050da=new User(_0x40fa90[0x0][_0x40d9('0xd')]('+')[0x2]);if(_0x40fa90[0x0][_0x40d9('0x11b')](/^STUDY\+/))_0xd050da[_0x40d9('0x21d')](!![]);else _0xd050da[_0x40d9('0x21e')](_0x40fa90[0x2],parseInt(_0x40fa90[0x4]));}let _0x446a43=users[_0x40fa90[0x0][_0x40d9('0xd')]('+')[0x3]];if(!_0x446a43){_0x446a43=new User(_0x40fa90[0x0]['split']('+')[0x3]);if(_0x40fa90[0x0]['match'](/^STUDY\+/))_0x446a43['setFromStudy'](![]);else _0x446a43[_0x40d9('0x21e')](_0x40fa90[0x3],parseInt(_0x40fa90[0x5]));}let _0x180023=new Game(_0x2da126,_0x40fa90[0x0],_0xd050da,_0x446a43);_0x180023[_0x40d9('0x21e')](parseInt(_0x40fa90[0x1]),_0x40fa90[0x6],_0x40fa90[0x7]==_0x40d9('0x77'),_0x40fa90[0x8]=='true',parseInt(_0x40fa90[0x9]),_0x40fa90[0xa]);if(_0x180023[_0x40d9('0x21f')]())_0x3d9661=_0x180023;_0x3e5629[_0x40d9('0x17')](_0x180023);});gameGrid[_0x40d9('0xc5')][_0x40d9('0x19a')](_0x3e5629);gameGrid[_0x40d9('0xc2')]();if(_0x3d9661)_enterGame(_0x3d9661);}function _handleWatchers(_0x359273){let _0x2dab90=_0x359273['trim']()[_0x40d9('0xd')]('\x0a');watcherGrid['clear']();_0x2dab90[_0x40d9('0x11')](function(_0x4072e2){if(users[_0x4072e2])watcherGrid[_0x40d9('0x43')][_0x40d9('0x19a')](users[_0x4072e2][_0x40d9('0x19c')]());});watcherGrid[_0x40d9('0xc2')]();}function _handleLobbyIn(_0x3279a4){let _0x2c3e1b=_0x3279a4[_0x40d9('0xd')](',');let _0x4258ba='';let _0x9387fe=_0x2c3e1b[0x0];if(_0x2c3e1b[0x2]==_0x40d9('0x77')&&parseInt(_0x2c3e1b[0x1])<RANK_THRESHOLDS[0x0]){_0x4258ba=EJ('A\x20new\x20player',_0x40d9('0x220'));}else{_0x4258ba=EJ('A\x20','')+makeRankFromRating(parseInt(_0x2c3e1b[0x1]));}let _0x2e12b3=_0x2c3e1b[0xc]!=null&&_0x2c3e1b[0xc][_0x40d9('0x11b')](/81AR/);if(_isFavorite(_0x9387fe)||_isColleague(_0x9387fe)||parseInt(_0x2c3e1b[0x1])>=RANK_THRESHOLDS[0x3]||parseInt(_0x2c3e1b[0x6])>=0x7||users[_0x40d9('0x94')]<0x28&&_0x9387fe!=me['name']){writeUserMessage(_0x40d9('0x221')+_name2link(_0x9387fe)+EJ(_0x40d9('0x222')+(_0x2e12b3?_0x40d9('0x223'):'')+'.\x20'+_0x4258ba+_0x40d9('0x224')+countries[parseInt(_0x2c3e1b[0x3])][_0x40d9('0x225')]+'.'+(parseInt(_0x2c3e1b[0x6])>=0x3?_0x40d9('0x226')+_0x2c3e1b[0x6]+_0x40d9('0x227'):''),_0x40d9('0x228')+(_0x2e12b3?_0x40d9('0x229'):'')+_0x40d9('0x22a')+countries[parseInt(_0x2c3e1b[0x3])]['name_ja']+',\x20'+_0x4258ba+')'+(parseInt(_0x2c3e1b[0x6])>=0x3?'\u3000現在'+_0x2c3e1b[0x6]+_0x40d9('0x22b'):'')),0x1,'#008800',_isFavorite(_0x9387fe)||_isColleague(_0x9387fe));}if(_0x9387fe==me[_0x40d9('0x28')])return;if(!users[_0x9387fe]){users[_0x9387fe]=new User(_0x9387fe);$(_0x40d9('0x21b'))[_0x40d9('0x7d')](_0x40d9('0xde'),_0x40d9('0x21c'),Object[_0x40d9('0xd6')](users));}else{}users[_0x9387fe][_0x40d9('0x22c')](parseInt(_0x2c3e1b[0x1]),_0x2c3e1b[0x2],parseInt(_0x2c3e1b[0x3]),_0x2c3e1b[0xc]);playerGrid[_0x40d9('0x43')][_0x40d9('0x19a')](users[_0x9387fe]['gridObject']());drawGridMaintainScroll(playerGrid);}function _handleLobbyOut(_0x514eb8){if(currentLayer==0x1){if(_isFavorite(_0x514eb8)||_isColleague(_0x514eb8)){writeUserMessage(_0x40d9('0x221')+_0x514eb8+i18next['t']('code.G031'),0x1,_0x40d9('0x11e'));}}playerGrid[_0x40d9('0x43')]('#'+_0x514eb8)[_0x40d9('0x1cc')]();waiterGrid[_0x40d9('0x43')]('#'+_0x514eb8)['remove']();drawGridMaintainScroll(playerGrid);drawGridMaintainScroll(waiterGrid);delete users[_0x514eb8];}function _handleGame(_0x3c80f6){let _0x1e8344='';if(_0x3c80f6[_0x40d9('0x11b')](/^\[(.+)\]$/)){_0x1e8344=RegExp['$1'];if(users[_0x1e8344]){users[_0x1e8344][_0x40d9('0x22d')]('*','*','');if(playerInfoWindows[_0x1e8344])playerInfoWindows[_0x1e8344][_0x40d9('0x22e')]();}waiterGrid[_0x40d9('0x43')]('#'+_0x1e8344)['remove']();drawGridMaintainScroll(waiterGrid);}else{let _0x4438a0=_0x3c80f6[_0x40d9('0x11b')](/^([0-9a-z]+?)_(.*)-([0-9]*)-([0-9]*),/);if(_0x4438a0[0x2][_0x40d9('0x11b')](/^@/))return;if(_0x4438a0[0x2][_0x40d9('0x11b')](/\-\-/)){_0x1e8344=_0x4438a0[0x2][_0x40d9('0xd')]('--')[0x0];}else{_0x1e8344=_0x4438a0[0x2][_0x40d9('0xd')]('.')[0x0];}_0x4438a0=_0x3c80f6['match'](/(.+),(\+|\-|\*),(.+)$/);if(!users[_0x1e8344])return;users[_0x1e8344][_0x40d9('0x22d')](_0x4438a0[0x1],_0x4438a0[0x2],_0x4438a0[0x3]=='*'?'':_0x4438a0[0x3]);waiterGrid[_0x40d9('0x43')]('#'+_0x1e8344)[_0x40d9('0x1cc')]();waiterGrid[_0x40d9('0x43')]['add'](users[_0x1e8344][_0x40d9('0x19c')]());drawGridMaintainScroll(waiterGrid);}playerGrid[_0x40d9('0x43')]('#'+_0x1e8344)[_0x40d9('0x5a')](users[_0x1e8344][_0x40d9('0x19c')]());drawGridMaintainScroll(playerGrid);}function _handleChallenger(_0x3a71b0){sp[_0x40d9('0x22f')](_0x40d9('0x230'));$('#modalChallenger')[_0x40d9('0xda')](_0x40d9('0x110'));_initModalChallenger(users[_0x3a71b0]);if(me['waitingTournamentId'])apiClient[_0x40d9('0x1da')](me[_0x40d9('0x1e7')],_0x3a71b0);}function _handleAccept(_0x573d8c){clearGeneralTimeout[_0x40d9('0xf6')];_gameAccepted=!![];_interpretCommunicationCode('',_0x40d9('0x231'),0x1,!![],![]);if(_challengeUser)client[_0x40d9('0x1eb')](_challengeUser);}function _handleDecline(_0x3dea91){clearGeneralTimeout[_0x40d9('0xf6')];if(_0x3dea91['match'](/^([A-Z]\d{3})/)){_interpretCommunicationCode('',RegExp['$1'],0x1,!![],![]);}else{writeUserMessage(_0x3dea91,0x1,_0x40d9('0x11e'),!![]);}_challengeUser=null;_gameAccepted=![];$(_0x40d9('0x232'))[_0x40d9('0xda')](_0x40d9('0xe3'));}function _handleGameSummary(_0x56bfc4){_gameAccepted=![];let _0x22ac4e;let _0x3aca98;let _0x13e407;let _0x4a6cd8='';let _0x5dba5f;let _0x41f48c;_0x56bfc4[_0x40d9('0xd')]('\x0a')[_0x40d9('0x11')](function(_0x28f85b){if(_0x28f85b[_0x40d9('0x11b')](/^Name\+\:(.+)$/)){_0x22ac4e=users[RegExp['$1']];}else if(_0x28f85b[_0x40d9('0x11b')](/^Name\-\:(.+)$/)){_0x3aca98=users[RegExp['$1']];}else if(_0x28f85b['match'](/^Your_Turn\:(.)$/)){_0x13e407=RegExp['$1']=='+';}else if(_0x28f85b[_0x40d9('0x11b')](/^To_Move\:(.)$/)){_0x4a6cd8='P0'+RegExp['$1']+'\x0a';}else if(_0x28f85b[_0x40d9('0x11b')](/^P[0-9\+\-]/)){_0x4a6cd8+=_0x28f85b+'\x0a';}else if(_0x28f85b[_0x40d9('0x11b')](/^START:(.+):(\d+)$/)){_0x5dba5f=RegExp['$1'];_0x41f48c=RegExp['$2'];}});_challengeUser=null;if(board['game'])_closeBoard();board[_0x40d9('0x11a')](new Game(0x0,_0x5dba5f,_0x22ac4e,_0x3aca98));board[_0x40d9('0x233')](_0x4a6cd8,_0x13e407?0x0:0x1);board[_0x40d9('0x234')](_0x41f48c);_dialogOnBoardClose=![];$('#kifuGridWrapper')[_0x40d9('0x67')](_0x40d9('0xba'))[_0x40d9('0x136')]('local-kifu');setBoardConditions();_switchLayer(0x2);sp[_0x40d9('0x235')]();_greetState=0x1;_writeGameStartMessage();}function _writeGameStartMessage(){writeUserMessage(i18next['t']('msg.game_start')+'\x0a',0x2,_0x40d9('0x236'));if(board[_0x40d9('0x13a')]==0x0)writeUserMessage(EJ(_0x40d9('0x237')+(board['game'][_0x40d9('0x238')]()?_0x40d9('0x239'):_0x40d9('0x23a')),_0x40d9('0x23b')+(board[_0x40d9('0x87')][_0x40d9('0x238')]()?_0x40d9('0x23c'):_0x40d9('0x23d'))+_0x40d9('0x23e')),0x2,_0x40d9('0x11e'),!![]);else writeUserMessage(EJ(_0x40d9('0x23f')+(board['game'][_0x40d9('0x238')]()?_0x40d9('0x240'):_0x40d9('0x241')),'あなた'+(board[_0x40d9('0x87')][_0x40d9('0x238')]()?_0x40d9('0x242'):_0x40d9('0x243'))+'です。'),0x2,'#008800',!![]);if(board[_0x40d9('0x87')][_0x40d9('0x15e')]!='r')writeUserMessage(i18next['t'](_0x40d9('0x244')),0x2,_0x40d9('0x11e'));let _0x10e8a0=board['getOpponent']();if(board[_0x40d9('0x87')][_0x40d9('0x15e')]=='r'&&!me[_0x40d9('0x186')]){if(isBeforeUpgrade(me[_0x40d9('0x3c')])&&!_0x10e8a0[_0x40d9('0x186')]&&_0x10e8a0['rate']>me[_0x40d9('0x3c')]-0xc8)_sendAutoChat(_0x40d9('0x245'));else if(isBeforeDowngrade(me[_0x40d9('0x3c')])&!_0x10e8a0['provisional']&&_0x10e8a0[_0x40d9('0x3c')]<me[_0x40d9('0x3c')]+0xc8)_sendAutoChat(_0x40d9('0x246'));}client['privateChat'](board[_0x40d9('0x185')]()['name'],_0x40d9('0x247')+options['postgame_study_level']+','+options[_0x40d9('0x248')]);}function _handleMove(_0x27c237,_0x3ccbf9){board[_0x40d9('0x14b')](!![]);if(board[_0x40d9('0x83')]()){let _0x12831b=_0x27c237[_0x40d9('0x249')](0x0,0x1)=='+';board[_0x40d9('0x24a')](_0x12831b)[_0x40d9('0x24b')](_0x3ccbf9);if(_0x12831b&&board[_0x40d9('0x13a')]==0x0||!_0x12831b&&board[_0x40d9('0x13a')]==0x1){board['moves'][board[_0x40d9('0x18a')][_0x40d9('0x94')]-0x1]['setTime'](_0x3ccbf9,board);board[_0x40d9('0x24c')](board[_0x40d9('0x18a')][board[_0x40d9('0x18a')][_0x40d9('0x94')]-0x1]);}else{let _0x5b4cc6=new Movement(board['getFinalMove']());_0x5b4cc6['setFromCSA'](_0x27c237);_0x5b4cc6[_0x40d9('0x24d')](_0x3ccbf9,board);board['handleReceivedMove'](_0x5b4cc6);board['updateTurnHighlight']();}board[_0x40d9('0x24e')][_0x40d9('0x24f')]();}}function _handleGameEnd(_0x360bea,_0x44ab23=![]){board[_0x40d9('0x1a0')]();_checkLobbyButtonClick(!![]);let _0x28717d=_0x360bea[_0x40d9('0xd')]('\x0a')[0x0];board[_0x40d9('0x87')]['gameEndType']=_0x28717d;let _0x3495aa=_0x360bea['split']('\x0a')[0x1];clearInterval(_disconnectTimer);$(_0x40d9('0x250'))['remove']();board[_0x40d9('0x190')]=!![];let _0x324549=new Movement(board[_0x40d9('0x251')]());_0x324549[_0x40d9('0x252')](_0x28717d);board['endTime']=moment();if(_0x28717d!=_0x40d9('0x253')){board[_0x40d9('0x18a')][_0x40d9('0x17')](_0x324549);if(!kifuGrid[_0x40d9('0x43')](_0x40d9('0x192'))['data']()[_0x40d9('0x193')])board['addMoveToKifuGrid'](_0x324549);}if(_0x28717d==_0x40d9('0x254')&&board[_0x40d9('0x13f')]()&&!_0x44ab23)sp[_0x40d9('0x255')]();writeUserMessage(_0x324549[_0x40d9('0x256')](),0x2,_0x40d9('0x257'));switch(_0x3495aa){case _0x40d9('0x258'):board['setResult'](0x1-board[_0x40d9('0x13a')]);board[_0x40d9('0x151')]=0x2;writeUserMessage(EJ(_0x40d9('0x259'),'###\x20あなたの負けです\x20###'),0x2,_0x40d9('0x257'),!![]);sp[_0x40d9('0x25a')](![]);openResult(-0x1);break;case _0x40d9('0x25b'):board[_0x40d9('0x25c')](board[_0x40d9('0x13a')]);board[_0x40d9('0x151')]=0x1;writeUserMessage(EJ(_0x40d9('0x25d'),_0x40d9('0x25e')),0x2,'#DD0088',!![]);sp['gameEnd'](!![]);openResult(0x1);break;case _0x40d9('0x25f'):board['setResult'](-0x1);if(board[_0x40d9('0x13a')]==0x1)board[_0x40d9('0x151')]=0x1;else if(board[_0x40d9('0x13a')]==0x0)board[_0x40d9('0x151')]=0x2;writeUserMessage(EJ(_0x40d9('0x260'),_0x40d9('0x261')),0x2,_0x40d9('0x257'),!![]);sp[_0x40d9('0x25a')](!![]);if(board[_0x40d9('0x13f')]()&&!_0x44ab23)openResult(0x0);break;case _0x40d9('0x262'):board[_0x40d9('0x25c')](0x0);writeUserMessage(EJ(_0x40d9('0x263'),_0x40d9('0x264')),0x2,'#DD0088',!![]);sp[_0x40d9('0x25a')](!![]);break;case _0x40d9('0x265'):board[_0x40d9('0x25c')](0x1);writeUserMessage(EJ('###\x20Gote\x20(or\x20Uwate)\x20Wins\x20###\x0a',_0x40d9('0x266')),0x2,_0x40d9('0x257'),!![]);sp['gameEnd'](!![]);break;}if(board[_0x40d9('0x13f')]()&&board[_0x40d9('0x87')][_0x40d9('0x15e')][_0x40d9('0x11b')](/^hc/)){if(board[_0x40d9('0x13a')]==0x0)board['studyHostType']=0x1;else board[_0x40d9('0x151')]=0x2;}if(_0x44ab23)board[_0x40d9('0x151')]=0x1;else{if(board[_0x40d9('0x8d')]()){writeUserMessage(i18next['t']('msg.host'),0x2,_0x40d9('0x11e'),!![]);sendStudy();}else if(board[_0x40d9('0x18e')]())writeUserMessage(i18next['t'](_0x40d9('0x267')),0x2,'#008800',!![]);}if(board[_0x40d9('0x13f')]()){if(!_0x44ab23){_dialogOnBoardClose=!![];if(board[_0x40d9('0x87')][_0x40d9('0x15e')]=='r')client[_0x40d9('0x268')](0xa,config[_0x40d9('0x269')]);else client[_0x40d9('0x268')](0x5,config['mileagePass']);let _0x2978e3=board[_0x40d9('0x87')][_0x40d9('0x26a')]();if(_0x2978e3){writeUserMessage(EJ(_0x40d9('0x26b'),_0x40d9('0x26c'))+_0x2978e3[_0x40d9('0x26d')](),0x2,_0x40d9('0x188'));}if(me[_0x40d9('0x10e')])_countGuestGame();}}board['playerNameClassChange'](0x0,_0x40d9('0x26e'),![]);board[_0x40d9('0x26f')](0x1,_0x40d9('0x26e'),![]);setBoardConditions();board[_0x40d9('0x270')]();if(_greetState<=0x2)_greetState=_0x44ab23?0x4:0x3;}function _handleResult(_0x5bce57){let _0x4c2b85=_0x5bce57[_0x40d9('0xd')](',');loadResult(_0x4c2b85[0x0],_0x4c2b85[0x1],_0x4c2b85[0x2],_0x4c2b85[0x3]);me[_0x40d9('0x3c')]=parseInt(_0x4c2b85[0x1]);users[board['getOpponent']()[_0x40d9('0x28')]][_0x40d9('0x3c')]=parseInt(_0x4c2b85[0x3]);}function _handleMonitor(_0x169833){let _0x2da71b=null;let _0x3cbadd=_0x169833['split']('\x0a');let _0xebbf7e=[];let _0x5d465f=0x0;let _0x1b7569='';let _0x5e2e02='';let _0x293ad8=![];board[_0x40d9('0x14b')](!![]);_0x3cbadd['forEach'](function(_0x285f56){if(_0x285f56[_0x40d9('0x11b')](/^([-+][0-9]{4}[A-Z]{2}|%TORYO)$/)){_0xebbf7e[_0x40d9('0x17')](RegExp['$1']);}else if(_0x285f56[_0x40d9('0x11b')](/^T(\d+)$/)){_0xebbf7e[_0xebbf7e[_0x40d9('0x94')]-0x1]+=','+RegExp['$1'];}else if(_0x285f56=='MONITOR_RESET'){_0x293ad8=!![];}else if(_0x285f56[_0x40d9('0x11b')](/^kifu_id:(.+)$/)){_0x2da71b=RegExp['$1'];}else if(_0x285f56[_0x40d9('0x11b')](/^\$SINCE_LAST_MOVE:(\d+)$/)){_0x5d465f=parseInt(RegExp['$1']);}else if(_0x285f56[_0x40d9('0x11b')](/^To_Move:([\+\-])$/)){_0x1b7569+='P0'+RegExp['$1']+'\x0a';}else if(_0x285f56[_0x40d9('0x11b')](/^P[0-9+-].*/)){_0x1b7569+=_0x285f56+'\x0a';}else if(_0x285f56[_0x40d9('0x11b')](/^#(SENTE_WIN|GOTE_WIN|DRAW|RESIGN|TIME_UP|ILLEGAL_MOVE|SENNICHITE|OUTE_SENNICHITE|JISHOGI|DISCONNECT|SUSPEND|CATCH|TRY)/)){_0x5e2e02+=RegExp['$1']+'\x0a';}else if(_0x285f56[_0x40d9('0x11b')](/^NOT_FOUND$/)){board[_0x40d9('0xe3')]();return;}});if(_0x2da71b){if(_0x293ad8)forceKifuMode(0x1);board[_0x40d9('0x233')](_0x1b7569,0x2,_0xebbf7e,_0x5d465f);board[_0x40d9('0x234')](_0x2da71b);setBoardConditions();_switchLayer(0x2);if(!board[_0x40d9('0x87')][_0x40d9('0x172')]()){writeUserMessage(board[_0x40d9('0x87')][_0x40d9('0x15e')]=='r'?i18next['t'](_0x40d9('0x271')):i18next['t'](_0x40d9('0x272')),0x2,_0x40d9('0x11e'));}let _0x5244ae=board[_0x40d9('0x87')][_0x40d9('0x26a')]();if(_0x5244ae){writeUserMessage(EJ(_0x40d9('0x273'),'イベント対局:\x20「')+_0x5244ae[_0x40d9('0x28')]()+EJ('\x22\x20','」\x20')+_0x5244ae[_0x40d9('0x26d')](),0x2,_0x40d9('0x188'),!![]);}}else{_0xebbf7e['forEach'](function(_0x2c5d72){if(_0x2c5d72[_0x40d9('0x11b')](/^%TORYO/))return;let _0x4ded4b=new Movement(board['getFinalMove']());_0x4ded4b[_0x40d9('0x274')](_0x2c5d72[_0x40d9('0xd')](',')[0x0]);_0x4ded4b['setTime'](parseInt(_0x2c5d72[_0x40d9('0xd')](',')[0x1]),board);board['handleMonitorMove'](_0x4ded4b);});}if(_0x5e2e02!=''){_handleGameEnd(_0x5e2e02);if(_0x5d465f>0x0)board[_0x40d9('0x275')][_0x40d9('0x19a')](-0x1*_0x5d465f,_0x40d9('0x276'));}}function _handleReconnect(_0x242623){let _0x15f000=null;let _0x617f14=_0x242623['split']('\x0a');let _0x2562ee=[];let _0x379e1c=0x0;let _0x2ee429='';let _0x4954da='';_0x617f14[_0x40d9('0x11')](function(_0x547c61){if(_0x547c61[_0x40d9('0x11b')](/^([-+][0-9]{4}[A-Z]{2}|%TORYO)$/)){_0x2562ee[_0x40d9('0x17')](RegExp['$1']);}else if(_0x547c61[_0x40d9('0x11b')](/^T(\d+)$/)){_0x2562ee[_0x2562ee['length']-0x1]+=','+RegExp['$1'];}else if(_0x547c61[_0x40d9('0x11b')](/^kifu_id:(.+)$/)){_0x15f000=RegExp['$1'];}else if(_0x547c61[_0x40d9('0x11b')](/^\$SINCE_LAST_MOVE:(\d+)$/)){_0x379e1c=parseInt(RegExp['$1']);}else if(_0x547c61[_0x40d9('0x11b')](/^To_Move:([\+\-])$/)){_0x2ee429+='P0'+RegExp['$1']+'\x0a';}else if(_0x547c61[_0x40d9('0x11b')](/^P[0-9+-].*/)){_0x2ee429+=_0x547c61+'\x0a';}else if(_0x547c61['match'](/^#(SENTE_WIN|GOTE_WIN|DRAW|RESIGN|TIME_UP|ILLEGAL_MOVE|SENNICHITE|OUTE_SENNICHITE|JISHOGI|DISCONNECT|CATCH|TRY)/)){_0x4954da+=RegExp['$1']+'\x0a';}});board[_0x40d9('0x233')](_0x2ee429,board[_0x40d9('0x277')](me[_0x40d9('0x28')]),_0x2562ee,_0x379e1c);if(_0x15f000)board['setKifuId'](_0x15f000);setBoardConditions();_switchLayer(0x2);_greetState=0x2;if(_0x4954da!=''){client[_0x40d9('0x11c')]=0x0;_handleGameEnd(_0x4954da,!![]);}}function _handleEnter(_0x4ee03c){if(board[_0x40d9('0x277')](_0x4ee03c)!=null){clearInterval(_disconnectTimer);$('p#disconnectTimer')[_0x40d9('0x1cc')]();if(board['isPlaying']())board['reconnectTimer'](board[_0x40d9('0x277')](_0x4ee03c));writeUserMessage(_name2link(_0x4ee03c)+i18next['t'](_0x40d9('0x278')),0x2,board[_0x40d9('0x277')](_0x4ee03c)==0x0?_0x40d9('0x279'):'#666666',!![]);board['playerNameClassChange'](board['getPlayerRoleFromName'](_0x4ee03c),_0x40d9('0x27a'),![]);sp[_0x40d9('0x27b')](!![]);if(board[_0x40d9('0x8d')]())client[_0x40d9('0x85')](_0x40d9('0x152')+_0x4ee03c);}else{let _0x1a85a8=![];if(watcherGrid[_0x40d9('0xc5')]()[_0x40d9('0x191')]()<0xf||_0x1a85a8){writeUserMessage(_name2link(_0x4ee03c)+i18next['t'](_0x40d9('0x278')),0x2,_0x40d9('0x11e'),_0x1a85a8);}if(users[_0x4ee03c]){watcherGrid['row'][_0x40d9('0x19a')](users[_0x4ee03c]['gridObject']());drawGridMaintainScroll(watcherGrid);}}if(board[_0x40d9('0x8d')]())client['privateChat'](_0x4ee03c,_0x40d9('0x27c')+_generateStudyText(kifuGrid[_0x40d9('0x43')]({'selected':!![]})[_0x40d9('0x5a')]()[_0x40d9('0x27d')]));if(board[_0x40d9('0x83')]()){if(board[_0x40d9('0x87')][_0x40d9('0x15e')]!='r'&&!_allowWatcherChat)client[_0x40d9('0x1c0')](_0x4ee03c,_0x40d9('0x27e'));}}function _handleLeave(_0x50b73e){if(!board[_0x40d9('0x87')])return;if(board[_0x40d9('0x277')](_0x50b73e)!=null){writeUserMessage(_0x50b73e+i18next['t'](_0x40d9('0x27f')),0x2,board['getPlayerRoleFromName'](_0x50b73e)==0x0?_0x40d9('0x279'):_0x40d9('0x280'),!![]);board[_0x40d9('0x26f')](board[_0x40d9('0x277')](_0x50b73e),'name-left',!![]);sp[_0x40d9('0x27b')](![]);}else{let _0x28fef6=![];if(watcherGrid['rows']()['count']()<0xa||_0x28fef6){writeUserMessage(_0x50b73e+i18next['t']('code.G031'),0x2,_0x40d9('0x11e'),_0x28fef6);}watcherGrid[_0x40d9('0x43')]('#'+_0x50b73e)['remove']();drawGridMaintainScroll(watcherGrid);}}function _handleDisconnect(_0x274c9e){if(!board[_0x40d9('0x87')])return;if(board[_0x40d9('0x277')](_0x274c9e)!=null){writeUserMessage(_0x274c9e+EJ('\x20disconnected.',_0x40d9('0x281')),0x2,board[_0x40d9('0x277')](_0x274c9e)==0x0?_0x40d9('0x279'):_0x40d9('0x280'),!![]);board['playerNameClassChange'](board[_0x40d9('0x277')](_0x274c9e),_0x40d9('0x27a'),!![]);sp[_0x40d9('0x27b')](![]);if(board['isPlaying']()&&_0x274c9e!=me[_0x40d9('0x28')]){board[_0x40d9('0x282')](board[_0x40d9('0x277')](_0x274c9e));writeUserMessage(i18next['t']('msg.opponent_disconnect'),0x2,_0x40d9('0x119'));_startDisconnectTimer();}}}function _startDisconnectTimer(){_opponentDisconnectCount+=0x1;$(_0x40d9('0x250'))[_0x40d9('0x1cc')]();let _0x450186=$('<p></p>',{'id':'disconnectTimer'});$(_0x40d9('0x123'))[_0x40d9('0xd7')](_0x450186);_0x450186[_0x40d9('0xcd')](i18next['t'](_0x40d9('0x283'))+_0x40d9('0x284')+i18next['t'](_0x40d9('0x285')));let _0x2e82bf=0x0;let _0x2fea59=_opponentDisconnectCount>0x1?0x1:0x3c;_disconnectTimer=setInterval(function(){_0x2e82bf++;$('span#disconnectCount')[_0x40d9('0x8')](_0x2e82bf);if(_0x2e82bf==_0x2fea59){$('<input\x20id=\x22disconnectDeclareButton\x22\x20type=\x22button\x22\x20value=\x22'+i18next['t'](_0x40d9('0x286'))+_0x40d9('0x287'))[_0x40d9('0x12d')](_0x450186);$(_0x40d9('0x288'))['click'](function(){_handleDisconnectDeclare();});}else if(_0x2e82bf>=0x12c){_handleDisconnectDeclare();}},0x3e8);}function _handleDisconnectDeclare(){clearInterval(_disconnectTimer);client[_0x40d9('0x286')]();$('p#disconnectTimer')[_0x40d9('0x1cc')]();}function _handleStart(_0x1aeb32){let _0x5d2a68=_0x1aeb32[_0x40d9('0xd')]('+');let _0x57b922=_0x5d2a68[0x1][_0x40d9('0x11b')](/^([0-9a-z]+?)_(.*)-([0-9]*)-([0-9]*)$/);let _0x32848e;let _0x3c45ac;if(_0x5d2a68[0x0]==_0x40d9('0x289')){let _0x3c45ac=_0x57b922[0x2][_0x40d9('0xd')]('.')[0x0]+EJ(_0x40d9('0x28a'),_0x40d9('0x28b'));_0x3c45ac+=_game2link(EJ(_0x40d9('0x28c'),'検討室'),_0x1aeb32);_0x3c45ac+=EJ('].',_0x40d9('0x28d'));writeUserMessage(_0x3c45ac,0x1,_0x40d9('0x11e'));sp[_0x40d9('0x28e')]();let _0x562f67=new User(_0x5d2a68[0x2]);_0x562f67[_0x40d9('0x21d')](!![]);var _0x3d4632=new User(_0x5d2a68[0x3]);_0x3d4632[_0x40d9('0x21d')](![]);_0x32848e=new Game(0x0,_0x1aeb32,_0x562f67,_0x3d4632);if(_0x32848e[_0x40d9('0x28f')]()){board[_0x40d9('0x151')]=0x2;_enterGame(_0x32848e);}}else{_0x3c45ac='['+_game2link(EJ(_0x40d9('0x290'),_0x40d9('0x291')),_0x1aeb32)+']\x20';_0x3c45ac+='☗'+_0x5d2a68[0x2]+EJ(_0x40d9('0x292'),_0x40d9('0x293'))+'☖'+_0x5d2a68[0x3]+'\x20/\x20'+EJ(HANDICAPS_EN[_0x57b922[0x1]],HANDICAPS_JA[_0x57b922[0x1]]);writeUserMessage(_0x3c45ac,0x1,_0x40d9('0x11e'));if(users[_0x5d2a68[0x2]]){users[_0x5d2a68[0x2]][_0x40d9('0x294')](_0x5d2a68[0x1],'+');playerGrid[_0x40d9('0x43')]('#'+_0x5d2a68[0x2])['remove']();playerGrid[_0x40d9('0x43')][_0x40d9('0x19a')](users[_0x5d2a68[0x2]]['gridObject']());waiterGrid['row']('#'+_0x5d2a68[0x2])[_0x40d9('0x1cc')]();}if(users[_0x5d2a68[0x3]]){users[_0x5d2a68[0x3]][_0x40d9('0x294')](_0x5d2a68[0x1],'-');playerGrid['row']('#'+_0x5d2a68[0x3])['remove']();playerGrid['row']['add'](users[_0x5d2a68[0x3]][_0x40d9('0x19c')]());waiterGrid['row']('#'+_0x5d2a68[0x3])['remove']();}drawGridMaintainScroll(playerGrid);drawGridMaintainScroll(waiterGrid);_0x32848e=new Game(0x0,_0x1aeb32,users[_0x5d2a68[0x2]],users[_0x5d2a68[0x3]]);}gameGrid[_0x40d9('0x43')][_0x40d9('0x19a')](_0x32848e);drawGridMaintainScroll(gameGrid);}function _handleChat(_0x5aa2f5,_0x2d479d){if(_0x2d479d[_0x40d9('0x11b')](/^\[##INFONEW\]/)){return;}else if(_0x2d479d[_0x40d9('0x11b')](/^\[##BROADCAST\](.+)$/)){return;}else if(_0x2d479d[_0x40d9('0x11b')](/^\[##WINS\](\d+)$/)){writeUserMessage(_name2link(_0x5aa2f5)+EJ(_0x40d9('0x295'),_0x40d9('0x296'))+parseInt(RegExp['$1'])+EJ(_0x40d9('0x297'),_0x40d9('0x298')),0x1,_0x40d9('0x11e'),!![]);}else if(_0x2d479d[_0x40d9('0x11b')](/^\[##EXP\](.+),(\d+)$/)){let _0x1a2fa0=RegExp['$1']=='nr'?EJ(_0x40d9('0x299'),'10秒将棋'):getHandicapShort(RegExp['$1']);writeUserMessage(_name2link(_0x5aa2f5)+EJ(_0x40d9('0x29a')+makeRank34FromExp(parseInt(RegExp['$2']))+_0x40d9('0x29b')+_0x1a2fa0+'!',_0x40d9('0x29c')+_0x1a2fa0+'で\x20'+makeRank34FromExp(parseInt(RegExp['$2']))+_0x40d9('0x29d')),0x1,_0x40d9('0x11e'),!![]);}else if(_0x2d479d[_0x40d9('0x11b')](/^\[##.+\]/)){return;}else if(_isFavorite(_0x5aa2f5)){writeUserMessage('['+_name2link(_0x5aa2f5)+']\x20'+_0x2d479d,0x1,_0x40d9('0x29e'));}else if(_isColleague(_0x5aa2f5)){writeUserMessage('['+_name2link(_0x5aa2f5)+']\x20'+_0x2d479d,0x1,_0x40d9('0x29f'));}else if(_0x2d479d[_0x40d9('0x11b')](/\[auto\-chat\]/)){writeUserMessage('['+_name2link(_0x5aa2f5)+']\x20'+_0x2d479d,0x1,_0x40d9('0x2a0'));}else if(_0x5aa2f5==me[_0x40d9('0x28')]){writeUserMessage('['+_name2link(_0x5aa2f5)+']\x20'+_0x2d479d,0x1,_0x40d9('0x2a1'));}else{writeUserMessage('['+_name2link(_0x5aa2f5)+']\x20'+_0x2d479d,0x1,_0x40d9('0x279'));}if(currentLayer==0x1)sp[_0x40d9('0x28e')]();}function _handleGameChat(_0x4c9f27,_0x2b4b9f){if(!board[_0x40d9('0x87')])return;if(board[_0x40d9('0x83')]()&&_0x2b4b9f[_0x40d9('0x11b')](/^\[comment\]/))return;if(_0x2b4b9f[_0x40d9('0x11b')](/\[\#\#HOVER\](\d+),(\d+)$/)){}else if(_0x2b4b9f[_0x40d9('0x11b')](/\[##GRAB\](\d+),(\d+)$/)){if(_0x4c9f27!=me[_0x40d9('0x28')]&&board[_0x40d9('0x14a')])board[_0x40d9('0x2a2')](RegExp['$1'],RegExp['$2']);}else if(_0x2b4b9f[_0x40d9('0x11b')](/\[##TYPE\]$/)){if(_0x4c9f27!=me[_0x40d9('0x28')]){_runTypingIndicator(_0x4c9f27);}}else if(_0x2b4b9f[_0x40d9('0x11b')](/\[\#\#STUDY\](\d+)\/(.+)$/)){let _0x430719=_updateStudyState(_0x4c9f27,parseInt(RegExp['$1']),RegExp['$2']);if(hostPlayerName==null)_updateHostPlayer(_0x4c9f27);board[_0x40d9('0x14b')](!![]);if(board[_0x40d9('0x8d')]()&&_0x4c9f27==me[_0x40d9('0x28')])return;if(!(board[_0x40d9('0x190')]&&board[_0x40d9('0x14a')]))return;if(_0x4c9f27!=me['name'])_handleStudy(_0x430719);}else if(_0x2b4b9f[_0x40d9('0x11b')](/^\[##ARROW\]CLEAR$/)){if(_0x4c9f27!=me[_0x40d9('0x28')])board[_0x40d9('0x14b')](!![],_0x4c9f27);}else if(_0x2b4b9f[_0x40d9('0x11b')](/^\[##ARROW\](.+),(.+),(.+),(.+),(.+),(.+)$/)){if(!options['accept_arrow']==0x1||_0x4c9f27==me[_0x40d9('0x28')])return;if(board[_0x40d9('0x83')]())return;if(_0x4c9f27==me[_0x40d9('0x28')])_0x4c9f27='';board[_0x40d9('0x2a3')](parseInt(RegExp['$1']),Number(RegExp['$2']),Number(RegExp['$3']),Number(RegExp['$4']),Number(RegExp['$5']),parseInt(RegExp['$6'],0x10),!![],_0x4c9f27);}else if(_0x2b4b9f[_0x40d9('0x11b')](/^\[##M_(IN|OUT)\](\d+),(\d+)$/)){let _0x1c5558=RegExp['$1']==_0x40d9('0x2a4');let _0x477fcb=board[_0x40d9('0x277')](_0x4c9f27);if(_0x477fcb!=null)board[_0x40d9('0x26f')](_0x477fcb,_0x40d9('0x26e'),_0x1c5558);}else if(_0x2b4b9f['match'](/^\[##GIVEHOST\](.+)$/)){let _0x2b41d3=RegExp['$1'];if(_0x2b41d3==me[_0x40d9('0x28')]){sendStudy();board[_0x40d9('0x151')]=0x2;$(_0x40d9('0x1ac'))[_0x40d9('0x7b')]('checked',!![]);_kifuModeRadioChange();setBoardConditions();writeUserMessage(i18next['t'](_0x40d9('0x2a5')),0x2,_0x40d9('0x11e'),!![]);}else{writeUserMessage(EJ(_0x40d9('0x2a6')+_0x2b41d3,_0x40d9('0x2a7')+_0x2b41d3+_0x40d9('0x2a8')),0x2,_0x40d9('0x11e'));}_updateHostPlayer(_0x2b41d3);}else if(_0x2b4b9f['match'](/^\[##SUBHOST_ON\](.+)$/)){if(RegExp['$1']==me[_0x40d9('0x28')]){writeUserMessage(i18next['t']('msg.subhost_given'),0x2,_0x40d9('0x11e'),!![]);board[_0x40d9('0x151')]=0x1;setBoardConditions();}else{writeUserMessage(EJ(_0x40d9('0x2a9')+_name2link(RegExp['$1']),_name2link(RegExp['$1'])+_0x40d9('0x2aa')),0x2,_0x40d9('0x11e'));}}else if(_0x2b4b9f['match'](/^\[##TEMPLATE\]([A-Z]\d{3})/)){_handleGameChat(_0x4c9f27,EJ(_0x40d9('0x2ab'),_0x40d9('0x2ac'))+i18next['t'](_0x40d9('0x130')+RegExp['$1']));}else if(_0x2b4b9f['match'](/^\[##REMATCH\]$/)){board['rematch'](board[_0x40d9('0x277')](_0x4c9f27));_interpretCommunicationCode(_0x4c9f27,_0x40d9('0x2ad'),0x2,!![],!![]);if(board['rematchAgreed']()){writeUserMessage(i18next['t']('msg.rematch_agreed'),0x2,_0x40d9('0x11e'),!![]);if(board[_0x40d9('0x13f')]()){client[_0x40d9('0x182')]();client['rematch'](board['game'],board[_0x40d9('0x13a')]);}else{$(_0x40d9('0x2ae'))[_0x40d9('0x136')](_0x40d9('0x68'));}}}else if(_0x2b4b9f['match'](/^\[##.+\]/)){}else if(_0x2b4b9f[_0x40d9('0x11b')](/^\[auto\-chat\]\s#([A-Z]\d{3})$/)){_interpretCommunicationCode(_0x4c9f27,RegExp['$1'],0x2,![],!![]);}else{if(_0x4c9f27==board[_0x40d9('0x87')][_0x40d9('0x14f')][_0x40d9('0x28')]){_stopTypingIndicator(0x0);writeUserMessage('['+_name2link(_0x4c9f27)+']\x20'+_0x2b4b9f,0x2,_0x40d9('0x279'));}else if(_0x4c9f27==board['game'][_0x40d9('0x14d')][_0x40d9('0x28')]){_stopTypingIndicator(0x1);writeUserMessage('['+_name2link(_0x4c9f27)+']\x20'+_0x2b4b9f,0x2,_0x40d9('0x280'));}else if(_0x4c9f27==me[_0x40d9('0x28')]){writeUserMessage('['+_name2link(_0x4c9f27)+']\x20'+_0x2b4b9f,0x2,_0x40d9('0x2a1'));}else if(board['isPlaying']()&&!_allowWatcherChat){return;}else{writeUserMessage('['+_name2link(_0x4c9f27)+']\x20'+_0x2b4b9f,0x2,_0x40d9('0x2af'));}sp[_0x40d9('0x2b0')]();}}function _handlePrivateChat(_0x3fc5e1,_0x36cb56){if(_0x36cb56[_0x40d9('0x11b')](/^\[\#\#STUDY\](\d+)\/(.+)$/)){_updateStudyState(_0x3fc5e1,parseInt(RegExp['$1']),RegExp['$2']);if(!(board[_0x40d9('0x190')]&&board[_0x40d9('0x14a')]))return;if(_0x3fc5e1!=me['name'])_handleStudy();_updateHostPlayer(_0x3fc5e1);return;}else if(_0x36cb56[_0x40d9('0x11b')](/^\[\#\#FITNESS\](\d),(\d)$/)){let _0x182b63=EJ(_0x40d9('0x2b1'),_0x40d9('0x2b2'))+i18next['t']('option.study_level')+':\x20'+_fitnessLevelText(RegExp['$1']);if(!board[_0x40d9('0x87')]['black'][_0x40d9('0x2b3')]()||!board[_0x40d9('0x87')][_0x40d9('0x14d')][_0x40d9('0x2b3')]())_0x182b63+=_0x40d9('0x2b4')+i18next['t'](_0x40d9('0x2b5'))+':\x20'+_fitnessLevelText(RegExp['$2']);writeUserMessage(_0x182b63,0x2,_0x40d9('0x2b6'));return;}else if(_0x36cb56['match'](/^\[\#\#INVITE\](\d+),(\d+),(.+)$/)){_handleInvitation(_0x3fc5e1);return;}else if(_0x36cb56['match'](/^\[\#\#REJECT\]/)){if(_0x36cb56[_0x40d9('0x11b')](/^\[\#\#REJECT\]([A-Z]\d{3})/))_interpretCommunicationCode(_0x3fc5e1,RegExp['$1'],0x1,!![],![]);else writeUserMessage(_0x3fc5e1+EJ(_0x40d9('0x2b7'),_0x40d9('0x2b8')),0x1,_0x40d9('0x11e'),!![]);return;}else if(_0x36cb56[_0x40d9('0x11b')](/^\[auto\-PM\]/)){if(_0x36cb56['match'](/^\[auto\-PM\]\s#([A-Z]\d{3})/))_interpretCommunicationCode(_0x3fc5e1,RegExp['$1'],0x2,![],!![]);return;}if(me[_0x40d9('0x10e')])return;let _0x364e47=$(_0x40d9('0x2b9')+_0x3fc5e1);if(!_0x364e47[0x0]&&users[_0x3fc5e1])_0x364e47=_openPlayerInfo(users[_0x3fc5e1],![]);let _0x5e7355=_0x364e47[_0x40d9('0x67')]('#privateMessageArea');$(_0x40d9('0x12b'),{})[_0x40d9('0xa6')](_0x40d9('0x1d5'),_0x40d9('0x2ba'))[_0x40d9('0x8')](_0x36cb56)[_0x40d9('0x12d')](_0x5e7355);_0x5e7355[_0x40d9('0xd7')](_0x40d9('0x1d7'));_0x5e7355[_0x40d9('0xbe')]({'scrollTop':_0x5e7355[0x0][_0x40d9('0x12f')]},_0x40d9('0x6c'));_playerPMClick(_0x364e47,!![]);if(!_0x364e47[_0x40d9('0xda')]('isOpen')&&!board[_0x40d9('0x83')]()){writeUserMessage(_0x40d9('0x2bb')+_name2link(_0x3fc5e1)+']\x20'+_0x36cb56[_0x40d9('0x126')](/^\[\#\#URGENT\]/,''),0x1,_0x40d9('0x82'));if(currentLayer==0x2)writeUserMessage(_0x40d9('0x2bb')+_name2link(_0x3fc5e1)+']\x20'+_0x36cb56[_0x40d9('0x126')](/^\[\#\#URGENT\]/,''),0x2,_0x40d9('0x82'));}if(!board[_0x40d9('0x83')]())sp['chatPrivate']();}function _handleInvitation(_0xf58bee){let _0x5a1424=users[_0xf58bee];if(!_0x5a1424){client[_0x40d9('0x1c0')](_0xf58bee,_0x40d9('0x2bc'));return;}if(board[_0x40d9('0x13f')]()){client[_0x40d9('0x1c0')](_0xf58bee,_0x40d9('0x2bd'));return;}if($(_0x40d9('0x2be'))['dialog'](_0x40d9('0x2bf'))||_challengeUser){client[_0x40d9('0x1c0')](_0xf58bee,'[##REJECT]C012');return;}if(_0x5a1424[_0x40d9('0x1e6')]()){sp[_0x40d9('0x22f')](_0x40d9('0x2c0'));$(_0x40d9('0x2be'))['dialog'](_0x40d9('0x110'));_initModalInvitation(_0x5a1424);}}function _handleMile(_0x4914b4){if(me[_0x40d9('0x10e')])return;_0x4914b4=parseInt(_0x4914b4);if(_0x4914b4==-0x1)return;let _0x3fa64b=_0x4914b4-mileage;if(_0x3fa64b>0x0)writeUserMessage(EJ(_0x40d9('0x2c1')+_0x3fa64b+_0x40d9('0x2c2')+(_0x3fa64b==0x1?'!':'s!'),_0x3fa64b+_0x40d9('0x2c3')),0x1,_0x40d9('0x188'));else if(_0x3fa64b<0x0)writeUserMessage(EJ('You\x27ve\x20used\x20'+-_0x3fa64b+'\x20D-Mile'+(_0x3fa64b==-0x1?'':'s'),-_0x3fa64b+_0x40d9('0x2c4')),0x1,_0x40d9('0x188'));mileage=_0x4914b4;_updateLobbyHeader();}function _handleWins(_0x12c5dc){if(parseInt(_0x12c5dc)%0x64==0x0)client['chat'](_0x40d9('0x2c5')+_0x12c5dc);}function _handleExp(_0x446580){let _0x167f2d=parseInt(_0x446580[_0x40d9('0xd')](',')[0x0]);let _0x269ed8=parseInt(_0x446580[_0x40d9('0xd')](',')[0x1]);let _0xe7b2e6=makeRank34FromExp(_0x269ed8);if(_0xe7b2e6!=makeRank34FromExp(_0x269ed8-_0x167f2d)){client[_0x40d9('0x95')](_0x40d9('0x2c6')+board[_0x40d9('0x87')][_0x40d9('0x15e')]+','+_0x269ed8);writeUserMessage(EJ(_0x40d9('0x2c7'),_0x40d9('0x2c8')),0x2,_0x40d9('0x257'),!![]);}writeUserMessage(EJ(_0x40d9('0x2c9')+_0x167f2d+_0x40d9('0x2ca')+_0x269ed8+_0x40d9('0x2cb')+_0xe7b2e6+_0x40d9('0x2cc'),_0x167f2d+_0x40d9('0x2cd')+_0x269ed8+'EXP)\x20現在「'+_0xe7b2e6+'」レベルです'),0x2,'#DD0088');}function _handleClosed(){_stopAllTimeouts();$(_0x40d9('0x202'))[_0x40d9('0x8')](i18next['t'](_0x40d9('0x2ce')));$(_0x40d9('0x2cf'))[_0x40d9('0x1cc')]();if(currentLayer!=0x0)showAlertDialog('disconnect',_backToEntrance);}function _backToEntrance(){$(_0x40d9('0xc0'))[_0x40d9('0x7b')]('disabled',!![]);$('input#reloginButton')[_0x40d9('0xa6')](_0x40d9('0x105'),_0x40d9('0xad'));_switchLayer(0x0);_clearAllParams();}function _clearAllParams(){users=new Object();tournaments=new Object();playerGrid[_0x40d9('0x40')]()[_0x40d9('0xc2')]();waiterGrid[_0x40d9('0x40')]()[_0x40d9('0xc2')]();gameGrid['clear']()[_0x40d9('0xc2')]();board[_0x40d9('0xe3')]();_checkLobbyButtonClick(!![]);$('#lobbyMessageArea')[_0x40d9('0x142')]();_loadDefaultOptions();}function _updateStudyState(_0x150a77,_0x51ebd6,_0x1339ca='*'){let _0x30e1aa=![];_studyBase=_0x51ebd6;_studySender=_0x150a77;if(_0x1339ca=='*'){_studyBranchMoves=null;}else{let _0x3b6e2e=_0x1339ca['split']('/');if(_studyBranchMoves==null){writeUserMessage(_0x150a77+':\x20'+EJ(_0x40d9('0x2d0')+_0x51ebd6,_0x51ebd6+'手目からの分岐手順を検討'),0x2,'#008800');if(_0x3b6e2e[_0x40d9('0x94')]==0x1)_0x30e1aa=!![];}else{if(_0x3b6e2e['length']==_studyBranchMoves[_0x40d9('0x94')]+0x1)_0x30e1aa=!![];}_studyBranchMoves=_0x1339ca[_0x40d9('0xd')]('/');}return _0x30e1aa;}function _handleStudy(_0x1772cf=![]){_sendStudyBuffer=null;if(_studyBase==null)return;if(_studyBranchMoves==null){if(kifuGrid[_0x40d9('0x43')](':last')[_0x40d9('0x5a')]()['branch'])_restorePublicKifu();kifuGrid[_0x40d9('0xc5')]()[_0x40d9('0x112')]();kifuGrid[_0x40d9('0x43')](_studyBase)['select']();scrollGridToSelected(kifuGrid);board[_0x40d9('0x194')](kifuGrid[_0x40d9('0xc5')](Array['from'](Array(_studyBase+0x1)[_0x40d9('0xd6')]()))[_0x40d9('0x5a')]());}else{kifuGrid['clear']();kifuGrid[_0x40d9('0xc5')][_0x40d9('0x19a')](board[_0x40d9('0x18a')][_0x40d9('0x2d1')](0x0,_studyBase+0x1));board[_0x40d9('0x194')](kifuGrid[_0x40d9('0xc5')](Array['from'](Array(_studyBase+0x1)[_0x40d9('0xd6')]()))[_0x40d9('0x5a')]());let _0x43d9e5=board[_0x40d9('0x18a')][_studyBase];_studyBranchMoves[_0x40d9('0x11')](function(_0x2897db,_0x4ff97a){let _0x375f5c=new Movement(_0x43d9e5);_0x375f5c[_0x40d9('0x274')](_0x2897db);_0x375f5c[_0x40d9('0x193')]=!![];_0x43d9e5=board[_0x40d9('0x2d2')](_0x375f5c,_0x1772cf&&_0x4ff97a==_studyBranchMoves[_0x40d9('0x94')]-0x1);kifuGrid[_0x40d9('0xc5')]['add']([_0x43d9e5]);});board[_0x40d9('0x2d3')]();if(_0x1772cf)board[_0x40d9('0x2d4')](_0x43d9e5[_0x40d9('0x2d5')],_0x43d9e5[_0x40d9('0x2d6')],_studySender,0xcc00);kifuGrid['draw']();kifuGrid[_0x40d9('0x43')](_0x40d9('0x192'))[_0x40d9('0x80')]();scrollGridToSelected(kifuGrid);}}function _generateStudyText(_0x1a0ee6){let _0xd6a523='';for(let _0x5b139c=0x0;_0x5b139c<=_0x1a0ee6;_0x5b139c++){let _0x2df04a=kifuGrid['row'](_0x5b139c)[_0x40d9('0x5a')]();if(!_0x2df04a[_0x40d9('0x193')]){_0xd6a523=_0x2df04a['num'][_0x40d9('0x1de')]();}else{_0xd6a523+='/'+_0x2df04a[_0x40d9('0x2d7')]();}}if(!_0xd6a523[_0x40d9('0x11b')](/\//))_0xd6a523+='/*';return _0xd6a523;}function sendStudy(_0x42e173=kifuGrid['row']({'selected':!![]})[_0x40d9('0x5a')]()[_0x40d9('0x27d')]){_sendStudyBuffer=_generateStudyText(_0x42e173);if(timeouts[_0x40d9('0x2d8')])return;_sendStudyExecute();}function _sendStudyExecute(){if(_sendStudyBuffer==null)return;client[_0x40d9('0x85')](_0x40d9('0x27c')+_sendStudyBuffer);_sendStudyBuffer=null;setGeneralTimeout(_0x40d9('0x2d8'),0x2bc);}function _sendAutoChat(_0x8eb6b7){if(board[_0x40d9('0x87')]){client[_0x40d9('0x85')](_0x40d9('0x2d9')+_0x8eb6b7);}else{client[_0x40d9('0x95')](_0x40d9('0x2d9')+_0x8eb6b7);}}function _runTypingIndicator(_0x100081){let _0x252581=board[_0x40d9('0x277')](_0x100081);if(_0x252581==null)return;let _0x13f9f6=_0x40d9('0x2da')+_0x252581;let _0x2dc707=$('#'+_0x13f9f6);if(!_0x2dc707[_0x40d9('0x94')]){_0x2dc707=$(_0x40d9('0x2db'),{'id':_0x13f9f6,'class':_0x40d9('0x2dc')});let _0x2ed53d=$(_0x40d9('0x123'));_0x2ed53d['append'](_0x2dc707);_0x2dc707[_0x40d9('0x8')]('['+_0x100081+']\x20'+i18next['t'](_0x40d9('0x2dd')));_0x2ed53d[_0x40d9('0xbe')]({'scrollTop':_0x2ed53d[0x0]['scrollHeight']},'fast');}setGeneralTimeout(_0x40d9('0x2de')+_0x252581,0x1388,!![]);}function _stopTypingIndicator(_0x676e6c,_0x420508=![]){if(_0x420508){$('#typingIndicator-'+_0x676e6c)[_0x40d9('0x2df')](_0x40d9('0x6c'),function(){$(_0x40d9('0x2e0')+_0x676e6c)[_0x40d9('0x1cc')]();});}else{$(_0x40d9('0x2e0')+_0x676e6c)[_0x40d9('0x1cc')]();}clearGeneralTimeout(_0x40d9('0x2de')+_0x676e6c);}function _handleServers(_0x2c1ae9){_0x2c1ae9[0x0]['population']=restoreIdleConnections(_0x2c1ae9[0x0]['population']);serverGrid['rows'][_0x40d9('0x19a')](_0x2c1ae9);serverGrid['draw']();serverGrid[_0x40d9('0x43')](0x0)[_0x40d9('0x80')]();$('input[name=loginType],\x20input#usernameInput,\x20input#passwordInput,\x20input#loginSave,\x20input#loginButton')[_0x40d9('0x7b')](_0x40d9('0xc1'),![]);_loginTypeChange();if(testMode)_testFunction(0x1);}function _handleOptions(_0x15c64d){options=Object[_0x40d9('0x2e1')](options,_0x15c64d);_enforceOptions();_loadOptionsToDialog();}function _handleTournaments(_0x118f6f){tournaments=new Object();_0x118f6f['forEach'](function(_0x25fb80){tournaments[_0x25fb80['id']]=new Tournament(_0x25fb80);});$('#newGameTournamentSelect')['empty']();Object['keys'](tournaments)[_0x40d9('0x11')](function(_0x3d0868){if(tournaments[_0x3d0868][_0x40d9('0x2e2')]())$(_0x40d9('0x2e3'))['append']($(_0x40d9('0x2e4'))[_0x40d9('0x6f')](_0x3d0868)[_0x40d9('0x8')](tournaments[_0x3d0868][_0x40d9('0x28')]()));});}function _handleCheckOpponent(_0x14306f,_0x8c437a){if(_0x14306f[_0x40d9('0x2e5')]==null)return;let _0x324a0e=$('[id=check-game-'+_0x8c437a+']')['css']('display','block');if(_0x14306f[_0x40d9('0x2e5')]){_0x324a0e[_0x40d9('0x8')](i18next['t'](_0x40d9('0x2e6')));}else{_0x324a0e[_0x40d9('0x8')](i18next['t']('challenger.tournament_played'));}}function _handleEvaluation(_0x1a11f9){let _0x44e49=$(_0x40d9('0x2e7')+_0x1a11f9[_0x40d9('0x28')]+']');let _0x4e60c7=Math[_0x40d9('0x2e8')](_0x1a11f9[_0x40d9('0x2e9')]-_0x1a11f9[_0x40d9('0x2ea')],0x0);if(_0x44e49[_0x40d9('0x94')])_0x44e49[_0x40d9('0x8')](_0x4e60c7);}function _handlePlayerDetail(_0x58e12b,_0x14f266){let _0x5ac868=$(_0x40d9('0x1c2')+_0x14f266);if(_0x5ac868[0x0]){let _0x48d6dd=0x0;if(_0x58e12b[_0x40d9('0x2eb')]+_0x58e12b[_0x40d9('0x2ec')]>0x0)_0x48d6dd=0x64*_0x58e12b[_0x40d9('0x2eb')]/(_0x58e12b[_0x40d9('0x2eb')]+_0x58e12b[_0x40d9('0x2ec')]);_0x5ac868[_0x40d9('0x67')](_0x40d9('0x2ed'))[_0x40d9('0xcd')](playingStyleName(_0x58e12b[_0x40d9('0x2ee')]));_0x5ac868[_0x40d9('0x67')]('p#p4')[_0x40d9('0xcd')](_0x58e12b['wins']+'\x20'+i18next['t'](_0x40d9('0x2ef'))+'\x20'+_0x58e12b[_0x40d9('0x2ec')]+'\x20'+i18next['t']('player_info.loss')+'\x20('+_0x48d6dd[_0x40d9('0x2f0')](0x1)+'%)');_0x5ac868[_0x40d9('0x67')](_0x40d9('0x2f1'))[_0x40d9('0xcd')](i18next['t']('player_info.streak')+':\x20'+_0x58e12b[_0x40d9('0x2f2')]+'\x20('+i18next['t'](_0x40d9('0x2f3'))+':\x20'+Math[_0x40d9('0x2e8')](0x0,_0x58e12b[_0x40d9('0x2f4')])+')');}}function _switchLayer(_0x17f13c){$(_0x40d9('0x2f5'))['css']({'z-index':_0x17f13c==0x0?0x2:0x1,'opacity':_0x17f13c==0x0?0x1:0x0});$(_0x40d9('0x2f6'))[_0x40d9('0xa6')]({'z-index':_0x17f13c==0x1?0x2:0x1,'opacity':_0x17f13c==0x1||_0x17f13c==0x2?0x1:0x0});$(_0x40d9('0x2f7'))[_0x40d9('0xa6')]({'z-index':_0x17f13c==0x2?0x2:0x1,'opacity':_0x17f13c==0x2?0x1:0x0});currentLayer=_0x17f13c;}function setGeneralTimeout(_0x39ab7e,_0x640a8b,_0x4390a5=![]){if(timeouts[_0x39ab7e]){if(_0x4390a5)clearGeneralTimeout(_0x39ab7e);else return;}timeouts[_0x39ab7e]=setTimeout(_handleGeneralTimeout,_0x640a8b,_0x39ab7e);}function clearGeneralTimeout(_0x1d916c){if(timeouts[_0x1d916c]){clearTimeout(timeouts[_0x1d916c]);timeouts[_0x1d916c]=![];}}function _enforceOptions(){sp[_0x40d9('0x2f8')](options[_0x40d9('0x2f9')]);sp[_0x40d9('0x2fa')]=options[_0x40d9('0x2fb')]==0x1;sp['chatLobbyEnabled']=options[_0x40d9('0x2fc')]==0x1;sp['chatBoardEnabled']=options[_0x40d9('0x2fb')]==0x1;sp['buttonEnabled']=options['button_sound_play']==0x1;board[_0x40d9('0x2fd')](options[_0x40d9('0x2fe')]);let _0x2535d5=[0x1,1.5,0x2][options[_0x40d9('0x2ff')]];if(board[_0x40d9('0x300')](_0x2535d5)){$(_0x40d9('0xb7'))[_0x40d9('0x6a')](_0x2535d5*board['div']['width']());_resize();}kifuGrid[_0x40d9('0xc5')]()['invalidate']();}function _handleGeneralTimeout(_0x360b3a){timeouts[_0x360b3a]=![];switch(_0x360b3a){case _0x40d9('0xf6'):if(_challengeUser){_challengeUser=null;writeUserMessage(i18next['t'](_0x40d9('0x301')),0x1,_0x40d9('0x11e'),!![]);client[_0x40d9('0x1bd')](_0x40d9('0x302'));}break;case'REFRESH':$(_0x40d9('0x10b'))[_0x40d9('0x136')]('button-disabled');break;case _0x40d9('0x303'):if(currentLayer==0x1)_refreshLobby();break;case _0x40d9('0x20f'):if(client[_0x40d9('0x207')]==_0x40d9('0x304')){client[_0x40d9('0x268')]([0x5,0x8,0xa,0xa,0xc,0xc,0xc,0xc][_hourMileCount],config[_0x40d9('0x269')]);if(_hourMileCount<0x7){_hourMileCount++;setGeneralTimeout(_0x40d9('0x20f'),0x36ee80);}}break;case _0x40d9('0x2d8'):_sendStudyExecute();break;case _0x40d9('0x97'):client[_0x40d9('0x85')](_0x40d9('0x305'));break;case _0x40d9('0x306'):_stopTypingIndicator(0x0,!![]);break;case _0x40d9('0x307'):_stopTypingIndicator(0x1,!![]);break;case _0x40d9('0x308'):_refreshWorldClocks();break;}}function _stopAllTimeouts(){Object[_0x40d9('0xd6')](timeouts)['forEach'](function(_0x410506){clearGeneralTimeout(_0x410506);});}function _name2link(_0x3df2b5){return _0x40d9('0x309')+_0x3df2b5+_0x40d9('0x30a')+_0x3df2b5+_0x40d9('0x30b');}function _game2link(_0x3d5718,_0x326d17){return _0x40d9('0x30c')+_0x326d17+'\x27)\x22\x20class=\x22name-link\x22>'+_0x3d5718+_0x40d9('0x30b');}function _isFavorite(_0x586162){return![];}function _isColleague(_0x40aa0c){return![];}function getPremium(){if(premium==hidden_prm)return premium;else return 0x0;}function _enforcePremium(){_DisableOptionsByPremium();}function _refreshLobby(_0x1cb262=![]){client[_0x40d9('0x30d')](_0x1cb262);client[_0x40d9('0x30e')]();setGeneralTimeout(_0x40d9('0x303'),0x2bf20,!![]);}function _askEvaluation(_0x1cecc0){if(me[_0x40d9('0x10e')]||_0x1cecc0[_0x40d9('0x11b')](/^GUEST_/))return;$(_0x40d9('0x2cf'))[_0x40d9('0x1cc')]();let _0x5aa261=$(_0x40d9('0x2db'),{'id':'userEvaluationDialog'});_0x5aa261[_0x40d9('0xcd')](EJ(_0x40d9('0x30f'),_0x40d9('0x310'))+_0x1cecc0+EJ(_0x40d9('0x311'),_0x40d9('0x312')));$(_0x40d9('0x313'),{'href':'#','data-answer':'1'})[_0x40d9('0x8')](EJ(_0x40d9('0x314'),_0x40d9('0x315')))[_0x40d9('0x12d')](_0x5aa261);$(_0x40d9('0x313'),{'href':'#','data-answer':'-1'})[_0x40d9('0x8')](EJ(_0x40d9('0x316'),_0x40d9('0x317')))['appendTo'](_0x5aa261);_0x5aa261[_0x40d9('0x67')]('a')[_0x40d9('0x17d')](function(){$(_0x40d9('0x2cf'))[_0x40d9('0x1cc')]();apiClient[_0x40d9('0x318')](_0x1cecc0,parseInt($(this)[_0x40d9('0x5a')](_0x40d9('0x319')))>0x0);});let _0x4b9ddf=$(_0x40d9('0x122'));_0x4b9ddf['append'](_0x5aa261);_0x4b9ddf[_0x40d9('0xbe')]({'scrollTop':_0x4b9ddf[0x0][_0x40d9('0x12f')]},_0x40d9('0x6c'));}function _generateKIF(){let _0xe9bbac=gameTypeToKIF(board[_0x40d9('0x87')][_0x40d9('0x15e')]);if(_0xe9bbac==null)return'';let _0xe63ea2=[];_0xe63ea2[_0x40d9('0x17')](_0x40d9('0x31a'));let _0x469a90=board[_0x40d9('0x87')][_0x40d9('0x113')][_0x40d9('0xd')]('+')[0x4];_0xe63ea2[_0x40d9('0x17')](_0x40d9('0x31b')+_0x469a90[_0x40d9('0x249')](0x0,0x4)+'/'+_0x469a90[_0x40d9('0x249')](0x4,0x2)+'/'+_0x469a90[_0x40d9('0x249')](0x6,0x2));_0xe63ea2[_0x40d9('0x17')](_0x40d9('0x31c'));_0xe63ea2[_0x40d9('0x17')](_0x40d9('0x31d')+Math[_0x40d9('0x31e')](board[_0x40d9('0x87')]['total']/0x3c)+'分+'+board[_0x40d9('0x87')][_0x40d9('0x31f')]+'秒');_0xe63ea2[_0x40d9('0x17')](_0x40d9('0x320')+_0xe9bbac);_0xe63ea2[_0x40d9('0x17')](_0x40d9('0x321')+board['game'][_0x40d9('0x14f')][_0x40d9('0x28')]);_0xe63ea2[_0x40d9('0x17')]('後手：'+board[_0x40d9('0x87')]['white'][_0x40d9('0x28')]);_0xe63ea2[_0x40d9('0x17')](_0x40d9('0x322'));board[_0x40d9('0x18a')][_0x40d9('0x11')](function(_0x317cbd){let _0x5ef144=_0x317cbd[_0x40d9('0x323')]();if(_0x5ef144!=null)_0xe63ea2[_0x40d9('0x17')](_0x5ef144);});let _0x59492b=![];kifuGrid['rows']()['data']()['each'](function(_0x2701f6,_0x413fc4){if(_0x2701f6[_0x40d9('0x193')]){if(!_0x59492b){_0x59492b=!![];_0xe63ea2[_0x40d9('0x17')]('');_0xe63ea2[_0x40d9('0x17')]('変化：'+_0x2701f6[_0x40d9('0x27d')]+'手');}_0xe63ea2[_0x40d9('0x17')](_0x2701f6['toKIF']());}});return _0xe63ea2[_0x40d9('0x324')]('\x0d\x0a');}function generateKifuNoteObject(){if(!board['game'])return null;if(board['game']['isStudy']()||!board[_0x40d9('0x87')][_0x40d9('0x325')])return null;let _0x3f8a2b=board[_0x40d9('0x87')]['gameId'][_0x40d9('0xd')]('+')[0x4];let _0x396278='';if(board[_0x40d9('0x17b')]!=null){if(board['result']==-0x1)_0x396278=_0x40d9('0x326');else if(board[_0x40d9('0x17b')]==0x0)_0x396278=(board[_0x40d9('0x87')][_0x40d9('0x15e')][_0x40d9('0x11b')](/^hc/)?'下手':'先手')+'勝ち';else if(board[_0x40d9('0x17b')]==0x1)_0x396278=(board['game'][_0x40d9('0x15e')][_0x40d9('0x11b')](/^hc/)?'上手':'後手')+'勝ち';if(board[_0x40d9('0x87')][_0x40d9('0x325')]&&board[_0x40d9('0x87')][_0x40d9('0x325')]!=_0x40d9('0x327'))_0x396278+='('+Movement[_0x40d9('0x328')][_0x40d9('0x329')][board[_0x40d9('0x87')]['gameEndType']]+')';}let _0x347496=[];let _0x53ab7f=[];let _0x36776d=0x0;board[_0x40d9('0x18a')]['forEach'](function(_0x4122a0){if(_0x4122a0[_0x40d9('0x27d')]==0x1&&_0x4122a0[_0x40d9('0x32a')]==Position[_0x40d9('0x328')][_0x40d9('0x32b')])_0x53ab7f[_0x40d9('0x17')](',');if(_0x4122a0['num']!=0x0&&!_0x4122a0[_0x40d9('0x32c')]){_0x53ab7f[_0x40d9('0x17')](_0x4122a0[_0x40d9('0x32d')]());_0x36776d+=0x1;}if(_0x53ab7f[_0x40d9('0x94')]==0x96){_0x347496[_0x40d9('0x17')](_0x53ab7f);_0x53ab7f=[];}});if(_0x53ab7f[_0x40d9('0x94')]>0x0)_0x347496[_0x40d9('0x17')](_0x53ab7f);let _0x4cc5e8={'rule':HANDICAPS_JA[board[_0x40d9('0x87')]['gameType']]||'','startedAt':_0x3f8a2b[_0x40d9('0x249')](0x0,0x4)+'/'+_0x3f8a2b[_0x40d9('0x249')](0x4,0x2)+'/'+_0x3f8a2b['substr'](0x6,0x2)+'\u3000'+_0x3f8a2b[_0x40d9('0x249')](0x8,0x2)+':'+_0x3f8a2b[_0x40d9('0x249')](0xa,0x2),'endedAt':board[_0x40d9('0x275')]['tz'](_0x40d9('0x32e'))[_0x40d9('0x32f')]('YYYY/MM/DD\u3000HH:mm'),'place':_0x40d9('0x330')+client[_0x40d9('0x207')]+_0x40d9('0x331'),'thinkingTime':'各\x20'+Math[_0x40d9('0x31e')](board[_0x40d9('0x87')][_0x40d9('0x332')]/0x3c)+_0x40d9('0x333')+board[_0x40d9('0x87')]['byoyomi']+'秒)','blackName':board[_0x40d9('0x87')]['black']['name']+_0x40d9('0x334')+board[_0x40d9('0x87')]['black'][_0x40d9('0x1c5')](),'whiteName':board[_0x40d9('0x87')][_0x40d9('0x14d')]['name']+_0x40d9('0x334')+board['game']['white'][_0x40d9('0x1c5')](),'blackRank':(board[_0x40d9('0x87')][_0x40d9('0x14f')]['provisional']?'(':'')+makeRankFromRating(board[_0x40d9('0x87')][_0x40d9('0x14f')][_0x40d9('0x3c')],!![])+(board[_0x40d9('0x87')][_0x40d9('0x14f')][_0x40d9('0x186')]?')':''),'whiteRank':(board[_0x40d9('0x87')]['white']['provisional']?'(':'')+makeRankFromRating(board[_0x40d9('0x87')][_0x40d9('0x14d')][_0x40d9('0x3c')],!![])+(board[_0x40d9('0x87')]['white'][_0x40d9('0x186')]?')':''),'moveSets':_0x347496,'movesCount':_0x36776d[_0x40d9('0x1de')]()+'手','result':_0x396278,'opening':board[_0x40d9('0x87')][_0x40d9('0x335')]!='*'?openingTypeObject(board[_0x40d9('0x87')][_0x40d9('0x335')],!![])[_0x40d9('0x336')]:'','tournament':board[_0x40d9('0x87')]['getTournament']()?board[_0x40d9('0x87')][_0x40d9('0x26a')]()[_0x40d9('0x28')]():'','usedTime':'☗\x20'+sec2minsec(board['accumulatedTimes'][0x0])+_0x40d9('0x337')+sec2minsec(board[_0x40d9('0x338')][0x1])};return _0x4cc5e8;}function _countGuestGame(){let _0x4cd296=new Date();if(localStorage[_0x40d9('0x339')]&&localStorage[_0x40d9('0x339')]==_0x4cd296[_0x40d9('0x33a')]())localStorage[_0x40d9('0x11c')]=parseInt(localStorage['status'])+0x1;else{localStorage['period']=_0x4cd296[_0x40d9('0x33a')]();localStorage[_0x40d9('0x11c')]=0x1;}}function _checkGuestGamesExpired(){if(client['serverName']==_0x40d9('0x33b'))return![];if(!me[_0x40d9('0x10e')])return![];let _0x3b4202=new Date();if(localStorage['period']&&localStorage['period']==_0x3b4202[_0x40d9('0x33a')]()&&localStorage[_0x40d9('0x11c')]>=0x3){showAlertDialog(_0x40d9('0x33c'));return!![];}else{return![];}}function _loadDefaultOptions(){options={'timer_sound_type':0x2,'piece_type':0x0,'piece_type_34':0x1,'button_sound_play':0x1,'lobbychat_sound_play':0x1,'gamechat_sound_play':0x1,'end_sound_play':0x1,'hold_piece':0x1,'highlight_movable':0x0,'notation_style':0x1,'pm_auto_open':0x0,'accept_arrow':0x1,'arrow_color':0xcc00,'history_length':0x32,'postgame_study_level':0x0,'english_level':0x0,'receive_kifu_comment':0x0,'board_size':0x0,'favorites':[],'members':[],'opponents':[],'show_accumulated_time':0x0};_enforceOptions();_loadOptionsToDialog();}function _generateWorldClocks(){WorldClock[_0x40d9('0x328')][_0x40d9('0x33d')]['forEach'](function(_0x3fc9cc){let _0x23e474=new WorldClock(_0x3fc9cc[_0x40d9('0x33e')],_0x3fc9cc[_0x40d9('0x33f')]);$(_0x40d9('0x340'))[_0x40d9('0xd7')](_0x23e474[_0x40d9('0x341')]);_worldClocks[_0x40d9('0x17')](_0x23e474);});}function _refreshWorldClocks(){let _0x1f4bb9=moment();_worldClocks[_0x40d9('0x11')](function(_0x466599){_0x466599[_0x40d9('0xc2')](_0x1f4bb9);});setGeneralTimeout(_0x40d9('0x308'),0x2710);}function _fitnessLevelText(_0x2581b1){let _0x5e9cc1=parseInt(_0x2581b1);if(_0x5e9cc1==0x0)return i18next['t'](_0x40d9('0x342'));else return i18next['t'](_0x40d9('0x343'))+(_0x5e9cc1-0x1)[_0x40d9('0x1de')]();}function _findGameByUser(_0x330a8c){let _0x2f6417=null;gameGrid['rows']()[_0x40d9('0x5a')]()[_0x40d9('0x344')]()[_0x40d9('0x345')](function(_0x472a2c){if(_0x472a2c[_0x40d9('0x346')](_0x330a8c)){_0x2f6417=_0x472a2c;return!![];}});return _0x2f6417;}